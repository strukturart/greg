{"id":"../node_modules/tsdav/dist/tsdav.esm.js","dependencies":[{"name":"/home/arma7x/Desktop/New/kaios/greg/package.json","includedInParent":true,"mtime":1656000240012},{"name":"/home/arma7x/Desktop/New/kaios/greg/node_modules/tsdav/dist/package.json","includedInParent":true,"mtime":1655999264661},{"name":"cross-fetch","loc":{"line":1,"column":22,"index":22},"parent":"/home/arma7x/Desktop/New/kaios/greg/node_modules/tsdav/dist/tsdav.esm.js","resolved":"/home/arma7x/Desktop/New/kaios/greg/node_modules/cross-fetch/dist/browser-ponyfill.js"},{"name":"debug","loc":{"line":2,"column":22,"index":59},"parent":"/home/arma7x/Desktop/New/kaios/greg/node_modules/tsdav/dist/tsdav.esm.js","resolved":"/home/arma7x/Desktop/New/kaios/greg/node_modules/debug/src/browser.js"},{"name":"xml-js","loc":{"line":3,"column":20,"index":88},"parent":"/home/arma7x/Desktop/New/kaios/greg/node_modules/tsdav/dist/tsdav.esm.js","resolved":"/home/arma7x/Desktop/New/kaios/greg/node_modules/xml-js/lib/index.js"},{"name":"base-64","loc":{"line":4,"column":23,"index":121},"parent":"/home/arma7x/Desktop/New/kaios/greg/node_modules/tsdav/dist/tsdav.esm.js","resolved":"/home/arma7x/Desktop/New/kaios/greg/node_modules/base-64/base64.js"}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.urlEquals = exports.urlContains = exports.updateVCard = exports.updateObject = exports.updateCalendarObject = exports.syncCollection = exports.syncCalendars = exports.supportedReportSet = exports.smartCollectionSync = exports.refreshAccessToken = exports.propfind = exports.makeCalendar = exports.isCollectionDirty = exports.getOauthHeaders = exports.getDAVAttribute = exports.getBasicAuthHeaders = exports.freeBusyQuery = exports.fetchVCards = exports.fetchOauthTokens = exports.fetchCalendars = exports.fetchCalendarObjects = exports.fetchAddressBooks = exports.deleteVCard = exports.deleteObject = exports.deleteCalendarObject = exports.default = exports.davRequest = exports.createVCard = exports.createObject = exports.createDAVClient = exports.createCalendarObject = exports.createAccount = exports.collectionQuery = exports.cleanupFalsy = exports.calendarQuery = exports.calendarMultiGet = exports.addressBookQuery = exports.DAVNamespaceShort = exports.DAVNamespace = exports.DAVClient = exports.DAVAttributeMap = void 0;\n\nvar _crossFetch = require(\"cross-fetch\");\n\nvar _debug = _interopRequireDefault(require(\"debug\"));\n\nvar _xmlJs = _interopRequireDefault(require(\"xml-js\"));\n\nvar _base = require(\"base-64\");\n\nvar _DAVAttributeMap;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return exports; }; var exports = {}, Op = Object.prototype, hasOwn = Op.hasOwnProperty, $Symbol = \"function\" == typeof Symbol ? Symbol : {}, iteratorSymbol = $Symbol.iterator || \"@@iterator\", asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\", toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\"; function define(obj, key, value) { return Object.defineProperty(obj, key, { value: value, enumerable: !0, configurable: !0, writable: !0 }), obj[key]; } try { define({}, \"\"); } catch (err) { define = function define(obj, key, value) { return obj[key] = value; }; } function wrap(innerFn, outerFn, self, tryLocsList) { var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator, generator = Object.create(protoGenerator.prototype), context = new Context(tryLocsList || []); return generator._invoke = function (innerFn, self, context) { var state = \"suspendedStart\"; return function (method, arg) { if (\"executing\" === state) throw new Error(\"Generator is already running\"); if (\"completed\" === state) { if (\"throw\" === method) throw arg; return doneResult(); } for (context.method = method, context.arg = arg;;) { var delegate = context.delegate; if (delegate) { var delegateResult = maybeInvokeDelegate(delegate, context); if (delegateResult) { if (delegateResult === ContinueSentinel) continue; return delegateResult; } } if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) { if (\"suspendedStart\" === state) throw state = \"completed\", context.arg; context.dispatchException(context.arg); } else \"return\" === context.method && context.abrupt(\"return\", context.arg); state = \"executing\"; var record = tryCatch(innerFn, self, context); if (\"normal\" === record.type) { if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue; return { value: record.arg, done: context.done }; } \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg); } }; }(innerFn, self, context), generator; } function tryCatch(fn, obj, arg) { try { return { type: \"normal\", arg: fn.call(obj, arg) }; } catch (err) { return { type: \"throw\", arg: err }; } } exports.wrap = wrap; var ContinueSentinel = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var IteratorPrototype = {}; define(IteratorPrototype, iteratorSymbol, function () { return this; }); var getProto = Object.getPrototypeOf, NativeIteratorPrototype = getProto && getProto(getProto(values([]))); NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype); var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype); function defineIteratorMethods(prototype) { [\"next\", \"throw\", \"return\"].forEach(function (method) { define(prototype, method, function (arg) { return this._invoke(method, arg); }); }); } function AsyncIterator(generator, PromiseImpl) { function invoke(method, arg, resolve, reject) { var record = tryCatch(generator[method], generator, arg); if (\"throw\" !== record.type) { var result = record.arg, value = result.value; return value && \"object\" == _typeof(value) && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) { invoke(\"next\", value, resolve, reject); }, function (err) { invoke(\"throw\", err, resolve, reject); }) : PromiseImpl.resolve(value).then(function (unwrapped) { result.value = unwrapped, resolve(result); }, function (error) { return invoke(\"throw\", error, resolve, reject); }); } reject(record.arg); } var previousPromise; this._invoke = function (method, arg) { function callInvokeWithMethodAndArg() { return new PromiseImpl(function (resolve, reject) { invoke(method, arg, resolve, reject); }); } return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); }; } function maybeInvokeDelegate(delegate, context) { var method = delegate.iterator[context.method]; if (undefined === method) { if (context.delegate = null, \"throw\" === context.method) { if (delegate.iterator.return && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method)) return ContinueSentinel; context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a 'throw' method\"); } return ContinueSentinel; } var record = tryCatch(method, delegate.iterator, context.arg); if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel; var info = record.arg; return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel); } function pushTryEntry(locs) { var entry = { tryLoc: locs[0] }; 1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry); } function resetTryEntry(entry) { var record = entry.completion || {}; record.type = \"normal\", delete record.arg, entry.completion = record; } function Context(tryLocsList) { this.tryEntries = [{ tryLoc: \"root\" }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0); } function values(iterable) { if (iterable) { var iteratorMethod = iterable[iteratorSymbol]; if (iteratorMethod) return iteratorMethod.call(iterable); if (\"function\" == typeof iterable.next) return iterable; if (!isNaN(iterable.length)) { var i = -1, next = function next() { for (; ++i < iterable.length;) { if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next; } return next.value = undefined, next.done = !0, next; }; return next.next = next; } } return { next: doneResult }; } function doneResult() { return { value: undefined, done: !0 }; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, define(Gp, \"constructor\", GeneratorFunctionPrototype), define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) { var ctor = \"function\" == typeof genFun && genFun.constructor; return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name)); }, exports.mark = function (genFun) { return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun; }, exports.awrap = function (arg) { return { __await: arg }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () { return this; }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) { void 0 === PromiseImpl && (PromiseImpl = Promise); var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl); return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) { return result.done ? result.value : iter.next(); }); }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () { return this; }), define(Gp, \"toString\", function () { return \"[object Generator]\"; }), exports.keys = function (object) { var keys = []; for (var key in object) { keys.push(key); } return keys.reverse(), function next() { for (; keys.length;) { var key = keys.pop(); if (key in object) return next.value = key, next.done = !1, next; } return next.done = !0, next; }; }, exports.values = values, Context.prototype = { constructor: Context, reset: function reset(skipTempReset) { if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) { \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined); } }, stop: function stop() { this.done = !0; var rootRecord = this.tryEntries[0].completion; if (\"throw\" === rootRecord.type) throw rootRecord.arg; return this.rval; }, dispatchException: function dispatchException(exception) { if (this.done) throw exception; var context = this; function handle(loc, caught) { return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught; } for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i], record = entry.completion; if (\"root\" === entry.tryLoc) return handle(\"end\"); if (entry.tryLoc <= this.prev) { var hasCatch = hasOwn.call(entry, \"catchLoc\"), hasFinally = hasOwn.call(entry, \"finallyLoc\"); if (hasCatch && hasFinally) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } else if (hasCatch) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); } else { if (!hasFinally) throw new Error(\"try statement without catch or finally\"); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } } } }, abrupt: function abrupt(type, arg) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) { var finallyEntry = entry; break; } } finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null); var record = finallyEntry ? finallyEntry.completion : {}; return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record); }, complete: function complete(record, afterLoc) { if (\"throw\" === record.type) throw record.arg; return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel; }, finish: function finish(finallyLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel; } }, catch: function _catch(tryLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc === tryLoc) { var record = entry.completion; if (\"throw\" === record.type) { var thrown = record.arg; resetTryEntry(entry); } return thrown; } } throw new Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(iterable, resultName, nextLoc) { return this.delegate = { iterator: values(iterable), resultName: resultName, nextLoc: nextLoc }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel; } }, exports; }\n\nfunction _wrapRegExp() { _wrapRegExp = function _wrapRegExp(re, groups) { return new BabelRegExp(re, void 0, groups); }; var _super = RegExp.prototype, _groups = new WeakMap(); function BabelRegExp(re, flags, groups) { var _this = new RegExp(re, flags); return _groups.set(_this, groups || _groups.get(re)), _setPrototypeOf(_this, BabelRegExp.prototype); } function buildGroups(result, re) { var g = _groups.get(re); return Object.keys(g).reduce(function (groups, name) { return groups[name] = result[g[name]], groups; }, Object.create(null)); } return _inherits(BabelRegExp, RegExp), BabelRegExp.prototype.exec = function (str) { var result = _super.exec.call(this, str); return result && (result.groups = buildGroups(result, this)), result; }, BabelRegExp.prototype[Symbol.replace] = function (str, substitution) { if (\"string\" == typeof substitution) { var groups = _groups.get(this); return _super[Symbol.replace].call(this, str, substitution.replace(/\\$<([^>]+)>/g, function (_, name) { return \"$\" + groups[name]; })); } if (\"function\" == typeof substitution) { var _this = this; return _super[Symbol.replace].call(this, str, function () { var args = arguments; return \"object\" != _typeof(args[args.length - 1]) && (args = [].slice.call(args)).push(buildGroups(args, _this)), substitution.apply(this, args); }); } return _super[Symbol.replace].call(this, str, substitution); }, _wrapRegExp.apply(this, arguments); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\nfunction __rest(s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n}\n\nfunction __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nvar DAVNamespace;\nexports.DAVNamespace = DAVNamespace;\n\n(function (DAVNamespace) {\n  DAVNamespace[\"CALENDAR_SERVER\"] = \"http://calendarserver.org/ns/\";\n  DAVNamespace[\"CALDAV_APPLE\"] = \"http://apple.com/ns/ical/\";\n  DAVNamespace[\"CALDAV\"] = \"urn:ietf:params:xml:ns:caldav\";\n  DAVNamespace[\"CARDDAV\"] = \"urn:ietf:params:xml:ns:carddav\";\n  DAVNamespace[\"DAV\"] = \"DAV:\";\n})(DAVNamespace || (exports.DAVNamespace = DAVNamespace = {}));\n\nvar DAVAttributeMap = (_DAVAttributeMap = {}, _defineProperty(_DAVAttributeMap, DAVNamespace.CALDAV, 'xmlns:c'), _defineProperty(_DAVAttributeMap, DAVNamespace.CARDDAV, 'xmlns:card'), _defineProperty(_DAVAttributeMap, DAVNamespace.CALENDAR_SERVER, 'xmlns:cs'), _defineProperty(_DAVAttributeMap, DAVNamespace.CALDAV_APPLE, 'xmlns:ca'), _defineProperty(_DAVAttributeMap, DAVNamespace.DAV, 'xmlns:d'), _DAVAttributeMap);\nexports.DAVAttributeMap = DAVAttributeMap;\nvar DAVNamespaceShort;\nexports.DAVNamespaceShort = DAVNamespaceShort;\n\n(function (DAVNamespaceShort) {\n  DAVNamespaceShort[\"CALDAV\"] = \"c\";\n  DAVNamespaceShort[\"CARDDAV\"] = \"card\";\n  DAVNamespaceShort[\"CALENDAR_SERVER\"] = \"cs\";\n  DAVNamespaceShort[\"CALDAV_APPLE\"] = \"ca\";\n  DAVNamespaceShort[\"DAV\"] = \"d\";\n})(DAVNamespaceShort || (exports.DAVNamespaceShort = DAVNamespaceShort = {}));\n\nvar ICALObjects;\n\n(function (ICALObjects) {\n  ICALObjects[\"VEVENT\"] = \"VEVENT\";\n  ICALObjects[\"VTODO\"] = \"VTODO\";\n  ICALObjects[\"VJOURNAL\"] = \"VJOURNAL\";\n  ICALObjects[\"VFREEBUSY\"] = \"VFREEBUSY\";\n  ICALObjects[\"VTIMEZONE\"] = \"VTIMEZONE\";\n  ICALObjects[\"VALARM\"] = \"VALARM\";\n})(ICALObjects || (ICALObjects = {}));\n\nvar camelCase = function camelCase(str) {\n  return str.replace(/([-_]\\w)/g, function (g) {\n    return g[1].toUpperCase();\n  });\n};\n\nvar nativeType = function nativeType(value) {\n  var nValue = Number(value);\n\n  if (!Number.isNaN(nValue)) {\n    return nValue;\n  }\n\n  var bValue = value.toLowerCase();\n\n  if (bValue === 'true') {\n    return true;\n  }\n\n  if (bValue === 'false') {\n    return false;\n  }\n\n  return value;\n};\n\nvar urlEquals = function urlEquals(urlA, urlB) {\n  if (!urlA && !urlB) {\n    return true;\n  }\n\n  if (!urlA || !urlB) {\n    return false;\n  }\n\n  var trimmedUrlA = urlA.trim();\n  var trimmedUrlB = urlB.trim();\n\n  if (Math.abs(trimmedUrlA.length - trimmedUrlB.length) > 1) {\n    return false;\n  }\n\n  var strippedUrlA = trimmedUrlA.slice(-1) === '/' ? trimmedUrlA.slice(0, -1) : trimmedUrlA;\n  var strippedUrlB = trimmedUrlB.slice(-1) === '/' ? trimmedUrlB.slice(0, -1) : trimmedUrlB;\n  return urlA.includes(strippedUrlB) || urlB.includes(strippedUrlA);\n};\n\nexports.urlEquals = urlEquals;\n\nvar urlContains = function urlContains(urlA, urlB) {\n  if (!urlA && !urlB) {\n    return true;\n  }\n\n  if (!urlA || !urlB) {\n    return false;\n  }\n\n  var trimmedUrlA = urlA.trim();\n  var trimmedUrlB = urlB.trim();\n  var strippedUrlA = trimmedUrlA.slice(-1) === '/' ? trimmedUrlA.slice(0, -1) : trimmedUrlA;\n  var strippedUrlB = trimmedUrlB.slice(-1) === '/' ? trimmedUrlB.slice(0, -1) : trimmedUrlB;\n  return urlA.includes(strippedUrlB) || urlB.includes(strippedUrlA);\n};\n\nexports.urlContains = urlContains;\n\nvar getDAVAttribute = function getDAVAttribute(nsArr) {\n  return nsArr.reduce(function (prev, curr) {\n    return Object.assign(Object.assign({}, prev), _defineProperty({}, DAVAttributeMap[curr], curr));\n  }, {});\n};\n\nexports.getDAVAttribute = getDAVAttribute;\n\nvar cleanupFalsy = function cleanupFalsy(obj) {\n  return Object.entries(obj).reduce(function (prev, _ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n        key = _ref2[0],\n        value = _ref2[1];\n\n    if (value) return Object.assign(Object.assign({}, prev), _defineProperty({}, key, value));\n    return prev;\n  }, {});\n};\n\nexports.cleanupFalsy = cleanupFalsy;\nvar requestHelpers = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  urlEquals: urlEquals,\n  urlContains: urlContains,\n  getDAVAttribute: getDAVAttribute,\n  cleanupFalsy: cleanupFalsy\n});\nvar debug$5 = (0, _debug.default)('tsdav:request');\n\nvar _davRequest = function davRequest(params) {\n  return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n    var _a, url, init, _params$convertIncomi, convertIncoming, _params$parseOutgoing, parseOutgoing, headers, body, namespace, method, attributes, xmlBody, davResponse, resText, result, responseBodies;\n\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            url = params.url, init = params.init, _params$convertIncomi = params.convertIncoming, convertIncoming = _params$convertIncomi === void 0 ? true : _params$convertIncomi, _params$parseOutgoing = params.parseOutgoing, parseOutgoing = _params$parseOutgoing === void 0 ? true : _params$parseOutgoing;\n            headers = init.headers, body = init.body, namespace = init.namespace, method = init.method, attributes = init.attributes;\n            xmlBody = convertIncoming ? _xmlJs.default.js2xml(Object.assign(Object.assign({\n              _declaration: {\n                _attributes: {\n                  version: '1.0',\n                  encoding: 'utf-8'\n                }\n              }\n            }, body), {\n              _attributes: attributes\n            }), {\n              compact: true,\n              spaces: 2,\n              elementNameFn: function elementNameFn(name) {\n                // add namespace to all keys without namespace\n                if (namespace && !/^.+:.+/.test(name)) {\n                  return \"\".concat(namespace, \":\").concat(name);\n                }\n\n                return name;\n              }\n            }) : body; // debug('outgoing xml:');\n            // debug(`${method} ${url}`);\n            // debug(\n            //   `headers: ${JSON.stringify(\n            //     {\n            //       'Content-Type': 'text/xml;charset=UTF-8',\n            //       ...cleanupFalsy(headers),\n            //     },\n            //     null,\n            //     2\n            //   )}`\n            // );\n            // debug(xmlBody);\n\n            _context.next = 5;\n            return (0, _crossFetch.fetch)(url, {\n              headers: Object.assign({\n                'Content-Type': 'text/xml;charset=UTF-8'\n              }, cleanupFalsy(headers)),\n              body: xmlBody,\n              method: method\n            });\n\n          case 5:\n            davResponse = _context.sent;\n            _context.next = 8;\n            return davResponse.text();\n\n          case 8:\n            resText = _context.sent;\n\n            if (!(!davResponse.ok || !((_a = davResponse.headers.get('content-type')) === null || _a === void 0 ? void 0 : _a.includes('xml')) || !parseOutgoing)) {\n              _context.next = 11;\n              break;\n            }\n\n            return _context.abrupt(\"return\", [{\n              href: davResponse.url,\n              ok: davResponse.ok,\n              status: davResponse.status,\n              statusText: davResponse.statusText,\n              raw: resText\n            }]);\n\n          case 11:\n            result = _xmlJs.default.xml2js(resText, {\n              compact: true,\n              trim: true,\n              textFn: function textFn(value, parentElement) {\n                try {\n                  // This is needed for xml-js design reasons\n                  // eslint-disable-next-line no-underscore-dangle\n                  var parentOfParent = parentElement._parent;\n                  var pOpKeys = Object.keys(parentOfParent);\n                  var keyNo = pOpKeys.length;\n                  var keyName = pOpKeys[keyNo - 1];\n                  var arrOfKey = parentOfParent[keyName];\n                  var arrOfKeyLen = arrOfKey.length;\n\n                  if (arrOfKeyLen > 0) {\n                    var arr = arrOfKey;\n                    var arrIndex = arrOfKey.length - 1;\n                    arr[arrIndex] = nativeType(value);\n                  } else {\n                    parentOfParent[keyName] = nativeType(value);\n                  }\n                } catch (e) {\n                  debug$5(e.stack);\n                }\n              },\n              // remove namespace & camelCase\n              elementNameFn: function elementNameFn(attributeName) {\n                return camelCase(attributeName.replace(/^.+:/, ''));\n              },\n              attributesFn: function attributesFn(value) {\n                var newVal = Object.assign({}, value);\n                delete newVal.xmlns;\n                return newVal;\n              },\n              ignoreDeclaration: true\n            });\n            responseBodies = Array.isArray(result.multistatus.response) ? result.multistatus.response : [result.multistatus.response];\n            return _context.abrupt(\"return\", responseBodies.map(function (responseBody) {\n              var _a, _b;\n\n              var statusRegex = /*#__PURE__*/_wrapRegExp(/^\\S+\\s(\\d+)\\s(.+)$/, {\n                status: 1,\n                statusText: 2\n              });\n\n              if (!responseBody) {\n                return {\n                  status: davResponse.status,\n                  statusText: davResponse.statusText,\n                  ok: davResponse.ok\n                };\n              }\n\n              var matchArr = statusRegex.exec(responseBody.status);\n              return {\n                raw: result,\n                href: responseBody.href,\n                status: (matchArr === null || matchArr === void 0 ? void 0 : matchArr.groups) ? Number.parseInt(matchArr === null || matchArr === void 0 ? void 0 : matchArr.groups.status, 10) : davResponse.status,\n                statusText: (_b = (_a = matchArr === null || matchArr === void 0 ? void 0 : matchArr.groups) === null || _a === void 0 ? void 0 : _a.statusText) !== null && _b !== void 0 ? _b : davResponse.statusText,\n                ok: !responseBody.error,\n                error: responseBody.error,\n                responsedescription: responseBody.responsedescription,\n                props: (Array.isArray(responseBody.propstat) ? responseBody.propstat : [responseBody.propstat]).reduce(function (prev, curr) {\n                  return Object.assign(Object.assign({}, prev), curr === null || curr === void 0 ? void 0 : curr.prop);\n                }, {})\n              };\n            }));\n\n          case 14:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n};\n\nexports.davRequest = _davRequest;\n\nvar _propfind = function propfind(params) {\n  return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n    var url, props, depth, headers;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            url = params.url, props = params.props, depth = params.depth, headers = params.headers;\n            return _context2.abrupt(\"return\", _davRequest({\n              url: url,\n              init: {\n                method: 'PROPFIND',\n                headers: cleanupFalsy(Object.assign({\n                  depth: depth\n                }, headers)),\n                namespace: DAVNamespaceShort.DAV,\n                body: {\n                  propfind: {\n                    _attributes: getDAVAttribute([DAVNamespace.CALDAV, DAVNamespace.CALDAV_APPLE, DAVNamespace.CALENDAR_SERVER, DAVNamespace.CARDDAV, DAVNamespace.DAV]),\n                    prop: props\n                  }\n                }\n              }\n            }));\n\n          case 2:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n};\n\nexports.propfind = _propfind;\n\nvar _createObject = function createObject(params) {\n  return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n    var url, data, headers;\n    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            url = params.url, data = params.data, headers = params.headers;\n            return _context3.abrupt(\"return\", (0, _crossFetch.fetch)(url, {\n              method: 'PUT',\n              body: data,\n              headers: headers\n            }));\n\n          case 2:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n};\n\nexports.createObject = _createObject;\n\nvar _updateObject = function updateObject(params) {\n  return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n    var url, data, etag, headers;\n    return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            url = params.url, data = params.data, etag = params.etag, headers = params.headers;\n            return _context4.abrupt(\"return\", (0, _crossFetch.fetch)(url, {\n              method: 'PUT',\n              body: data,\n              headers: cleanupFalsy(Object.assign({\n                'If-Match': etag\n              }, headers))\n            }));\n\n          case 2:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n};\n\nexports.updateObject = _updateObject;\n\nvar _deleteObject = function deleteObject(params) {\n  return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee5() {\n    var url, headers, etag;\n    return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            url = params.url, headers = params.headers, etag = params.etag;\n            return _context5.abrupt(\"return\", (0, _crossFetch.fetch)(url, {\n              method: 'DELETE',\n              headers: cleanupFalsy(Object.assign({\n                'If-Match': etag\n              }, headers))\n            }));\n\n          case 2:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, _callee5);\n  }));\n};\n\nexports.deleteObject = _deleteObject;\nvar request = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  davRequest: _davRequest,\n  propfind: _propfind,\n  createObject: _createObject,\n  updateObject: _updateObject,\n  deleteObject: _deleteObject\n});\n\nfunction hasFields(obj, fields) {\n  var inObj = function inObj(object) {\n    return fields.every(function (f) {\n      return object[f];\n    });\n  };\n\n  if (Array.isArray(obj)) {\n    return obj.every(function (o) {\n      return inObj(o);\n    });\n  }\n\n  return inObj(obj);\n}\n\nvar findMissingFieldNames = function findMissingFieldNames(obj, fields) {\n  return fields.reduce(function (prev, curr) {\n    return obj[curr] ? prev : \"\".concat(prev.length ? \"\".concat(prev, \",\") : '').concat(curr);\n  }, '');\n};\n\nvar debug$4 = (0, _debug.default)('tsdav:collection');\n\nvar _collectionQuery = function collectionQuery(params) {\n  return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee6() {\n    var url, body, depth, _params$defaultNamesp, defaultNamespace, headers, queryResults;\n\n    return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            url = params.url, body = params.body, depth = params.depth, _params$defaultNamesp = params.defaultNamespace, defaultNamespace = _params$defaultNamesp === void 0 ? DAVNamespaceShort.DAV : _params$defaultNamesp, headers = params.headers;\n            _context6.next = 3;\n            return _davRequest({\n              url: url,\n              init: {\n                method: 'REPORT',\n                headers: cleanupFalsy(Object.assign({\n                  depth: depth\n                }, headers)),\n                namespace: defaultNamespace,\n                body: body\n              }\n            });\n\n          case 3:\n            queryResults = _context6.sent;\n\n            if (!(queryResults.length === 1 && !queryResults[0].raw)) {\n              _context6.next = 6;\n              break;\n            }\n\n            return _context6.abrupt(\"return\", []);\n\n          case 6:\n            return _context6.abrupt(\"return\", queryResults);\n\n          case 7:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    }, _callee6);\n  }));\n};\n\nexports.collectionQuery = _collectionQuery;\n\nvar _makeCollection = function makeCollection(params) {\n  return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee7() {\n    var url, props, depth, headers;\n    return _regeneratorRuntime().wrap(function _callee7$(_context7) {\n      while (1) {\n        switch (_context7.prev = _context7.next) {\n          case 0:\n            url = params.url, props = params.props, depth = params.depth, headers = params.headers;\n            return _context7.abrupt(\"return\", _davRequest({\n              url: url,\n              init: {\n                method: 'MKCOL',\n                headers: cleanupFalsy(Object.assign({\n                  depth: depth\n                }, headers)),\n                namespace: DAVNamespaceShort.DAV,\n                body: props ? {\n                  mkcol: {\n                    set: {\n                      prop: props\n                    }\n                  }\n                } : undefined\n              }\n            }));\n\n          case 2:\n          case \"end\":\n            return _context7.stop();\n        }\n      }\n    }, _callee7);\n  }));\n};\n\nvar _supportedReportSet = function supportedReportSet(params) {\n  return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee8() {\n    var _a, _b, _c, _d, _e, collection, headers, res;\n\n    return _regeneratorRuntime().wrap(function _callee8$(_context8) {\n      while (1) {\n        switch (_context8.prev = _context8.next) {\n          case 0:\n            collection = params.collection, headers = params.headers;\n            _context8.next = 3;\n            return _propfind({\n              url: collection.url,\n              props: _defineProperty({}, \"\".concat(DAVNamespaceShort.DAV, \":supported-report-set\"), {}),\n              depth: '0',\n              headers: headers\n            });\n\n          case 3:\n            res = _context8.sent;\n            return _context8.abrupt(\"return\", (_e = (_d = (_c = (_b = (_a = res[0]) === null || _a === void 0 ? void 0 : _a.props) === null || _b === void 0 ? void 0 : _b.supportedReportSet) === null || _c === void 0 ? void 0 : _c.supportedReport) === null || _d === void 0 ? void 0 : _d.map(function (sr) {\n              return Object.keys(sr.report)[0];\n            })) !== null && _e !== void 0 ? _e : []);\n\n          case 5:\n          case \"end\":\n            return _context8.stop();\n        }\n      }\n    }, _callee8);\n  }));\n};\n\nexports.supportedReportSet = _supportedReportSet;\n\nvar _isCollectionDirty = function isCollectionDirty(params) {\n  return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee9() {\n    var _f, _g, _h, collection, headers, responses, res;\n\n    return _regeneratorRuntime().wrap(function _callee9$(_context9) {\n      while (1) {\n        switch (_context9.prev = _context9.next) {\n          case 0:\n            collection = params.collection, headers = params.headers;\n            _context9.next = 3;\n            return _propfind({\n              url: collection.url,\n              props: _defineProperty({}, \"\".concat(DAVNamespaceShort.CALENDAR_SERVER, \":getctag\"), {}),\n              depth: '0',\n              headers: headers\n            });\n\n          case 3:\n            responses = _context9.sent;\n            res = responses.filter(function (r) {\n              return urlContains(collection.url, r.href);\n            })[0];\n\n            if (res) {\n              _context9.next = 7;\n              break;\n            }\n\n            throw new Error('Collection does not exist on server');\n\n          case 7:\n            return _context9.abrupt(\"return\", {\n              isDirty: collection.ctag !== ((_f = res.props) === null || _f === void 0 ? void 0 : _f.getctag),\n              newCtag: (_h = (_g = res.props) === null || _g === void 0 ? void 0 : _g.getctag) === null || _h === void 0 ? void 0 : _h.toString()\n            });\n\n          case 8:\n          case \"end\":\n            return _context9.stop();\n        }\n      }\n    }, _callee9);\n  }));\n};\n/**\n * This is for webdav sync-collection only\n */\n\n\nexports.isCollectionDirty = _isCollectionDirty;\n\nvar _syncCollection2 = function syncCollection(params) {\n  var url = params.url,\n      props = params.props,\n      headers = params.headers,\n      syncLevel = params.syncLevel,\n      syncToken = params.syncToken;\n  return _davRequest({\n    url: url,\n    init: {\n      method: 'REPORT',\n      namespace: DAVNamespaceShort.DAV,\n      headers: Object.assign({}, headers),\n      body: {\n        'sync-collection': _defineProperty({\n          _attributes: getDAVAttribute([DAVNamespace.CALDAV, DAVNamespace.CARDDAV, DAVNamespace.DAV]),\n          'sync-level': syncLevel,\n          'sync-token': syncToken\n        }, \"\".concat(DAVNamespaceShort.DAV, \":prop\"), props)\n      }\n    }\n  });\n};\n/** remote collection to local */\n\n\nexports.syncCollection = _syncCollection2;\n\nvar _smartCollectionSync = function smartCollectionSync(params) {\n  return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee10() {\n    var _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, collection, method, headers, account, detailedResult, requiredFields, syncMethod, _props3, _props4, result, objectResponses, changedObjectUrls, deletedObjectUrls, multiGetObjectResponse, remoteObjects, localObjects, created, updated, deleted, unchanged, _yield$isCollectionDi, isDirty, newCtag, _localObjects, _remoteObjects, _created, _updated, _deleted, _unchanged;\n\n    return _regeneratorRuntime().wrap(function _callee10$(_context10) {\n      while (1) {\n        switch (_context10.prev = _context10.next) {\n          case 0:\n            collection = params.collection, method = params.method, headers = params.headers, account = params.account, detailedResult = params.detailedResult;\n            requiredFields = ['accountType', 'homeUrl'];\n\n            if (!(!account || !hasFields(account, requiredFields))) {\n              _context10.next = 6;\n              break;\n            }\n\n            if (account) {\n              _context10.next = 5;\n              break;\n            }\n\n            throw new Error('no account for smartCollectionSync');\n\n          case 5:\n            throw new Error(\"account must have \".concat(findMissingFieldNames(account, requiredFields), \" before smartCollectionSync\"));\n\n          case 6:\n            syncMethod = method !== null && method !== void 0 ? method : ((_j = collection.reports) === null || _j === void 0 ? void 0 : _j.includes('syncCollection')) ? 'webdav' : 'basic';\n            debug$4(\"smart collection sync with type \".concat(account.accountType, \" and method \").concat(syncMethod));\n\n            if (!(syncMethod === 'webdav')) {\n              _context10.next = 39;\n              break;\n            }\n\n            _context10.next = 11;\n            return _syncCollection2({\n              url: collection.url,\n              props: (_props3 = {}, _defineProperty(_props3, \"\".concat(DAVNamespaceShort.DAV, \":getetag\"), {}), _defineProperty(_props3, \"\".concat(account.accountType === 'caldav' ? DAVNamespaceShort.CALDAV : DAVNamespaceShort.CARDDAV, \":\").concat(account.accountType === 'caldav' ? 'calendar-data' : 'address-data'), {}), _defineProperty(_props3, \"\".concat(DAVNamespaceShort.DAV, \":displayname\"), {}), _props3),\n              syncLevel: 1,\n              syncToken: collection.syncToken,\n              headers: headers\n            });\n\n          case 11:\n            result = _context10.sent;\n            objectResponses = result.filter(function (r) {\n              var _a;\n\n              var extName = account.accountType === 'caldav' ? '.ics' : '.vcf';\n              return ((_a = r.href) === null || _a === void 0 ? void 0 : _a.slice(-4)) === extName;\n            });\n            changedObjectUrls = objectResponses.filter(function (o) {\n              return o.status !== 404;\n            }).map(function (r) {\n              return r.href;\n            });\n            deletedObjectUrls = objectResponses.filter(function (o) {\n              return o.status === 404;\n            }).map(function (r) {\n              return r.href;\n            });\n\n            if (!changedObjectUrls.length) {\n              _context10.next = 30;\n              break;\n            }\n\n            _context10.next = 18;\n            return (_k = collection === null || collection === void 0 ? void 0 : collection.objectMultiGet) === null || _k === void 0 ? void 0 : _k.call(collection, {\n              url: collection.url,\n              props: (_props4 = {}, _defineProperty(_props4, \"\".concat(DAVNamespaceShort.DAV, \":getetag\"), {}), _defineProperty(_props4, \"\".concat(account.accountType === 'caldav' ? DAVNamespaceShort.CALDAV : DAVNamespaceShort.CARDDAV, \":\").concat(account.accountType === 'caldav' ? 'calendar-data' : 'address-data'), {}), _props4),\n              objectUrls: changedObjectUrls,\n              depth: '1',\n              headers: headers\n            });\n\n          case 18:\n            _context10.t2 = _l = _context10.sent;\n            _context10.t1 = _context10.t2 !== null;\n\n            if (!_context10.t1) {\n              _context10.next = 22;\n              break;\n            }\n\n            _context10.t1 = _l !== void 0;\n\n          case 22:\n            if (!_context10.t1) {\n              _context10.next = 26;\n              break;\n            }\n\n            _context10.t3 = _l;\n            _context10.next = 27;\n            break;\n\n          case 26:\n            _context10.t3 = [];\n\n          case 27:\n            _context10.t0 = _context10.t3;\n            _context10.next = 31;\n            break;\n\n          case 30:\n            _context10.t0 = [];\n\n          case 31:\n            multiGetObjectResponse = _context10.t0;\n            remoteObjects = multiGetObjectResponse.map(function (res) {\n              var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\n\n              return {\n                url: (_a = res.href) !== null && _a !== void 0 ? _a : '',\n                etag: (_b = res.props) === null || _b === void 0 ? void 0 : _b.getetag,\n                data: (account === null || account === void 0 ? void 0 : account.accountType) === 'caldav' ? (_e = (_d = (_c = res.props) === null || _c === void 0 ? void 0 : _c.calendarData) === null || _d === void 0 ? void 0 : _d._cdata) !== null && _e !== void 0 ? _e : (_f = res.props) === null || _f === void 0 ? void 0 : _f.calendarData : (_j = (_h = (_g = res.props) === null || _g === void 0 ? void 0 : _g.addressData) === null || _h === void 0 ? void 0 : _h._cdata) !== null && _j !== void 0 ? _j : (_k = res.props) === null || _k === void 0 ? void 0 : _k.addressData\n              };\n            });\n            localObjects = (_m = collection.objects) !== null && _m !== void 0 ? _m : []; // no existing url\n\n            created = remoteObjects.filter(function (o) {\n              return localObjects.every(function (lo) {\n                return !urlContains(lo.url, o.url);\n              });\n            }); // debug(`created objects: ${created.map((o) => o.url).join('\\n')}`);\n            // have same url, but etag different\n\n            updated = localObjects.reduce(function (prev, curr) {\n              var found = remoteObjects.find(function (ro) {\n                return urlContains(ro.url, curr.url);\n              });\n\n              if (found && found.etag && found.etag !== curr.etag) {\n                return [].concat(_toConsumableArray(prev), [found]);\n              }\n\n              return prev;\n            }, []); // debug(`updated objects: ${updated.map((o) => o.url).join('\\n')}`);\n\n            deleted = deletedObjectUrls.map(function (o) {\n              return {\n                url: o,\n                etag: ''\n              };\n            }); // debug(`deleted objects: ${deleted.map((o) => o.url).join('\\n')}`);\n\n            unchanged = localObjects.filter(function (lo) {\n              return remoteObjects.some(function (ro) {\n                return urlContains(lo.url, ro.url) && ro.etag === lo.etag;\n              });\n            });\n            return _context10.abrupt(\"return\", Object.assign(Object.assign({}, collection), {\n              objects: detailedResult ? {\n                created: created,\n                updated: updated,\n                deleted: deleted\n              } : [].concat(_toConsumableArray(unchanged), _toConsumableArray(created), _toConsumableArray(updated)),\n              // all syncToken in the results are the same so we use the first one here\n              syncToken: (_r = (_q = (_p = (_o = result[0]) === null || _o === void 0 ? void 0 : _o.raw) === null || _p === void 0 ? void 0 : _p.multistatus) === null || _q === void 0 ? void 0 : _q.syncToken) !== null && _r !== void 0 ? _r : collection.syncToken\n            }));\n\n          case 39:\n            if (!(syncMethod === 'basic')) {\n              _context10.next = 64;\n              break;\n            }\n\n            _context10.next = 42;\n            return _isCollectionDirty({\n              collection: collection,\n              headers: headers\n            });\n\n          case 42:\n            _yield$isCollectionDi = _context10.sent;\n            isDirty = _yield$isCollectionDi.isDirty;\n            newCtag = _yield$isCollectionDi.newCtag;\n            _localObjects = (_s = collection.objects) !== null && _s !== void 0 ? _s : [];\n            _context10.next = 48;\n            return (_t = collection.fetchObjects) === null || _t === void 0 ? void 0 : _t.call(collection, {\n              collection: collection,\n              headers: headers\n            });\n\n          case 48:\n            _context10.t5 = _u = _context10.sent;\n            _context10.t4 = _context10.t5 !== null;\n\n            if (!_context10.t4) {\n              _context10.next = 52;\n              break;\n            }\n\n            _context10.t4 = _u !== void 0;\n\n          case 52:\n            if (!_context10.t4) {\n              _context10.next = 56;\n              break;\n            }\n\n            _context10.t6 = _u;\n            _context10.next = 57;\n            break;\n\n          case 56:\n            _context10.t6 = [];\n\n          case 57:\n            _remoteObjects = _context10.t6;\n            // no existing url\n            _created = _remoteObjects.filter(function (ro) {\n              return _localObjects.every(function (lo) {\n                return !urlContains(lo.url, ro.url);\n              });\n            }); // debug(`created objects: ${created.map((o) => o.url).join('\\n')}`);\n            // have same url, but etag different\n\n            _updated = _localObjects.reduce(function (prev, curr) {\n              var found = _remoteObjects.find(function (ro) {\n                return urlContains(ro.url, curr.url);\n              });\n\n              if (found && found.etag && found.etag !== curr.etag) {\n                return [].concat(_toConsumableArray(prev), [found]);\n              }\n\n              return prev;\n            }, []); // debug(`updated objects: ${updated.map((o) => o.url).join('\\n')}`);\n            // does not present in remote\n\n            _deleted = _localObjects.filter(function (cal) {\n              return _remoteObjects.every(function (ro) {\n                return !urlContains(ro.url, cal.url);\n              });\n            }); // debug(`deleted objects: ${deleted.map((o) => o.url).join('\\n')}`);\n\n            _unchanged = _localObjects.filter(function (lo) {\n              return _remoteObjects.some(function (ro) {\n                return urlContains(lo.url, ro.url) && ro.etag === lo.etag;\n              });\n            });\n\n            if (!isDirty) {\n              _context10.next = 64;\n              break;\n            }\n\n            return _context10.abrupt(\"return\", Object.assign(Object.assign({}, collection), {\n              objects: detailedResult ? {\n                created: _created,\n                updated: _updated,\n                deleted: _deleted\n              } : [].concat(_toConsumableArray(_unchanged), _toConsumableArray(_created), _toConsumableArray(_updated)),\n              ctag: newCtag\n            }));\n\n          case 64:\n            return _context10.abrupt(\"return\", detailedResult ? Object.assign(Object.assign({}, collection), {\n              objects: {\n                created: [],\n                updated: [],\n                deleted: []\n              }\n            }) : collection);\n\n          case 65:\n          case \"end\":\n            return _context10.stop();\n        }\n      }\n    }, _callee10);\n  }));\n};\n\nexports.smartCollectionSync = _smartCollectionSync;\nvar collection = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  collectionQuery: _collectionQuery,\n  makeCollection: _makeCollection,\n  supportedReportSet: _supportedReportSet,\n  isCollectionDirty: _isCollectionDirty,\n  syncCollection: _syncCollection2,\n  smartCollectionSync: _smartCollectionSync\n});\nvar debug$3 = (0, _debug.default)('tsdav:addressBook');\n\nvar _addressBookQuery = function addressBookQuery(params) {\n  return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee11() {\n    var _addressbookQuery;\n\n    var url, props, filters, depth, headers;\n    return _regeneratorRuntime().wrap(function _callee11$(_context11) {\n      while (1) {\n        switch (_context11.prev = _context11.next) {\n          case 0:\n            url = params.url, props = params.props, filters = params.filters, depth = params.depth, headers = params.headers;\n            return _context11.abrupt(\"return\", _collectionQuery({\n              url: url,\n              body: {\n                'addressbook-query': (_addressbookQuery = {\n                  _attributes: getDAVAttribute([DAVNamespace.CARDDAV, DAVNamespace.DAV])\n                }, _defineProperty(_addressbookQuery, \"\".concat(DAVNamespaceShort.DAV, \":prop\"), props), _defineProperty(_addressbookQuery, \"filter\", filters !== null && filters !== void 0 ? filters : {\n                  'prop-filter': {\n                    _attributes: {\n                      name: 'FN'\n                    }\n                  }\n                }), _addressbookQuery)\n              },\n              defaultNamespace: DAVNamespaceShort.CARDDAV,\n              depth: depth,\n              headers: headers\n            }));\n\n          case 2:\n          case \"end\":\n            return _context11.stop();\n        }\n      }\n    }, _callee11);\n  }));\n};\n\nexports.addressBookQuery = _addressBookQuery;\n\nvar _addressBookMultiGet = function addressBookMultiGet(params) {\n  return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee12() {\n    var _addressbookMultiget;\n\n    var url, props, objectUrls, depth, headers;\n    return _regeneratorRuntime().wrap(function _callee12$(_context12) {\n      while (1) {\n        switch (_context12.prev = _context12.next) {\n          case 0:\n            url = params.url, props = params.props, objectUrls = params.objectUrls, depth = params.depth, headers = params.headers;\n            return _context12.abrupt(\"return\", _collectionQuery({\n              url: url,\n              body: {\n                'addressbook-multiget': (_addressbookMultiget = {\n                  _attributes: getDAVAttribute([DAVNamespace.DAV, DAVNamespace.CARDDAV])\n                }, _defineProperty(_addressbookMultiget, \"\".concat(DAVNamespaceShort.DAV, \":prop\"), props), _defineProperty(_addressbookMultiget, \"\".concat(DAVNamespaceShort.DAV, \":href\"), objectUrls), _addressbookMultiget)\n              },\n              defaultNamespace: DAVNamespaceShort.CARDDAV,\n              depth: depth,\n              headers: headers\n            }));\n\n          case 2:\n          case \"end\":\n            return _context12.stop();\n        }\n      }\n    }, _callee12);\n  }));\n};\n\nvar _fetchAddressBooks = function fetchAddressBooks(params) {\n  return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee14() {\n    var _ref4;\n\n    var _ref3, account, headers, customProps, requiredFields, res;\n\n    return _regeneratorRuntime().wrap(function _callee14$(_context14) {\n      while (1) {\n        switch (_context14.prev = _context14.next) {\n          case 0:\n            _ref3 = params !== null && params !== void 0 ? params : {}, account = _ref3.account, headers = _ref3.headers, customProps = _ref3.props;\n            requiredFields = ['homeUrl', 'rootUrl'];\n\n            if (!(!account || !hasFields(account, requiredFields))) {\n              _context14.next = 6;\n              break;\n            }\n\n            if (account) {\n              _context14.next = 5;\n              break;\n            }\n\n            throw new Error('no account for fetchAddressBooks');\n\n          case 5:\n            throw new Error(\"account must have \".concat(findMissingFieldNames(account, requiredFields), \" before fetchAddressBooks\"));\n\n          case 6:\n            _context14.next = 8;\n            return _propfind({\n              url: account.homeUrl,\n              props: customProps !== null && customProps !== void 0 ? customProps : (_ref4 = {}, _defineProperty(_ref4, \"\".concat(DAVNamespaceShort.DAV, \":displayname\"), {}), _defineProperty(_ref4, \"\".concat(DAVNamespaceShort.CALENDAR_SERVER, \":getctag\"), {}), _defineProperty(_ref4, \"\".concat(DAVNamespaceShort.DAV, \":resourcetype\"), {}), _defineProperty(_ref4, \"\".concat(DAVNamespaceShort.DAV, \":sync-token\"), {}), _ref4),\n              depth: '1',\n              headers: headers\n            });\n\n          case 8:\n            res = _context14.sent;\n            return _context14.abrupt(\"return\", Promise.all(res.filter(function (r) {\n              var _a, _b;\n\n              return Object.keys((_b = (_a = r.props) === null || _a === void 0 ? void 0 : _a.resourcetype) !== null && _b !== void 0 ? _b : {}).includes('addressbook');\n            }).map(function (rs) {\n              var _a, _b, _c, _d, _e, _f, _g, _h, _j;\n\n              var displayName = (_c = (_b = (_a = rs.props) === null || _a === void 0 ? void 0 : _a.displayname) === null || _b === void 0 ? void 0 : _b._cdata) !== null && _c !== void 0 ? _c : (_d = rs.props) === null || _d === void 0 ? void 0 : _d.displayname;\n              debug$3(\"Found address book named \".concat(typeof displayName === 'string' ? displayName : '', \",\\n             props: \").concat(JSON.stringify(rs.props)));\n              return {\n                url: new URL((_e = rs.href) !== null && _e !== void 0 ? _e : '', (_f = account.rootUrl) !== null && _f !== void 0 ? _f : '').href,\n                ctag: (_g = rs.props) === null || _g === void 0 ? void 0 : _g.getctag,\n                displayName: typeof displayName === 'string' ? displayName : '',\n                resourcetype: Object.keys((_h = rs.props) === null || _h === void 0 ? void 0 : _h.resourcetype),\n                syncToken: (_j = rs.props) === null || _j === void 0 ? void 0 : _j.syncToken\n              };\n            }).map(function (addr) {\n              return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee13() {\n                return _regeneratorRuntime().wrap(function _callee13$(_context13) {\n                  while (1) {\n                    switch (_context13.prev = _context13.next) {\n                      case 0:\n                        _context13.t0 = Object;\n                        _context13.t1 = Object.assign({}, addr);\n                        _context13.next = 4;\n                        return _supportedReportSet({\n                          collection: addr,\n                          headers: headers\n                        });\n\n                      case 4:\n                        _context13.t2 = _context13.sent;\n                        _context13.t3 = {\n                          reports: _context13.t2\n                        };\n                        return _context13.abrupt(\"return\", _context13.t0.assign.call(_context13.t0, _context13.t1, _context13.t3));\n\n                      case 7:\n                      case \"end\":\n                        return _context13.stop();\n                    }\n                  }\n                }, _callee13);\n              }));\n            })));\n\n          case 10:\n          case \"end\":\n            return _context14.stop();\n        }\n      }\n    }, _callee14);\n  }));\n};\n\nexports.fetchAddressBooks = _fetchAddressBooks;\n\nvar _fetchVCards = function fetchVCards(params) {\n  return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee15() {\n    var _props6;\n\n    var addressBook, headers, objectUrls, urlFilter, requiredFields, vcardUrls, vCardResults;\n    return _regeneratorRuntime().wrap(function _callee15$(_context15) {\n      while (1) {\n        switch (_context15.prev = _context15.next) {\n          case 0:\n            addressBook = params.addressBook, headers = params.headers, objectUrls = params.objectUrls, urlFilter = params.urlFilter;\n            debug$3(\"Fetching vcards from \".concat(addressBook === null || addressBook === void 0 ? void 0 : addressBook.url));\n            requiredFields = ['url'];\n\n            if (!(!addressBook || !hasFields(addressBook, requiredFields))) {\n              _context15.next = 7;\n              break;\n            }\n\n            if (addressBook) {\n              _context15.next = 6;\n              break;\n            }\n\n            throw new Error('cannot fetchVCards for undefined addressBook');\n\n          case 6:\n            throw new Error(\"addressBook must have \".concat(findMissingFieldNames(addressBook, requiredFields), \" before fetchVCards\"));\n\n          case 7:\n            if (!(objectUrls !== null && objectUrls !== void 0)) {\n              _context15.next = 11;\n              break;\n            }\n\n            _context15.t0 = objectUrls;\n            _context15.next = 14;\n            break;\n\n          case 11:\n            _context15.next = 13;\n            return _addressBookQuery({\n              url: addressBook.url,\n              props: _defineProperty({}, \"\".concat(DAVNamespaceShort.DAV, \":getetag\"), {}),\n              depth: '1',\n              headers: headers\n            });\n\n          case 13:\n            _context15.t0 = _context15.sent.map(function (res) {\n              var _a;\n\n              return res.ok ? (_a = res.href) !== null && _a !== void 0 ? _a : '' : '';\n            });\n\n          case 14:\n            vcardUrls = _context15.t0.map(function (url) {\n              return url.startsWith('http') || !url ? url : new URL(url, addressBook.url).href;\n            }).filter(urlFilter !== null && urlFilter !== void 0 ? urlFilter : function (url) {\n              return url;\n            }).map(function (url) {\n              return new URL(url).pathname;\n            });\n\n            if (!(vcardUrls.length > 0)) {\n              _context15.next = 21;\n              break;\n            }\n\n            _context15.next = 18;\n            return _addressBookMultiGet({\n              url: addressBook.url,\n              props: (_props6 = {}, _defineProperty(_props6, \"\".concat(DAVNamespaceShort.DAV, \":getetag\"), {}), _defineProperty(_props6, \"\".concat(DAVNamespaceShort.CARDDAV, \":address-data\"), {}), _props6),\n              objectUrls: vcardUrls,\n              depth: '1',\n              headers: headers\n            });\n\n          case 18:\n            _context15.t1 = _context15.sent;\n            _context15.next = 22;\n            break;\n\n          case 21:\n            _context15.t1 = [];\n\n          case 22:\n            vCardResults = _context15.t1;\n            return _context15.abrupt(\"return\", vCardResults.map(function (res) {\n              var _a, _b, _c, _d, _e, _f;\n\n              return {\n                url: new URL((_a = res.href) !== null && _a !== void 0 ? _a : '', addressBook.url).href,\n                etag: (_b = res.props) === null || _b === void 0 ? void 0 : _b.getetag,\n                data: (_e = (_d = (_c = res.props) === null || _c === void 0 ? void 0 : _c.addressData) === null || _d === void 0 ? void 0 : _d._cdata) !== null && _e !== void 0 ? _e : (_f = res.props) === null || _f === void 0 ? void 0 : _f.addressData\n              };\n            }));\n\n          case 24:\n          case \"end\":\n            return _context15.stop();\n        }\n      }\n    }, _callee15);\n  }));\n};\n\nexports.fetchVCards = _fetchVCards;\n\nvar _createVCard = function createVCard(params) {\n  return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee16() {\n    var addressBook, vCardString, filename, headers;\n    return _regeneratorRuntime().wrap(function _callee16$(_context16) {\n      while (1) {\n        switch (_context16.prev = _context16.next) {\n          case 0:\n            addressBook = params.addressBook, vCardString = params.vCardString, filename = params.filename, headers = params.headers;\n            return _context16.abrupt(\"return\", _createObject({\n              url: new URL(filename, addressBook.url).href,\n              data: vCardString,\n              headers: Object.assign({\n                'content-type': 'text/vcard; charset=utf-8',\n                'If-None-Match': '*'\n              }, headers)\n            }));\n\n          case 2:\n          case \"end\":\n            return _context16.stop();\n        }\n      }\n    }, _callee16);\n  }));\n};\n\nexports.createVCard = _createVCard;\n\nvar _updateVCard = function updateVCard(params) {\n  return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee17() {\n    var vCard, headers;\n    return _regeneratorRuntime().wrap(function _callee17$(_context17) {\n      while (1) {\n        switch (_context17.prev = _context17.next) {\n          case 0:\n            vCard = params.vCard, headers = params.headers;\n            return _context17.abrupt(\"return\", _updateObject({\n              url: vCard.url,\n              data: vCard.data,\n              etag: vCard.etag,\n              headers: Object.assign({\n                'content-type': 'text/vcard; charset=utf-8'\n              }, headers)\n            }));\n\n          case 2:\n          case \"end\":\n            return _context17.stop();\n        }\n      }\n    }, _callee17);\n  }));\n};\n\nexports.updateVCard = _updateVCard;\n\nvar _deleteVCard = function deleteVCard(params) {\n  return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee18() {\n    var vCard, headers;\n    return _regeneratorRuntime().wrap(function _callee18$(_context18) {\n      while (1) {\n        switch (_context18.prev = _context18.next) {\n          case 0:\n            vCard = params.vCard, headers = params.headers;\n            return _context18.abrupt(\"return\", _deleteObject({\n              url: vCard.url,\n              etag: vCard.etag,\n              headers: headers\n            }));\n\n          case 2:\n          case \"end\":\n            return _context18.stop();\n        }\n      }\n    }, _callee18);\n  }));\n};\n\nexports.deleteVCard = _deleteVCard;\nvar addressBook = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  addressBookQuery: _addressBookQuery,\n  addressBookMultiGet: _addressBookMultiGet,\n  fetchAddressBooks: _fetchAddressBooks,\n  fetchVCards: _fetchVCards,\n  createVCard: _createVCard,\n  updateVCard: _updateVCard,\n  deleteVCard: _deleteVCard\n});\nvar debug$2 = (0, _debug.default)('tsdav:calendar');\n\nvar _calendarQuery = function calendarQuery(params) {\n  return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee19() {\n    var _cleanupFalsy;\n\n    var url, props, filters, timezone, depth, headers;\n    return _regeneratorRuntime().wrap(function _callee19$(_context19) {\n      while (1) {\n        switch (_context19.prev = _context19.next) {\n          case 0:\n            url = params.url, props = params.props, filters = params.filters, timezone = params.timezone, depth = params.depth, headers = params.headers;\n            return _context19.abrupt(\"return\", _collectionQuery({\n              url: url,\n              body: {\n                'calendar-query': cleanupFalsy((_cleanupFalsy = {\n                  _attributes: getDAVAttribute([DAVNamespace.CALDAV, DAVNamespace.CALENDAR_SERVER, DAVNamespace.CALDAV_APPLE, DAVNamespace.DAV])\n                }, _defineProperty(_cleanupFalsy, \"\".concat(DAVNamespaceShort.DAV, \":prop\"), props), _defineProperty(_cleanupFalsy, \"filter\", filters), _defineProperty(_cleanupFalsy, \"timezone\", timezone), _cleanupFalsy))\n              },\n              defaultNamespace: DAVNamespaceShort.CALDAV,\n              depth: depth,\n              headers: headers\n            }));\n\n          case 2:\n          case \"end\":\n            return _context19.stop();\n        }\n      }\n    }, _callee19);\n  }));\n};\n\nexports.calendarQuery = _calendarQuery;\n\nvar _calendarMultiGet = function calendarMultiGet(params) {\n  return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee20() {\n    var _calendarMultiget;\n\n    var url, props, objectUrls, filters, timezone, depth, headers;\n    return _regeneratorRuntime().wrap(function _callee20$(_context20) {\n      while (1) {\n        switch (_context20.prev = _context20.next) {\n          case 0:\n            url = params.url, props = params.props, objectUrls = params.objectUrls, filters = params.filters, timezone = params.timezone, depth = params.depth, headers = params.headers;\n            return _context20.abrupt(\"return\", _collectionQuery({\n              url: url,\n              body: {\n                'calendar-multiget': (_calendarMultiget = {\n                  _attributes: getDAVAttribute([DAVNamespace.DAV, DAVNamespace.CALDAV])\n                }, _defineProperty(_calendarMultiget, \"\".concat(DAVNamespaceShort.DAV, \":prop\"), props), _defineProperty(_calendarMultiget, \"\".concat(DAVNamespaceShort.DAV, \":href\"), objectUrls), _defineProperty(_calendarMultiget, \"filter\", filters), _defineProperty(_calendarMultiget, \"timezone\", timezone), _calendarMultiget)\n              },\n              defaultNamespace: DAVNamespaceShort.CALDAV,\n              depth: depth,\n              headers: headers\n            }));\n\n          case 2:\n          case \"end\":\n            return _context20.stop();\n        }\n      }\n    }, _callee20);\n  }));\n};\n\nexports.calendarMultiGet = _calendarMultiGet;\n\nvar _makeCalendar = function makeCalendar(params) {\n  return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee21() {\n    var url, props, depth, headers;\n    return _regeneratorRuntime().wrap(function _callee21$(_context21) {\n      while (1) {\n        switch (_context21.prev = _context21.next) {\n          case 0:\n            url = params.url, props = params.props, depth = params.depth, headers = params.headers;\n            return _context21.abrupt(\"return\", _davRequest({\n              url: url,\n              init: {\n                method: 'MKCALENDAR',\n                headers: cleanupFalsy(Object.assign({\n                  depth: depth\n                }, headers)),\n                namespace: DAVNamespaceShort.DAV,\n                body: _defineProperty({}, \"\".concat(DAVNamespaceShort.CALDAV, \":mkcalendar\"), {\n                  _attributes: getDAVAttribute([DAVNamespace.DAV, DAVNamespace.CALDAV, DAVNamespace.CALDAV_APPLE]),\n                  set: {\n                    prop: props\n                  }\n                })\n              }\n            }));\n\n          case 2:\n          case \"end\":\n            return _context21.stop();\n        }\n      }\n    }, _callee21);\n  }));\n};\n\nexports.makeCalendar = _makeCalendar;\n\nvar _fetchCalendars = function fetchCalendars(params) {\n  return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee23() {\n    var _ref6;\n\n    var _ref5, headers, account, customProps, requiredFields, res;\n\n    return _regeneratorRuntime().wrap(function _callee23$(_context23) {\n      while (1) {\n        switch (_context23.prev = _context23.next) {\n          case 0:\n            _ref5 = params !== null && params !== void 0 ? params : {}, headers = _ref5.headers, account = _ref5.account, customProps = _ref5.props;\n            requiredFields = ['homeUrl', 'rootUrl'];\n\n            if (!(!account || !hasFields(account, requiredFields))) {\n              _context23.next = 6;\n              break;\n            }\n\n            if (account) {\n              _context23.next = 5;\n              break;\n            }\n\n            throw new Error('no account for fetchCalendars');\n\n          case 5:\n            throw new Error(\"account must have \".concat(findMissingFieldNames(account, requiredFields), \" before fetchCalendars\"));\n\n          case 6:\n            _context23.next = 8;\n            return _propfind({\n              url: account.homeUrl,\n              props: customProps !== null && customProps !== void 0 ? customProps : (_ref6 = {}, _defineProperty(_ref6, \"\".concat(DAVNamespaceShort.CALDAV, \":calendar-description\"), {}), _defineProperty(_ref6, \"\".concat(DAVNamespaceShort.CALDAV, \":calendar-timezone\"), {}), _defineProperty(_ref6, \"\".concat(DAVNamespaceShort.DAV, \":displayname\"), {}), _defineProperty(_ref6, \"\".concat(DAVNamespaceShort.CALDAV_APPLE, \":calendar-color\"), {}), _defineProperty(_ref6, \"\".concat(DAVNamespaceShort.CALENDAR_SERVER, \":getctag\"), {}), _defineProperty(_ref6, \"\".concat(DAVNamespaceShort.DAV, \":resourcetype\"), {}), _defineProperty(_ref6, \"\".concat(DAVNamespaceShort.CALDAV, \":supported-calendar-component-set\"), {}), _defineProperty(_ref6, \"\".concat(DAVNamespaceShort.DAV, \":sync-token\"), {}), _ref6),\n              depth: '1',\n              headers: headers\n            });\n\n          case 8:\n            res = _context23.sent;\n            return _context23.abrupt(\"return\", Promise.all(res.filter(function (r) {\n              var _a, _b;\n\n              return Object.keys((_b = (_a = r.props) === null || _a === void 0 ? void 0 : _a.resourcetype) !== null && _b !== void 0 ? _b : {}).includes('calendar');\n            }).filter(function (rc) {\n              var _a, _b, _c; // filter out none iCal format calendars.\n\n\n              var components = Array.isArray((_a = rc.props) === null || _a === void 0 ? void 0 : _a.supportedCalendarComponentSet.comp) ? (_b = rc.props) === null || _b === void 0 ? void 0 : _b.supportedCalendarComponentSet.comp.map(function (sc) {\n                return sc._attributes.name;\n              }) : [(_c = rc.props) === null || _c === void 0 ? void 0 : _c.supportedCalendarComponentSet.comp._attributes.name] || [];\n              return components.some(function (c) {\n                return Object.values(ICALObjects).includes(c);\n              });\n            }).map(function (rs) {\n              var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p; // debug(`Found calendar ${rs.props?.displayname}`);\n\n\n              var description = (_a = rs.props) === null || _a === void 0 ? void 0 : _a.calendarDescription;\n              var timezone = (_b = rs.props) === null || _b === void 0 ? void 0 : _b.calendarTimezone;\n              return {\n                description: typeof description === 'string' ? description : '',\n                timezone: typeof timezone === 'string' ? timezone : '',\n                url: new URL((_c = rs.href) !== null && _c !== void 0 ? _c : '', (_d = account.rootUrl) !== null && _d !== void 0 ? _d : '').href,\n                ctag: (_e = rs.props) === null || _e === void 0 ? void 0 : _e.getctag,\n                calendarColor: (_f = rs.props) === null || _f === void 0 ? void 0 : _f.calendarColor,\n                displayName: (_h = (_g = rs.props) === null || _g === void 0 ? void 0 : _g.displayname._cdata) !== null && _h !== void 0 ? _h : (_j = rs.props) === null || _j === void 0 ? void 0 : _j.displayname,\n                components: Array.isArray((_k = rs.props) === null || _k === void 0 ? void 0 : _k.supportedCalendarComponentSet.comp) ? (_l = rs.props) === null || _l === void 0 ? void 0 : _l.supportedCalendarComponentSet.comp.map(function (sc) {\n                  return sc._attributes.name;\n                }) : [(_m = rs.props) === null || _m === void 0 ? void 0 : _m.supportedCalendarComponentSet.comp._attributes.name],\n                resourcetype: Object.keys((_o = rs.props) === null || _o === void 0 ? void 0 : _o.resourcetype),\n                syncToken: (_p = rs.props) === null || _p === void 0 ? void 0 : _p.syncToken\n              };\n            }).map(function (cal) {\n              return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee22() {\n                return _regeneratorRuntime().wrap(function _callee22$(_context22) {\n                  while (1) {\n                    switch (_context22.prev = _context22.next) {\n                      case 0:\n                        _context22.t0 = Object;\n                        _context22.t1 = Object.assign({}, cal);\n                        _context22.next = 4;\n                        return _supportedReportSet({\n                          collection: cal,\n                          headers: headers\n                        });\n\n                      case 4:\n                        _context22.t2 = _context22.sent;\n                        _context22.t3 = {\n                          reports: _context22.t2\n                        };\n                        return _context22.abrupt(\"return\", _context22.t0.assign.call(_context22.t0, _context22.t1, _context22.t3));\n\n                      case 7:\n                      case \"end\":\n                        return _context22.stop();\n                    }\n                  }\n                }, _callee22);\n              }));\n            })));\n\n          case 10:\n          case \"end\":\n            return _context23.stop();\n        }\n      }\n    }, _callee23);\n  }));\n};\n\nexports.fetchCalendars = _fetchCalendars;\n\nvar _fetchCalendarObjects = function fetchCalendarObjects(params) {\n  return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee24() {\n    var _props8;\n\n    var calendar, objectUrls, customFilters, timeRange, headers, expand, urlFilter, ISO_8601, ISO_8601_FULL, requiredFields, filters, calendarObjectUrls, calendarObjectResults;\n    return _regeneratorRuntime().wrap(function _callee24$(_context24) {\n      while (1) {\n        switch (_context24.prev = _context24.next) {\n          case 0:\n            calendar = params.calendar, objectUrls = params.objectUrls, customFilters = params.filters, timeRange = params.timeRange, headers = params.headers, expand = params.expand, urlFilter = params.urlFilter;\n\n            if (!timeRange) {\n              _context24.next = 6;\n              break;\n            }\n\n            // validate timeRange\n            ISO_8601 = /^\\d{4}(-\\d\\d(-\\d\\d(T\\d\\d:\\d\\d(:\\d\\d)?(\\.\\d+)?(([+-]\\d\\d:\\d\\d)|Z)?)?)?)?$/i;\n            ISO_8601_FULL = /^\\d{4}-\\d\\d-\\d\\dT\\d\\d:\\d\\d:\\d\\d(\\.\\d+)?(([+-]\\d\\d:\\d\\d)|Z)?$/i;\n\n            if (!((!ISO_8601.test(timeRange.start) || !ISO_8601.test(timeRange.end)) && (!ISO_8601_FULL.test(timeRange.start) || !ISO_8601_FULL.test(timeRange.end)))) {\n              _context24.next = 6;\n              break;\n            }\n\n            throw new Error('invalid timeRange format, not in ISO8601');\n\n          case 6:\n            debug$2(\"Fetching calendar objects from \".concat(calendar === null || calendar === void 0 ? void 0 : calendar.url));\n            requiredFields = ['url'];\n\n            if (!(!calendar || !hasFields(calendar, requiredFields))) {\n              _context24.next = 12;\n              break;\n            }\n\n            if (calendar) {\n              _context24.next = 11;\n              break;\n            }\n\n            throw new Error('cannot fetchCalendarObjects for undefined calendar');\n\n          case 11:\n            throw new Error(\"calendar must have \".concat(findMissingFieldNames(calendar, requiredFields), \" before fetchCalendarObjects\"));\n\n          case 12:\n            // default to fetch all\n            filters = customFilters !== null && customFilters !== void 0 ? customFilters : [{\n              'comp-filter': {\n                _attributes: {\n                  name: 'VCALENDAR'\n                },\n                'comp-filter': Object.assign({\n                  _attributes: {\n                    name: 'VEVENT'\n                  }\n                }, timeRange ? {\n                  'time-range': {\n                    _attributes: {\n                      start: \"\".concat(new Date(timeRange.start).toISOString().slice(0, 19).replace(/[-:.]/g, ''), \"Z\"),\n                      end: \"\".concat(new Date(timeRange.end).toISOString().slice(0, 19).replace(/[-:.]/g, ''), \"Z\")\n                    }\n                  }\n                } : {})\n              }\n            }];\n\n            if (!(objectUrls !== null && objectUrls !== void 0)) {\n              _context24.next = 17;\n              break;\n            }\n\n            _context24.t0 = objectUrls;\n            _context24.next = 20;\n            break;\n\n          case 17:\n            _context24.next = 19;\n            return _calendarQuery({\n              url: calendar.url,\n              props: _defineProperty({}, \"\".concat(DAVNamespaceShort.DAV, \":getetag\"), {}),\n              filters: filters,\n              depth: '1',\n              headers: headers\n            });\n\n          case 19:\n            _context24.t0 = _context24.sent.map(function (res) {\n              var _a;\n\n              return (_a = res.href) !== null && _a !== void 0 ? _a : '';\n            });\n\n          case 20:\n            calendarObjectUrls = _context24.t0.map(function (url) {\n              return url.startsWith('http') || !url ? url : new URL(url, calendar.url).href;\n            }).filter(urlFilter !== null && urlFilter !== void 0 ? urlFilter : function (url) {\n              return Boolean(url === null || url === void 0 ? void 0 : url.includes('.ics'));\n            }).map(function (url) {\n              return new URL(url).pathname;\n            });\n\n            if (!(calendarObjectUrls.length > 0)) {\n              _context24.next = 27;\n              break;\n            }\n\n            _context24.next = 24;\n            return _calendarMultiGet({\n              url: calendar.url,\n              props: (_props8 = {}, _defineProperty(_props8, \"\".concat(DAVNamespaceShort.DAV, \":getetag\"), {}), _defineProperty(_props8, \"\".concat(DAVNamespaceShort.CALDAV, \":calendar-data\"), Object.assign({}, expand && timeRange ? _defineProperty({}, \"\".concat(DAVNamespaceShort.CALDAV, \":expand\"), {\n                _attributes: {\n                  start: \"\".concat(new Date(timeRange.start).toISOString().slice(0, 19).replace(/[-:.]/g, ''), \"Z\"),\n                  end: \"\".concat(new Date(timeRange.end).toISOString().slice(0, 19).replace(/[-:.]/g, ''), \"Z\")\n                }\n              }) : {})), _props8),\n              objectUrls: calendarObjectUrls,\n              depth: '1',\n              headers: headers\n            });\n\n          case 24:\n            _context24.t1 = _context24.sent;\n            _context24.next = 28;\n            break;\n\n          case 27:\n            _context24.t1 = [];\n\n          case 28:\n            calendarObjectResults = _context24.t1;\n            return _context24.abrupt(\"return\", calendarObjectResults.map(function (res) {\n              var _a, _b, _c, _d, _e, _f;\n\n              return {\n                url: new URL((_a = res.href) !== null && _a !== void 0 ? _a : '', calendar.url).href,\n                etag: \"\".concat((_b = res.props) === null || _b === void 0 ? void 0 : _b.getetag),\n                data: (_e = (_d = (_c = res.props) === null || _c === void 0 ? void 0 : _c.calendarData) === null || _d === void 0 ? void 0 : _d._cdata) !== null && _e !== void 0 ? _e : (_f = res.props) === null || _f === void 0 ? void 0 : _f.calendarData\n              };\n            }));\n\n          case 30:\n          case \"end\":\n            return _context24.stop();\n        }\n      }\n    }, _callee24);\n  }));\n};\n\nexports.fetchCalendarObjects = _fetchCalendarObjects;\n\nvar _createCalendarObject = function createCalendarObject(params) {\n  return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee25() {\n    var calendar, iCalString, filename, headers;\n    return _regeneratorRuntime().wrap(function _callee25$(_context25) {\n      while (1) {\n        switch (_context25.prev = _context25.next) {\n          case 0:\n            calendar = params.calendar, iCalString = params.iCalString, filename = params.filename, headers = params.headers;\n            return _context25.abrupt(\"return\", _createObject({\n              url: new URL(filename, calendar.url).href,\n              data: iCalString,\n              headers: Object.assign({\n                'content-type': 'text/calendar; charset=utf-8',\n                'If-None-Match': '*'\n              }, headers)\n            }));\n\n          case 2:\n          case \"end\":\n            return _context25.stop();\n        }\n      }\n    }, _callee25);\n  }));\n};\n\nexports.createCalendarObject = _createCalendarObject;\n\nvar _updateCalendarObject = function updateCalendarObject(params) {\n  return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee26() {\n    var calendarObject, headers;\n    return _regeneratorRuntime().wrap(function _callee26$(_context26) {\n      while (1) {\n        switch (_context26.prev = _context26.next) {\n          case 0:\n            calendarObject = params.calendarObject, headers = params.headers;\n            return _context26.abrupt(\"return\", _updateObject({\n              url: calendarObject.url,\n              data: calendarObject.data,\n              etag: calendarObject.etag,\n              headers: Object.assign({\n                'content-type': 'text/calendar; charset=utf-8'\n              }, headers)\n            }));\n\n          case 2:\n          case \"end\":\n            return _context26.stop();\n        }\n      }\n    }, _callee26);\n  }));\n};\n\nexports.updateCalendarObject = _updateCalendarObject;\n\nvar _deleteCalendarObject = function deleteCalendarObject(params) {\n  return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee27() {\n    var calendarObject, headers;\n    return _regeneratorRuntime().wrap(function _callee27$(_context27) {\n      while (1) {\n        switch (_context27.prev = _context27.next) {\n          case 0:\n            calendarObject = params.calendarObject, headers = params.headers;\n            return _context27.abrupt(\"return\", _deleteObject({\n              url: calendarObject.url,\n              etag: calendarObject.etag,\n              headers: headers\n            }));\n\n          case 2:\n          case \"end\":\n            return _context27.stop();\n        }\n      }\n    }, _callee27);\n  }));\n};\n/**\n * Sync remote calendars to local\n */\n\n\nexports.deleteCalendarObject = _deleteCalendarObject;\n\nvar _syncCalendars = function syncCalendars(params) {\n  return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee29() {\n    var _a, oldCalendars, account, detailedResult, headers, localCalendars, remoteCalendars, created, updated, updatedWithObjects, deleted, unchanged;\n\n    return _regeneratorRuntime().wrap(function _callee29$(_context29) {\n      while (1) {\n        switch (_context29.prev = _context29.next) {\n          case 0:\n            oldCalendars = params.oldCalendars, account = params.account, detailedResult = params.detailedResult, headers = params.headers;\n\n            if (account) {\n              _context29.next = 3;\n              break;\n            }\n\n            throw new Error('Must have account before syncCalendars');\n\n          case 3:\n            localCalendars = (_a = oldCalendars !== null && oldCalendars !== void 0 ? oldCalendars : account.calendars) !== null && _a !== void 0 ? _a : [];\n            _context29.next = 6;\n            return _fetchCalendars({\n              account: account,\n              headers: headers\n            });\n\n          case 6:\n            remoteCalendars = _context29.sent;\n            // no existing url\n            created = remoteCalendars.filter(function (rc) {\n              return localCalendars.every(function (lc) {\n                return !urlContains(lc.url, rc.url);\n              });\n            });\n            debug$2(\"new calendars: \".concat(created.map(function (cc) {\n              return cc.displayName;\n            }))); // have same url, but syncToken/ctag different\n\n            updated = localCalendars.reduce(function (prev, curr) {\n              var found = remoteCalendars.find(function (rc) {\n                return urlContains(rc.url, curr.url);\n              });\n\n              if (found && (found.syncToken && found.syncToken !== curr.syncToken || found.ctag && found.ctag !== curr.ctag)) {\n                return [].concat(_toConsumableArray(prev), [found]);\n              }\n\n              return prev;\n            }, []);\n            debug$2(\"updated calendars: \".concat(updated.map(function (cc) {\n              return cc.displayName;\n            })));\n            _context29.next = 13;\n            return Promise.all(updated.map(function (u) {\n              return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee28() {\n                var result;\n                return _regeneratorRuntime().wrap(function _callee28$(_context28) {\n                  while (1) {\n                    switch (_context28.prev = _context28.next) {\n                      case 0:\n                        _context28.next = 2;\n                        return _smartCollectionSync({\n                          collection: Object.assign(Object.assign({}, u), {\n                            objectMultiGet: _calendarMultiGet\n                          }),\n                          method: 'webdav',\n                          headers: headers,\n                          account: account\n                        });\n\n                      case 2:\n                        result = _context28.sent;\n                        return _context28.abrupt(\"return\", result);\n\n                      case 4:\n                      case \"end\":\n                        return _context28.stop();\n                    }\n                  }\n                }, _callee28);\n              }));\n            }));\n\n          case 13:\n            updatedWithObjects = _context29.sent;\n            // does not present in remote\n            deleted = localCalendars.filter(function (cal) {\n              return remoteCalendars.every(function (rc) {\n                return !urlContains(rc.url, cal.url);\n              });\n            });\n            debug$2(\"deleted calendars: \".concat(deleted.map(function (cc) {\n              return cc.displayName;\n            })));\n            unchanged = localCalendars.filter(function (cal) {\n              return remoteCalendars.some(function (rc) {\n                return urlContains(rc.url, cal.url) && (rc.syncToken && rc.syncToken !== cal.syncToken || rc.ctag && rc.ctag !== cal.ctag);\n              });\n            }); // debug(`unchanged calendars: ${unchanged.map((cc) => cc.displayName)}`);\n\n            return _context29.abrupt(\"return\", detailedResult ? {\n              created: created,\n              updated: updated,\n              deleted: deleted\n            } : [].concat(_toConsumableArray(unchanged), _toConsumableArray(created), _toConsumableArray(updatedWithObjects)));\n\n          case 18:\n          case \"end\":\n            return _context29.stop();\n        }\n      }\n    }, _callee29);\n  }));\n};\n\nexports.syncCalendars = _syncCalendars;\n\nvar freeBusyQuery = function freeBusyQuery(params) {\n  return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee30() {\n    var url, timeRange, depth, headers, ISO_8601, ISO_8601_FULL, result;\n    return _regeneratorRuntime().wrap(function _callee30$(_context30) {\n      while (1) {\n        switch (_context30.prev = _context30.next) {\n          case 0:\n            url = params.url, timeRange = params.timeRange, depth = params.depth, headers = params.headers;\n\n            if (!timeRange) {\n              _context30.next = 8;\n              break;\n            }\n\n            // validate timeRange\n            ISO_8601 = /^\\d{4}(-\\d\\d(-\\d\\d(T\\d\\d:\\d\\d(:\\d\\d)?(\\.\\d+)?(([+-]\\d\\d:\\d\\d)|Z)?)?)?)?$/i;\n            ISO_8601_FULL = /^\\d{4}-\\d\\d-\\d\\dT\\d\\d:\\d\\d:\\d\\d(\\.\\d+)?(([+-]\\d\\d:\\d\\d)|Z)?$/i;\n\n            if (!((!ISO_8601.test(timeRange.start) || !ISO_8601.test(timeRange.end)) && (!ISO_8601_FULL.test(timeRange.start) || !ISO_8601_FULL.test(timeRange.end)))) {\n              _context30.next = 6;\n              break;\n            }\n\n            throw new Error('invalid timeRange format, not in ISO8601');\n\n          case 6:\n            _context30.next = 9;\n            break;\n\n          case 8:\n            throw new Error('timeRange is required');\n\n          case 9:\n            _context30.next = 11;\n            return _collectionQuery({\n              url: url,\n              body: {\n                'free-busy-query': cleanupFalsy(_defineProperty({\n                  _attributes: getDAVAttribute([DAVNamespace.CALDAV])\n                }, \"\".concat(DAVNamespaceShort.CALDAV, \":time-range\"), {\n                  _attributes: {\n                    start: \"\".concat(new Date(timeRange.start).toISOString().slice(0, 19).replace(/[-:.]/g, ''), \"Z\"),\n                    end: \"\".concat(new Date(timeRange.end).toISOString().slice(0, 19).replace(/[-:.]/g, ''), \"Z\")\n                  }\n                }))\n              },\n              defaultNamespace: DAVNamespaceShort.CALDAV,\n              depth: depth,\n              headers: headers\n            });\n\n          case 11:\n            result = _context30.sent;\n            return _context30.abrupt(\"return\", result[0]);\n\n          case 13:\n          case \"end\":\n            return _context30.stop();\n        }\n      }\n    }, _callee30);\n  }));\n};\n\nexports.freeBusyQuery = freeBusyQuery;\nvar calendar = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  calendarQuery: _calendarQuery,\n  calendarMultiGet: _calendarMultiGet,\n  makeCalendar: _makeCalendar,\n  fetchCalendars: _fetchCalendars,\n  fetchCalendarObjects: _fetchCalendarObjects,\n  createCalendarObject: _createCalendarObject,\n  updateCalendarObject: _updateCalendarObject,\n  deleteCalendarObject: _deleteCalendarObject,\n  syncCalendars: _syncCalendars,\n  freeBusyQuery: freeBusyQuery\n});\nvar debug$1 = (0, _debug.default)('tsdav:account');\n\nvar serviceDiscovery = function serviceDiscovery(params) {\n  return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee31() {\n    var _a, _b, account, headers, endpoint, uri, response, location, serviceURL;\n\n    return _regeneratorRuntime().wrap(function _callee31$(_context31) {\n      while (1) {\n        switch (_context31.prev = _context31.next) {\n          case 0:\n            debug$1('Service discovery...');\n            account = params.account, headers = params.headers;\n            endpoint = new URL(account.serverUrl);\n            uri = new URL(\"/.well-known/\".concat(account.accountType), endpoint);\n            uri.protocol = (_a = endpoint.protocol) !== null && _a !== void 0 ? _a : 'http';\n            _context31.prev = 5;\n            _context31.next = 8;\n            return (0, _crossFetch.fetch)(uri.href, {\n              headers: headers,\n              method: 'PROPFIND',\n              redirect: 'manual'\n            });\n\n          case 8:\n            response = _context31.sent;\n\n            if (!(response.status >= 300 && response.status < 400)) {\n              _context31.next = 17;\n              break;\n            }\n\n            // http redirect.\n            location = response.headers.get('Location');\n\n            if (!(typeof location === 'string' && location.length)) {\n              _context31.next = 17;\n              break;\n            }\n\n            debug$1(\"Service discovery redirected to \".concat(location));\n            serviceURL = new URL(location, endpoint);\n\n            if (serviceURL.hostname === uri.hostname && uri.port && !serviceURL.port) {\n              serviceURL.port = uri.port;\n            }\n\n            serviceURL.protocol = (_b = endpoint.protocol) !== null && _b !== void 0 ? _b : 'http';\n            return _context31.abrupt(\"return\", serviceURL.href);\n\n          case 17:\n            _context31.next = 22;\n            break;\n\n          case 19:\n            _context31.prev = 19;\n            _context31.t0 = _context31[\"catch\"](5);\n            debug$1(\"Service discovery failed: \".concat(_context31.t0.stack));\n\n          case 22:\n            return _context31.abrupt(\"return\", endpoint.href);\n\n          case 23:\n          case \"end\":\n            return _context31.stop();\n        }\n      }\n    }, _callee31, null, [[5, 19]]);\n  }));\n};\n\nvar fetchPrincipalUrl = function fetchPrincipalUrl(params) {\n  return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee32() {\n    var _c, _d, _e, _f, _g, account, headers, requiredFields, _yield$propfind, _yield$propfind2, response;\n\n    return _regeneratorRuntime().wrap(function _callee32$(_context32) {\n      while (1) {\n        switch (_context32.prev = _context32.next) {\n          case 0:\n            account = params.account, headers = params.headers;\n            requiredFields = ['rootUrl'];\n\n            if (hasFields(account, requiredFields)) {\n              _context32.next = 4;\n              break;\n            }\n\n            throw new Error(\"account must have \".concat(findMissingFieldNames(account, requiredFields), \" before fetchPrincipalUrl\"));\n\n          case 4:\n            debug$1(\"Fetching principal url from path \".concat(account.rootUrl));\n            _context32.next = 7;\n            return _propfind({\n              url: account.rootUrl,\n              props: _defineProperty({}, \"\".concat(DAVNamespaceShort.DAV, \":current-user-principal\"), {}),\n              depth: '0',\n              headers: headers\n            });\n\n          case 7:\n            _yield$propfind = _context32.sent;\n            _yield$propfind2 = _slicedToArray(_yield$propfind, 1);\n            response = _yield$propfind2[0];\n\n            if (response.ok) {\n              _context32.next = 14;\n              break;\n            }\n\n            debug$1(\"Fetch principal url failed: \".concat(response.statusText));\n\n            if (!(response.status === 401)) {\n              _context32.next = 14;\n              break;\n            }\n\n            throw new Error('Invalid credentials');\n\n          case 14:\n            debug$1(\"Fetched principal url \".concat((_d = (_c = response.props) === null || _c === void 0 ? void 0 : _c.currentUserPrincipal) === null || _d === void 0 ? void 0 : _d.href));\n            return _context32.abrupt(\"return\", new URL((_g = (_f = (_e = response.props) === null || _e === void 0 ? void 0 : _e.currentUserPrincipal) === null || _f === void 0 ? void 0 : _f.href) !== null && _g !== void 0 ? _g : '', account.rootUrl).href);\n\n          case 16:\n          case \"end\":\n            return _context32.stop();\n        }\n      }\n    }, _callee32);\n  }));\n};\n\nvar fetchHomeUrl = function fetchHomeUrl(params) {\n  return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee33() {\n    var _h, _j, account, headers, requiredFields, responses, matched, result;\n\n    return _regeneratorRuntime().wrap(function _callee33$(_context33) {\n      while (1) {\n        switch (_context33.prev = _context33.next) {\n          case 0:\n            account = params.account, headers = params.headers;\n            requiredFields = ['principalUrl', 'rootUrl'];\n\n            if (hasFields(account, requiredFields)) {\n              _context33.next = 4;\n              break;\n            }\n\n            throw new Error(\"account must have \".concat(findMissingFieldNames(account, requiredFields), \" before fetchHomeUrl\"));\n\n          case 4:\n            debug$1(\"Fetch home url from \".concat(account.principalUrl));\n            _context33.next = 7;\n            return _propfind({\n              url: account.principalUrl,\n              props: account.accountType === 'caldav' ? _defineProperty({}, \"\".concat(DAVNamespaceShort.CALDAV, \":calendar-home-set\"), {}) : _defineProperty({}, \"\".concat(DAVNamespaceShort.CARDDAV, \":addressbook-home-set\"), {}),\n              depth: '0',\n              headers: headers\n            });\n\n          case 7:\n            responses = _context33.sent;\n            matched = responses.find(function (r) {\n              return urlContains(account.principalUrl, r.href);\n            });\n\n            if (!(!matched || !matched.ok)) {\n              _context33.next = 11;\n              break;\n            }\n\n            throw new Error('cannot find homeUrl');\n\n          case 11:\n            result = new URL(account.accountType === 'caldav' ? (_h = matched === null || matched === void 0 ? void 0 : matched.props) === null || _h === void 0 ? void 0 : _h.calendarHomeSet.href : (_j = matched === null || matched === void 0 ? void 0 : matched.props) === null || _j === void 0 ? void 0 : _j.addressbookHomeSet.href, account.rootUrl).href;\n            debug$1(\"Fetched home url \".concat(result));\n            return _context33.abrupt(\"return\", result);\n\n          case 14:\n          case \"end\":\n            return _context33.stop();\n        }\n      }\n    }, _callee33);\n  }));\n};\n\nvar _createAccount = function createAccount(params) {\n  return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee36() {\n    var account, headers, _params$loadCollectio, loadCollections, _params$loadObjects, loadObjects, newAccount;\n\n    return _regeneratorRuntime().wrap(function _callee36$(_context36) {\n      while (1) {\n        switch (_context36.prev = _context36.next) {\n          case 0:\n            account = params.account, headers = params.headers, _params$loadCollectio = params.loadCollections, loadCollections = _params$loadCollectio === void 0 ? false : _params$loadCollectio, _params$loadObjects = params.loadObjects, loadObjects = _params$loadObjects === void 0 ? false : _params$loadObjects;\n            newAccount = Object.assign({}, account);\n            _context36.next = 4;\n            return serviceDiscovery({\n              account: account,\n              headers: headers\n            });\n\n          case 4:\n            newAccount.rootUrl = _context36.sent;\n            _context36.next = 7;\n            return fetchPrincipalUrl({\n              account: newAccount,\n              headers: headers\n            });\n\n          case 7:\n            newAccount.principalUrl = _context36.sent;\n            _context36.next = 10;\n            return fetchHomeUrl({\n              account: newAccount,\n              headers: headers\n            });\n\n          case 10:\n            newAccount.homeUrl = _context36.sent;\n\n            if (!(loadCollections || loadObjects)) {\n              _context36.next = 22;\n              break;\n            }\n\n            if (!(account.accountType === 'caldav')) {\n              _context36.next = 18;\n              break;\n            }\n\n            _context36.next = 15;\n            return _fetchCalendars({\n              headers: headers,\n              account: newAccount\n            });\n\n          case 15:\n            newAccount.calendars = _context36.sent;\n            _context36.next = 22;\n            break;\n\n          case 18:\n            if (!(account.accountType === 'carddav')) {\n              _context36.next = 22;\n              break;\n            }\n\n            _context36.next = 21;\n            return _fetchAddressBooks({\n              headers: headers,\n              account: newAccount\n            });\n\n          case 21:\n            newAccount.addressBooks = _context36.sent;\n\n          case 22:\n            if (!loadObjects) {\n              _context36.next = 33;\n              break;\n            }\n\n            if (!(account.accountType === 'caldav' && newAccount.calendars)) {\n              _context36.next = 29;\n              break;\n            }\n\n            _context36.next = 26;\n            return Promise.all(newAccount.calendars.map(function (cal) {\n              return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee34() {\n                return _regeneratorRuntime().wrap(function _callee34$(_context34) {\n                  while (1) {\n                    switch (_context34.prev = _context34.next) {\n                      case 0:\n                        _context34.t0 = Object;\n                        _context34.t1 = Object.assign({}, cal);\n                        _context34.next = 4;\n                        return _fetchCalendarObjects({\n                          calendar: cal,\n                          headers: headers\n                        });\n\n                      case 4:\n                        _context34.t2 = _context34.sent;\n                        _context34.t3 = {\n                          objects: _context34.t2\n                        };\n                        return _context34.abrupt(\"return\", _context34.t0.assign.call(_context34.t0, _context34.t1, _context34.t3));\n\n                      case 7:\n                      case \"end\":\n                        return _context34.stop();\n                    }\n                  }\n                }, _callee34);\n              }));\n            }));\n\n          case 26:\n            newAccount.calendars = _context36.sent;\n            _context36.next = 33;\n            break;\n\n          case 29:\n            if (!(account.accountType === 'carddav' && newAccount.addressBooks)) {\n              _context36.next = 33;\n              break;\n            }\n\n            _context36.next = 32;\n            return Promise.all(newAccount.addressBooks.map(function (addr) {\n              return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee35() {\n                return _regeneratorRuntime().wrap(function _callee35$(_context35) {\n                  while (1) {\n                    switch (_context35.prev = _context35.next) {\n                      case 0:\n                        _context35.t0 = Object;\n                        _context35.t1 = Object.assign({}, addr);\n                        _context35.next = 4;\n                        return _fetchVCards({\n                          addressBook: addr,\n                          headers: headers\n                        });\n\n                      case 4:\n                        _context35.t2 = _context35.sent;\n                        _context35.t3 = {\n                          objects: _context35.t2\n                        };\n                        return _context35.abrupt(\"return\", _context35.t0.assign.call(_context35.t0, _context35.t1, _context35.t3));\n\n                      case 7:\n                      case \"end\":\n                        return _context35.stop();\n                    }\n                  }\n                }, _callee35);\n              }));\n            }));\n\n          case 32:\n            newAccount.addressBooks = _context36.sent;\n\n          case 33:\n            return _context36.abrupt(\"return\", newAccount);\n\n          case 34:\n          case \"end\":\n            return _context36.stop();\n        }\n      }\n    }, _callee36);\n  }));\n};\n\nexports.createAccount = _createAccount;\nvar account = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  serviceDiscovery: serviceDiscovery,\n  fetchPrincipalUrl: fetchPrincipalUrl,\n  fetchHomeUrl: fetchHomeUrl,\n  createAccount: _createAccount\n});\nvar debug = (0, _debug.default)('tsdav:authHelper');\n/**\n * Provide given params as default params to given function with optional params.\n *\n * suitable only for one param functions\n * params are shallow merged\n */\n\nvar defaultParam = function defaultParam(fn, params) {\n  return function () {\n    return fn(Object.assign(Object.assign({}, params), arguments.length <= 0 ? undefined : arguments[0]));\n  };\n};\n\nvar getBasicAuthHeaders = function getBasicAuthHeaders(credentials) {\n  debug(\"Basic auth token generated: \".concat((0, _base.encode)(\"\".concat(credentials.username, \":\").concat(credentials.password))));\n  return {\n    authorization: \"Basic \".concat((0, _base.encode)(\"\".concat(credentials.username, \":\").concat(credentials.password)))\n  };\n};\n\nexports.getBasicAuthHeaders = getBasicAuthHeaders;\n\nvar fetchOauthTokens = function fetchOauthTokens(credentials) {\n  return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee37() {\n    var requireFields, param, response, tokens;\n    return _regeneratorRuntime().wrap(function _callee37$(_context37) {\n      while (1) {\n        switch (_context37.prev = _context37.next) {\n          case 0:\n            requireFields = ['authorizationCode', 'redirectUrl', 'clientId', 'clientSecret', 'tokenUrl'];\n\n            if (hasFields(credentials, requireFields)) {\n              _context37.next = 3;\n              break;\n            }\n\n            throw new Error(\"Oauth credentials missing: \".concat(findMissingFieldNames(credentials, requireFields)));\n\n          case 3:\n            param = new URLSearchParams({\n              grant_type: 'authorization_code',\n              code: credentials.authorizationCode,\n              redirect_uri: credentials.redirectUrl,\n              client_id: credentials.clientId,\n              client_secret: credentials.clientSecret\n            });\n            debug(credentials.tokenUrl);\n            debug(param.toString());\n            _context37.next = 8;\n            return (0, _crossFetch.fetch)(credentials.tokenUrl, {\n              method: 'POST',\n              body: param.toString(),\n              headers: {\n                'content-length': \"\".concat(param.toString().length),\n                'content-type': 'application/x-www-form-urlencoded'\n              }\n            });\n\n          case 8:\n            response = _context37.sent;\n\n            if (!response.ok) {\n              _context37.next = 14;\n              break;\n            }\n\n            _context37.next = 12;\n            return response.json();\n\n          case 12:\n            tokens = _context37.sent;\n            return _context37.abrupt(\"return\", tokens);\n\n          case 14:\n            _context37.t0 = debug;\n            _context37.t1 = \"Fetch Oauth tokens failed: \";\n            _context37.next = 18;\n            return response.text();\n\n          case 18:\n            _context37.t2 = _context37.sent;\n            _context37.t3 = _context37.t1.concat.call(_context37.t1, _context37.t2);\n            (0, _context37.t0)(_context37.t3);\n            return _context37.abrupt(\"return\", {});\n\n          case 22:\n          case \"end\":\n            return _context37.stop();\n        }\n      }\n    }, _callee37);\n  }));\n};\n\nexports.fetchOauthTokens = fetchOauthTokens;\n\nvar refreshAccessToken = function refreshAccessToken(credentials) {\n  return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee38() {\n    var requireFields, param, response, tokens;\n    return _regeneratorRuntime().wrap(function _callee38$(_context38) {\n      while (1) {\n        switch (_context38.prev = _context38.next) {\n          case 0:\n            requireFields = ['refreshToken', 'clientId', 'clientSecret', 'tokenUrl'];\n\n            if (hasFields(credentials, requireFields)) {\n              _context38.next = 3;\n              break;\n            }\n\n            throw new Error(\"Oauth credentials missing: \".concat(findMissingFieldNames(credentials, requireFields)));\n\n          case 3:\n            param = new URLSearchParams({\n              client_id: credentials.clientId,\n              client_secret: credentials.clientSecret,\n              refresh_token: credentials.refreshToken,\n              grant_type: 'refresh_token'\n            });\n            _context38.next = 6;\n            return (0, _crossFetch.fetch)(credentials.tokenUrl, {\n              method: 'POST',\n              body: param.toString(),\n              headers: {\n                'Content-Type': 'application/x-www-form-urlencoded'\n              }\n            });\n\n          case 6:\n            response = _context38.sent;\n\n            if (!response.ok) {\n              _context38.next = 12;\n              break;\n            }\n\n            _context38.next = 10;\n            return response.json();\n\n          case 10:\n            tokens = _context38.sent;\n            return _context38.abrupt(\"return\", tokens);\n\n          case 12:\n            _context38.t0 = debug;\n            _context38.t1 = \"Refresh access token failed: \";\n            _context38.next = 16;\n            return response.text();\n\n          case 16:\n            _context38.t2 = _context38.sent;\n            _context38.t3 = _context38.t1.concat.call(_context38.t1, _context38.t2);\n            (0, _context38.t0)(_context38.t3);\n            return _context38.abrupt(\"return\", {});\n\n          case 20:\n          case \"end\":\n            return _context38.stop();\n        }\n      }\n    }, _callee38);\n  }));\n};\n\nexports.refreshAccessToken = refreshAccessToken;\n\nvar getOauthHeaders = function getOauthHeaders(credentials) {\n  return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee39() {\n    var _a, tokens;\n\n    return _regeneratorRuntime().wrap(function _callee39$(_context39) {\n      while (1) {\n        switch (_context39.prev = _context39.next) {\n          case 0:\n            debug('Fetching oauth headers');\n            tokens = {};\n\n            if (credentials.refreshToken) {\n              _context39.next = 8;\n              break;\n            }\n\n            _context39.next = 5;\n            return fetchOauthTokens(credentials);\n\n          case 5:\n            tokens = _context39.sent;\n            _context39.next = 12;\n            break;\n\n          case 8:\n            if (!(credentials.refreshToken && !credentials.accessToken || Date.now() > ((_a = credentials.expiration) !== null && _a !== void 0 ? _a : 0))) {\n              _context39.next = 12;\n              break;\n            }\n\n            _context39.next = 11;\n            return refreshAccessToken(credentials);\n\n          case 11:\n            tokens = _context39.sent;\n\n          case 12:\n            // now we should have valid access token\n            debug(\"Oauth tokens fetched: \".concat(tokens.access_token));\n            return _context39.abrupt(\"return\", {\n              tokens: tokens,\n              headers: {\n                authorization: \"Bearer \".concat(tokens.access_token)\n              }\n            });\n\n          case 14:\n          case \"end\":\n            return _context39.stop();\n        }\n      }\n    }, _callee39);\n  }));\n};\n\nexports.getOauthHeaders = getOauthHeaders;\nvar authHelpers = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  defaultParam: defaultParam,\n  getBasicAuthHeaders: getBasicAuthHeaders,\n  fetchOauthTokens: fetchOauthTokens,\n  refreshAccessToken: refreshAccessToken,\n  getOauthHeaders: getOauthHeaders\n}); // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n\nvar createDAVClient = function createDAVClient(params) {\n  return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee42() {\n    var serverUrl, credentials, authMethod, defaultAccountType, authHeaders, defaultAccount, davRequest$1, createObject$1, updateObject$1, deleteObject$1, propfind$1, createAccount$1, collectionQuery$1, makeCollection$1, syncCollection$1, supportedReportSet$1, isCollectionDirty$1, smartCollectionSync$1, calendarQuery$1, calendarMultiGet$1, makeCalendar$1, fetchCalendars$1, fetchCalendarObjects$1, createCalendarObject$1, updateCalendarObject$1, deleteCalendarObject$1, syncCalendars$1, addressBookQuery$1, addressBookMultiGet$1, fetchAddressBooks$1, fetchVCards$1, createVCard$1, updateVCard$1, deleteVCard$1;\n    return _regeneratorRuntime().wrap(function _callee42$(_context42) {\n      while (1) {\n        switch (_context42.prev = _context42.next) {\n          case 0:\n            serverUrl = params.serverUrl, credentials = params.credentials, authMethod = params.authMethod, defaultAccountType = params.defaultAccountType;\n\n            if (!(authMethod === 'Basic')) {\n              _context42.next = 5;\n              break;\n            }\n\n            _context42.t0 = getBasicAuthHeaders(credentials);\n            _context42.next = 13;\n            break;\n\n          case 5:\n            if (!(authMethod === 'Oauth')) {\n              _context42.next = 11;\n              break;\n            }\n\n            _context42.next = 8;\n            return getOauthHeaders(credentials);\n\n          case 8:\n            _context42.t1 = _context42.sent.headers;\n            _context42.next = 12;\n            break;\n\n          case 11:\n            _context42.t1 = {};\n\n          case 12:\n            _context42.t0 = _context42.t1;\n\n          case 13:\n            authHeaders = _context42.t0;\n\n            if (!defaultAccountType) {\n              _context42.next = 20;\n              break;\n            }\n\n            _context42.next = 17;\n            return _createAccount({\n              account: {\n                serverUrl: serverUrl,\n                credentials: credentials,\n                accountType: defaultAccountType\n              },\n              headers: authHeaders\n            });\n\n          case 17:\n            _context42.t2 = _context42.sent;\n            _context42.next = 21;\n            break;\n\n          case 20:\n            _context42.t2 = undefined;\n\n          case 21:\n            defaultAccount = _context42.t2;\n\n            davRequest$1 = function davRequest$1(params0) {\n              return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee40() {\n                var init, rest, headers, restInit;\n                return _regeneratorRuntime().wrap(function _callee40$(_context40) {\n                  while (1) {\n                    switch (_context40.prev = _context40.next) {\n                      case 0:\n                        init = params0.init, rest = __rest(params0, [\"init\"]);\n                        headers = init.headers, restInit = __rest(init, [\"headers\"]);\n                        return _context40.abrupt(\"return\", _davRequest(Object.assign(Object.assign({}, rest), {\n                          init: Object.assign(Object.assign({}, restInit), {\n                            headers: Object.assign(Object.assign({}, authHeaders), headers)\n                          })\n                        })));\n\n                      case 3:\n                      case \"end\":\n                        return _context40.stop();\n                    }\n                  }\n                }, _callee40);\n              }));\n            };\n\n            createObject$1 = defaultParam(_createObject, {\n              url: serverUrl,\n              headers: authHeaders\n            });\n            updateObject$1 = defaultParam(_updateObject, {\n              headers: authHeaders,\n              url: serverUrl\n            });\n            deleteObject$1 = defaultParam(_deleteObject, {\n              headers: authHeaders,\n              url: serverUrl\n            });\n            propfind$1 = defaultParam(_propfind, {\n              headers: authHeaders\n            }); // account\n\n            createAccount$1 = function createAccount$1(params0) {\n              return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee41() {\n                var account, headers, loadCollections, loadObjects;\n                return _regeneratorRuntime().wrap(function _callee41$(_context41) {\n                  while (1) {\n                    switch (_context41.prev = _context41.next) {\n                      case 0:\n                        account = params0.account, headers = params0.headers, loadCollections = params0.loadCollections, loadObjects = params0.loadObjects;\n                        return _context41.abrupt(\"return\", _createAccount({\n                          account: Object.assign({\n                            serverUrl: serverUrl,\n                            credentials: credentials\n                          }, account),\n                          headers: Object.assign(Object.assign({}, authHeaders), headers),\n                          loadCollections: loadCollections,\n                          loadObjects: loadObjects\n                        }));\n\n                      case 2:\n                      case \"end\":\n                        return _context41.stop();\n                    }\n                  }\n                }, _callee41);\n              }));\n            }; // collection\n\n\n            collectionQuery$1 = defaultParam(_collectionQuery, {\n              headers: authHeaders\n            });\n            makeCollection$1 = defaultParam(_makeCollection, {\n              headers: authHeaders\n            });\n            syncCollection$1 = defaultParam(_syncCollection2, {\n              headers: authHeaders\n            });\n            supportedReportSet$1 = defaultParam(_supportedReportSet, {\n              headers: authHeaders\n            });\n            isCollectionDirty$1 = defaultParam(_isCollectionDirty, {\n              headers: authHeaders\n            });\n            smartCollectionSync$1 = defaultParam(_smartCollectionSync, {\n              headers: authHeaders,\n              account: defaultAccount\n            }); // calendar\n\n            calendarQuery$1 = defaultParam(_calendarQuery, {\n              headers: authHeaders\n            });\n            calendarMultiGet$1 = defaultParam(_calendarMultiGet, {\n              headers: authHeaders\n            });\n            makeCalendar$1 = defaultParam(_makeCalendar, {\n              headers: authHeaders\n            });\n            fetchCalendars$1 = defaultParam(_fetchCalendars, {\n              headers: authHeaders,\n              account: defaultAccount\n            });\n            fetchCalendarObjects$1 = defaultParam(_fetchCalendarObjects, {\n              headers: authHeaders\n            });\n            createCalendarObject$1 = defaultParam(_createCalendarObject, {\n              headers: authHeaders\n            });\n            updateCalendarObject$1 = defaultParam(_updateCalendarObject, {\n              headers: authHeaders\n            });\n            deleteCalendarObject$1 = defaultParam(_deleteCalendarObject, {\n              headers: authHeaders\n            });\n            syncCalendars$1 = defaultParam(_syncCalendars, {\n              account: defaultAccount,\n              headers: authHeaders\n            }); // addressBook\n\n            addressBookQuery$1 = defaultParam(_addressBookQuery, {\n              headers: authHeaders\n            });\n            addressBookMultiGet$1 = defaultParam(_addressBookMultiGet, {\n              headers: authHeaders\n            });\n            fetchAddressBooks$1 = defaultParam(_fetchAddressBooks, {\n              account: defaultAccount,\n              headers: authHeaders\n            });\n            fetchVCards$1 = defaultParam(_fetchVCards, {\n              headers: authHeaders\n            });\n            createVCard$1 = defaultParam(_createVCard, {\n              headers: authHeaders\n            });\n            updateVCard$1 = defaultParam(_updateVCard, {\n              headers: authHeaders\n            });\n            deleteVCard$1 = defaultParam(_deleteVCard, {\n              headers: authHeaders\n            });\n            return _context42.abrupt(\"return\", {\n              davRequest: davRequest$1,\n              propfind: propfind$1,\n              createAccount: createAccount$1,\n              createObject: createObject$1,\n              updateObject: updateObject$1,\n              deleteObject: deleteObject$1,\n              calendarQuery: calendarQuery$1,\n              addressBookQuery: addressBookQuery$1,\n              collectionQuery: collectionQuery$1,\n              makeCollection: makeCollection$1,\n              calendarMultiGet: calendarMultiGet$1,\n              makeCalendar: makeCalendar$1,\n              syncCollection: syncCollection$1,\n              supportedReportSet: supportedReportSet$1,\n              isCollectionDirty: isCollectionDirty$1,\n              smartCollectionSync: smartCollectionSync$1,\n              fetchCalendars: fetchCalendars$1,\n              fetchCalendarObjects: fetchCalendarObjects$1,\n              createCalendarObject: createCalendarObject$1,\n              updateCalendarObject: updateCalendarObject$1,\n              deleteCalendarObject: deleteCalendarObject$1,\n              syncCalendars: syncCalendars$1,\n              fetchAddressBooks: fetchAddressBooks$1,\n              addressBookMultiGet: addressBookMultiGet$1,\n              fetchVCards: fetchVCards$1,\n              createVCard: createVCard$1,\n              updateVCard: updateVCard$1,\n              deleteVCard: deleteVCard$1\n            });\n\n          case 51:\n          case \"end\":\n            return _context42.stop();\n        }\n      }\n    }, _callee42);\n  }));\n};\n\nexports.createDAVClient = createDAVClient;\n\nvar DAVClient = /*#__PURE__*/function () {\n  function DAVClient(params) {\n    _classCallCheck(this, DAVClient);\n\n    var _a, _b;\n\n    this.serverUrl = params.serverUrl;\n    this.credentials = params.credentials;\n    this.authMethod = (_a = params.authMethod) !== null && _a !== void 0 ? _a : 'Basic';\n    this.accountType = (_b = params.defaultAccountType) !== null && _b !== void 0 ? _b : 'caldav';\n  }\n\n  _createClass(DAVClient, [{\n    key: \"login\",\n    value: function login() {\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee43() {\n        return _regeneratorRuntime().wrap(function _callee43$(_context43) {\n          while (1) {\n            switch (_context43.prev = _context43.next) {\n              case 0:\n                if (!(this.authMethod === 'Basic')) {\n                  _context43.next = 4;\n                  break;\n                }\n\n                _context43.t0 = getBasicAuthHeaders(this.credentials);\n                _context43.next = 12;\n                break;\n\n              case 4:\n                if (!(this.authMethod === 'Oauth')) {\n                  _context43.next = 10;\n                  break;\n                }\n\n                _context43.next = 7;\n                return getOauthHeaders(this.credentials);\n\n              case 7:\n                _context43.t1 = _context43.sent.headers;\n                _context43.next = 11;\n                break;\n\n              case 10:\n                _context43.t1 = {};\n\n              case 11:\n                _context43.t0 = _context43.t1;\n\n              case 12:\n                this.authHeaders = _context43.t0;\n\n                if (!this.accountType) {\n                  _context43.next = 19;\n                  break;\n                }\n\n                _context43.next = 16;\n                return _createAccount({\n                  account: {\n                    serverUrl: this.serverUrl,\n                    credentials: this.credentials,\n                    accountType: this.accountType\n                  },\n                  headers: this.authHeaders\n                });\n\n              case 16:\n                _context43.t2 = _context43.sent;\n                _context43.next = 20;\n                break;\n\n              case 19:\n                _context43.t2 = undefined;\n\n              case 20:\n                this.account = _context43.t2;\n\n              case 21:\n              case \"end\":\n                return _context43.stop();\n            }\n          }\n        }, _callee43, this);\n      }));\n    }\n  }, {\n    key: \"davRequest\",\n    value: function davRequest(params0) {\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee44() {\n        var init, rest, headers, restInit;\n        return _regeneratorRuntime().wrap(function _callee44$(_context44) {\n          while (1) {\n            switch (_context44.prev = _context44.next) {\n              case 0:\n                init = params0.init, rest = __rest(params0, [\"init\"]);\n                headers = init.headers, restInit = __rest(init, [\"headers\"]);\n                return _context44.abrupt(\"return\", _davRequest(Object.assign(Object.assign({}, rest), {\n                  init: Object.assign(Object.assign({}, restInit), {\n                    headers: Object.assign(Object.assign({}, this.authHeaders), headers)\n                  })\n                })));\n\n              case 3:\n              case \"end\":\n                return _context44.stop();\n            }\n          }\n        }, _callee44, this);\n      }));\n    }\n  }, {\n    key: \"createObject\",\n    value: function createObject() {\n      for (var _len = arguments.length, params = new Array(_len), _key = 0; _key < _len; _key++) {\n        params[_key] = arguments[_key];\n      }\n\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee45() {\n        return _regeneratorRuntime().wrap(function _callee45$(_context45) {\n          while (1) {\n            switch (_context45.prev = _context45.next) {\n              case 0:\n                return _context45.abrupt(\"return\", defaultParam(_createObject, {\n                  url: this.serverUrl,\n                  headers: this.authHeaders\n                })(params[0]));\n\n              case 1:\n              case \"end\":\n                return _context45.stop();\n            }\n          }\n        }, _callee45, this);\n      }));\n    }\n  }, {\n    key: \"updateObject\",\n    value: function updateObject() {\n      for (var _len2 = arguments.length, params = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        params[_key2] = arguments[_key2];\n      }\n\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee46() {\n        return _regeneratorRuntime().wrap(function _callee46$(_context46) {\n          while (1) {\n            switch (_context46.prev = _context46.next) {\n              case 0:\n                return _context46.abrupt(\"return\", defaultParam(_updateObject, {\n                  headers: this.authHeaders,\n                  url: this.serverUrl\n                })(params[0]));\n\n              case 1:\n              case \"end\":\n                return _context46.stop();\n            }\n          }\n        }, _callee46, this);\n      }));\n    }\n  }, {\n    key: \"deleteObject\",\n    value: function deleteObject() {\n      for (var _len3 = arguments.length, params = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        params[_key3] = arguments[_key3];\n      }\n\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee47() {\n        return _regeneratorRuntime().wrap(function _callee47$(_context47) {\n          while (1) {\n            switch (_context47.prev = _context47.next) {\n              case 0:\n                return _context47.abrupt(\"return\", defaultParam(_deleteObject, {\n                  headers: this.authHeaders,\n                  url: this.serverUrl\n                })(params[0]));\n\n              case 1:\n              case \"end\":\n                return _context47.stop();\n            }\n          }\n        }, _callee47, this);\n      }));\n    }\n  }, {\n    key: \"propfind\",\n    value: function propfind() {\n      for (var _len4 = arguments.length, params = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n        params[_key4] = arguments[_key4];\n      }\n\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee48() {\n        return _regeneratorRuntime().wrap(function _callee48$(_context48) {\n          while (1) {\n            switch (_context48.prev = _context48.next) {\n              case 0:\n                return _context48.abrupt(\"return\", defaultParam(_propfind, {\n                  headers: this.authHeaders\n                })(params[0]));\n\n              case 1:\n              case \"end\":\n                return _context48.stop();\n            }\n          }\n        }, _callee48, this);\n      }));\n    }\n  }, {\n    key: \"createAccount\",\n    value: function createAccount(params0) {\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee49() {\n        var account, headers, loadCollections, loadObjects;\n        return _regeneratorRuntime().wrap(function _callee49$(_context49) {\n          while (1) {\n            switch (_context49.prev = _context49.next) {\n              case 0:\n                account = params0.account, headers = params0.headers, loadCollections = params0.loadCollections, loadObjects = params0.loadObjects;\n                return _context49.abrupt(\"return\", _createAccount({\n                  account: Object.assign({\n                    serverUrl: this.serverUrl,\n                    credentials: this.credentials\n                  }, account),\n                  headers: Object.assign(Object.assign({}, this.authHeaders), headers),\n                  loadCollections: loadCollections,\n                  loadObjects: loadObjects\n                }));\n\n              case 2:\n              case \"end\":\n                return _context49.stop();\n            }\n          }\n        }, _callee49, this);\n      }));\n    }\n  }, {\n    key: \"collectionQuery\",\n    value: function collectionQuery() {\n      for (var _len5 = arguments.length, params = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n        params[_key5] = arguments[_key5];\n      }\n\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee50() {\n        return _regeneratorRuntime().wrap(function _callee50$(_context50) {\n          while (1) {\n            switch (_context50.prev = _context50.next) {\n              case 0:\n                return _context50.abrupt(\"return\", defaultParam(_collectionQuery, {\n                  headers: this.authHeaders\n                })(params[0]));\n\n              case 1:\n              case \"end\":\n                return _context50.stop();\n            }\n          }\n        }, _callee50, this);\n      }));\n    }\n  }, {\n    key: \"makeCollection\",\n    value: function makeCollection() {\n      for (var _len6 = arguments.length, params = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n        params[_key6] = arguments[_key6];\n      }\n\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee51() {\n        return _regeneratorRuntime().wrap(function _callee51$(_context51) {\n          while (1) {\n            switch (_context51.prev = _context51.next) {\n              case 0:\n                return _context51.abrupt(\"return\", defaultParam(_makeCollection, {\n                  headers: this.authHeaders\n                })(params[0]));\n\n              case 1:\n              case \"end\":\n                return _context51.stop();\n            }\n          }\n        }, _callee51, this);\n      }));\n    }\n  }, {\n    key: \"syncCollection\",\n    value: function syncCollection() {\n      for (var _len7 = arguments.length, params = new Array(_len7), _key7 = 0; _key7 < _len7; _key7++) {\n        params[_key7] = arguments[_key7];\n      }\n\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee52() {\n        return _regeneratorRuntime().wrap(function _callee52$(_context52) {\n          while (1) {\n            switch (_context52.prev = _context52.next) {\n              case 0:\n                return _context52.abrupt(\"return\", defaultParam(_syncCollection2, {\n                  headers: this.authHeaders\n                })(params[0]));\n\n              case 1:\n              case \"end\":\n                return _context52.stop();\n            }\n          }\n        }, _callee52, this);\n      }));\n    }\n  }, {\n    key: \"supportedReportSet\",\n    value: function supportedReportSet() {\n      for (var _len8 = arguments.length, params = new Array(_len8), _key8 = 0; _key8 < _len8; _key8++) {\n        params[_key8] = arguments[_key8];\n      }\n\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee53() {\n        return _regeneratorRuntime().wrap(function _callee53$(_context53) {\n          while (1) {\n            switch (_context53.prev = _context53.next) {\n              case 0:\n                return _context53.abrupt(\"return\", defaultParam(_supportedReportSet, {\n                  headers: this.authHeaders\n                })(params[0]));\n\n              case 1:\n              case \"end\":\n                return _context53.stop();\n            }\n          }\n        }, _callee53, this);\n      }));\n    }\n  }, {\n    key: \"isCollectionDirty\",\n    value: function isCollectionDirty() {\n      for (var _len9 = arguments.length, params = new Array(_len9), _key9 = 0; _key9 < _len9; _key9++) {\n        params[_key9] = arguments[_key9];\n      }\n\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee54() {\n        return _regeneratorRuntime().wrap(function _callee54$(_context54) {\n          while (1) {\n            switch (_context54.prev = _context54.next) {\n              case 0:\n                return _context54.abrupt(\"return\", defaultParam(_isCollectionDirty, {\n                  headers: this.authHeaders\n                })(params[0]));\n\n              case 1:\n              case \"end\":\n                return _context54.stop();\n            }\n          }\n        }, _callee54, this);\n      }));\n    }\n  }, {\n    key: \"smartCollectionSync\",\n    value: function smartCollectionSync() {\n      for (var _len10 = arguments.length, params = new Array(_len10), _key10 = 0; _key10 < _len10; _key10++) {\n        params[_key10] = arguments[_key10];\n      }\n\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee55() {\n        return _regeneratorRuntime().wrap(function _callee55$(_context55) {\n          while (1) {\n            switch (_context55.prev = _context55.next) {\n              case 0:\n                return _context55.abrupt(\"return\", defaultParam(_smartCollectionSync, {\n                  headers: this.authHeaders,\n                  account: this.account\n                })(params[0]));\n\n              case 1:\n              case \"end\":\n                return _context55.stop();\n            }\n          }\n        }, _callee55, this);\n      }));\n    }\n  }, {\n    key: \"calendarQuery\",\n    value: function calendarQuery() {\n      for (var _len11 = arguments.length, params = new Array(_len11), _key11 = 0; _key11 < _len11; _key11++) {\n        params[_key11] = arguments[_key11];\n      }\n\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee56() {\n        return _regeneratorRuntime().wrap(function _callee56$(_context56) {\n          while (1) {\n            switch (_context56.prev = _context56.next) {\n              case 0:\n                return _context56.abrupt(\"return\", defaultParam(_calendarQuery, {\n                  headers: this.authHeaders\n                })(params[0]));\n\n              case 1:\n              case \"end\":\n                return _context56.stop();\n            }\n          }\n        }, _callee56, this);\n      }));\n    }\n  }, {\n    key: \"makeCalendar\",\n    value: function makeCalendar() {\n      for (var _len12 = arguments.length, params = new Array(_len12), _key12 = 0; _key12 < _len12; _key12++) {\n        params[_key12] = arguments[_key12];\n      }\n\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee57() {\n        return _regeneratorRuntime().wrap(function _callee57$(_context57) {\n          while (1) {\n            switch (_context57.prev = _context57.next) {\n              case 0:\n                return _context57.abrupt(\"return\", defaultParam(_makeCalendar, {\n                  headers: this.authHeaders\n                })(params[0]));\n\n              case 1:\n              case \"end\":\n                return _context57.stop();\n            }\n          }\n        }, _callee57, this);\n      }));\n    }\n  }, {\n    key: \"calendarMultiGet\",\n    value: function calendarMultiGet() {\n      for (var _len13 = arguments.length, params = new Array(_len13), _key13 = 0; _key13 < _len13; _key13++) {\n        params[_key13] = arguments[_key13];\n      }\n\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee58() {\n        return _regeneratorRuntime().wrap(function _callee58$(_context58) {\n          while (1) {\n            switch (_context58.prev = _context58.next) {\n              case 0:\n                return _context58.abrupt(\"return\", defaultParam(_calendarMultiGet, {\n                  headers: this.authHeaders\n                })(params[0]));\n\n              case 1:\n              case \"end\":\n                return _context58.stop();\n            }\n          }\n        }, _callee58, this);\n      }));\n    }\n  }, {\n    key: \"fetchCalendars\",\n    value: function fetchCalendars() {\n      for (var _len14 = arguments.length, params = new Array(_len14), _key14 = 0; _key14 < _len14; _key14++) {\n        params[_key14] = arguments[_key14];\n      }\n\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee59() {\n        return _regeneratorRuntime().wrap(function _callee59$(_context59) {\n          while (1) {\n            switch (_context59.prev = _context59.next) {\n              case 0:\n                return _context59.abrupt(\"return\", defaultParam(_fetchCalendars, {\n                  headers: this.authHeaders,\n                  account: this.account\n                })(params === null || params === void 0 ? void 0 : params[0]));\n\n              case 1:\n              case \"end\":\n                return _context59.stop();\n            }\n          }\n        }, _callee59, this);\n      }));\n    }\n  }, {\n    key: \"fetchCalendarObjects\",\n    value: function fetchCalendarObjects() {\n      for (var _len15 = arguments.length, params = new Array(_len15), _key15 = 0; _key15 < _len15; _key15++) {\n        params[_key15] = arguments[_key15];\n      }\n\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee60() {\n        return _regeneratorRuntime().wrap(function _callee60$(_context60) {\n          while (1) {\n            switch (_context60.prev = _context60.next) {\n              case 0:\n                return _context60.abrupt(\"return\", defaultParam(_fetchCalendarObjects, {\n                  headers: this.authHeaders\n                })(params[0]));\n\n              case 1:\n              case \"end\":\n                return _context60.stop();\n            }\n          }\n        }, _callee60, this);\n      }));\n    }\n  }, {\n    key: \"createCalendarObject\",\n    value: function createCalendarObject() {\n      for (var _len16 = arguments.length, params = new Array(_len16), _key16 = 0; _key16 < _len16; _key16++) {\n        params[_key16] = arguments[_key16];\n      }\n\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee61() {\n        return _regeneratorRuntime().wrap(function _callee61$(_context61) {\n          while (1) {\n            switch (_context61.prev = _context61.next) {\n              case 0:\n                return _context61.abrupt(\"return\", defaultParam(_createCalendarObject, {\n                  headers: this.authHeaders\n                })(params[0]));\n\n              case 1:\n              case \"end\":\n                return _context61.stop();\n            }\n          }\n        }, _callee61, this);\n      }));\n    }\n  }, {\n    key: \"updateCalendarObject\",\n    value: function updateCalendarObject() {\n      for (var _len17 = arguments.length, params = new Array(_len17), _key17 = 0; _key17 < _len17; _key17++) {\n        params[_key17] = arguments[_key17];\n      }\n\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee62() {\n        return _regeneratorRuntime().wrap(function _callee62$(_context62) {\n          while (1) {\n            switch (_context62.prev = _context62.next) {\n              case 0:\n                return _context62.abrupt(\"return\", defaultParam(_updateCalendarObject, {\n                  headers: this.authHeaders\n                })(params[0]));\n\n              case 1:\n              case \"end\":\n                return _context62.stop();\n            }\n          }\n        }, _callee62, this);\n      }));\n    }\n  }, {\n    key: \"deleteCalendarObject\",\n    value: function deleteCalendarObject() {\n      for (var _len18 = arguments.length, params = new Array(_len18), _key18 = 0; _key18 < _len18; _key18++) {\n        params[_key18] = arguments[_key18];\n      }\n\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee63() {\n        return _regeneratorRuntime().wrap(function _callee63$(_context63) {\n          while (1) {\n            switch (_context63.prev = _context63.next) {\n              case 0:\n                return _context63.abrupt(\"return\", defaultParam(_deleteCalendarObject, {\n                  headers: this.authHeaders\n                })(params[0]));\n\n              case 1:\n              case \"end\":\n                return _context63.stop();\n            }\n          }\n        }, _callee63, this);\n      }));\n    }\n  }, {\n    key: \"syncCalendars\",\n    value: function syncCalendars() {\n      for (var _len19 = arguments.length, params = new Array(_len19), _key19 = 0; _key19 < _len19; _key19++) {\n        params[_key19] = arguments[_key19];\n      }\n\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee64() {\n        return _regeneratorRuntime().wrap(function _callee64$(_context64) {\n          while (1) {\n            switch (_context64.prev = _context64.next) {\n              case 0:\n                return _context64.abrupt(\"return\", defaultParam(_syncCalendars, {\n                  headers: this.authHeaders,\n                  account: this.account\n                })(params[0]));\n\n              case 1:\n              case \"end\":\n                return _context64.stop();\n            }\n          }\n        }, _callee64, this);\n      }));\n    }\n  }, {\n    key: \"addressBookQuery\",\n    value: function addressBookQuery() {\n      for (var _len20 = arguments.length, params = new Array(_len20), _key20 = 0; _key20 < _len20; _key20++) {\n        params[_key20] = arguments[_key20];\n      }\n\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee65() {\n        return _regeneratorRuntime().wrap(function _callee65$(_context65) {\n          while (1) {\n            switch (_context65.prev = _context65.next) {\n              case 0:\n                return _context65.abrupt(\"return\", defaultParam(_addressBookQuery, {\n                  headers: this.authHeaders\n                })(params[0]));\n\n              case 1:\n              case \"end\":\n                return _context65.stop();\n            }\n          }\n        }, _callee65, this);\n      }));\n    }\n  }, {\n    key: \"addressBookMultiGet\",\n    value: function addressBookMultiGet() {\n      for (var _len21 = arguments.length, params = new Array(_len21), _key21 = 0; _key21 < _len21; _key21++) {\n        params[_key21] = arguments[_key21];\n      }\n\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee66() {\n        return _regeneratorRuntime().wrap(function _callee66$(_context66) {\n          while (1) {\n            switch (_context66.prev = _context66.next) {\n              case 0:\n                return _context66.abrupt(\"return\", defaultParam(_addressBookMultiGet, {\n                  headers: this.authHeaders\n                })(params[0]));\n\n              case 1:\n              case \"end\":\n                return _context66.stop();\n            }\n          }\n        }, _callee66, this);\n      }));\n    }\n  }, {\n    key: \"fetchAddressBooks\",\n    value: function fetchAddressBooks() {\n      for (var _len22 = arguments.length, params = new Array(_len22), _key22 = 0; _key22 < _len22; _key22++) {\n        params[_key22] = arguments[_key22];\n      }\n\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee67() {\n        return _regeneratorRuntime().wrap(function _callee67$(_context67) {\n          while (1) {\n            switch (_context67.prev = _context67.next) {\n              case 0:\n                return _context67.abrupt(\"return\", defaultParam(_fetchAddressBooks, {\n                  headers: this.authHeaders,\n                  account: this.account\n                })(params === null || params === void 0 ? void 0 : params[0]));\n\n              case 1:\n              case \"end\":\n                return _context67.stop();\n            }\n          }\n        }, _callee67, this);\n      }));\n    }\n  }, {\n    key: \"fetchVCards\",\n    value: function fetchVCards() {\n      for (var _len23 = arguments.length, params = new Array(_len23), _key23 = 0; _key23 < _len23; _key23++) {\n        params[_key23] = arguments[_key23];\n      }\n\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee68() {\n        return _regeneratorRuntime().wrap(function _callee68$(_context68) {\n          while (1) {\n            switch (_context68.prev = _context68.next) {\n              case 0:\n                return _context68.abrupt(\"return\", defaultParam(_fetchVCards, {\n                  headers: this.authHeaders\n                })(params[0]));\n\n              case 1:\n              case \"end\":\n                return _context68.stop();\n            }\n          }\n        }, _callee68, this);\n      }));\n    }\n  }, {\n    key: \"createVCard\",\n    value: function createVCard() {\n      for (var _len24 = arguments.length, params = new Array(_len24), _key24 = 0; _key24 < _len24; _key24++) {\n        params[_key24] = arguments[_key24];\n      }\n\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee69() {\n        return _regeneratorRuntime().wrap(function _callee69$(_context69) {\n          while (1) {\n            switch (_context69.prev = _context69.next) {\n              case 0:\n                return _context69.abrupt(\"return\", defaultParam(_createVCard, {\n                  headers: this.authHeaders\n                })(params[0]));\n\n              case 1:\n              case \"end\":\n                return _context69.stop();\n            }\n          }\n        }, _callee69, this);\n      }));\n    }\n  }, {\n    key: \"updateVCard\",\n    value: function updateVCard() {\n      for (var _len25 = arguments.length, params = new Array(_len25), _key25 = 0; _key25 < _len25; _key25++) {\n        params[_key25] = arguments[_key25];\n      }\n\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee70() {\n        return _regeneratorRuntime().wrap(function _callee70$(_context70) {\n          while (1) {\n            switch (_context70.prev = _context70.next) {\n              case 0:\n                return _context70.abrupt(\"return\", defaultParam(_updateVCard, {\n                  headers: this.authHeaders\n                })(params[0]));\n\n              case 1:\n              case \"end\":\n                return _context70.stop();\n            }\n          }\n        }, _callee70, this);\n      }));\n    }\n  }, {\n    key: \"deleteVCard\",\n    value: function deleteVCard() {\n      for (var _len26 = arguments.length, params = new Array(_len26), _key26 = 0; _key26 < _len26; _key26++) {\n        params[_key26] = arguments[_key26];\n      }\n\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee71() {\n        return _regeneratorRuntime().wrap(function _callee71$(_context71) {\n          while (1) {\n            switch (_context71.prev = _context71.next) {\n              case 0:\n                return _context71.abrupt(\"return\", defaultParam(_deleteVCard, {\n                  headers: this.authHeaders\n                })(params[0]));\n\n              case 1:\n              case \"end\":\n                return _context71.stop();\n            }\n          }\n        }, _callee71, this);\n      }));\n    }\n  }]);\n\n  return DAVClient;\n}();\n\nexports.DAVClient = DAVClient;\nvar client = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  createDAVClient: createDAVClient,\n  DAVClient: DAVClient\n});\nvar index = Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({\n  DAVNamespace: DAVNamespace,\n  DAVNamespaceShort: DAVNamespaceShort,\n  DAVAttributeMap: DAVAttributeMap\n}, client), request), collection), account), addressBook), calendar), authHelpers), requestHelpers);\nexports.default = index;"},"sourceMaps":null,"error":null,"hash":"b46f069470d0347bab63b5719b3e121f","cacheData":{"env":{}}}