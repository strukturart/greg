!function(){function t(t){return t&&t.__esModule?t.default:t}var e,r,n,i,a,o,s,u,c,l,h,f,d,m,y,v,g,b,_,T,E,A,w,D,O,C,S,x,I,N,Y,R,k,P,L,j,M,B,F,U,V,z,H,K,W,q,$,G,Z,J,X,Q,tt,te="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};function tr(t,e,r,n,i,a,o){try{var s=t[a](o),u=s.value}catch(t){r(t);return}s.done?e(u):Promise.resolve(u).then(n,i)}function tn(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function o(t){tr(a,n,i,o,s,"next",t)}function s(t){tr(a,n,i,o,s,"throw",t)}o(void 0)})}}function ti(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}function ta(t,e){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}function to(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ts(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function tu(t,e){return(tu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function tc(t,e,r){return(tc=!function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}()?function(t,e,r){var n=[null];n.push.apply(n,e);var i=new(Function.bind.apply(t,n));return r&&tu(i,r.prototype),i}:Reflect.construct).apply(null,arguments)}function tl(t){return(tl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function th(t){var e="function"==typeof Map?new Map:void 0;return(th=function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return tc(t,arguments,tl(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),tu(r,t)})(t)}"function"==typeof SuppressedError&&SuppressedError,th(EventTarget);var tf={};tf.foldLength=75,tf.newLineChar="\r\n",tf.helpers={updateTimezones:function(t){var e,r,n,i,a,o;if(!t||"vcalendar"!==t.name)return t;for(a=0,e=t.getAllSubcomponents(),r=[],n={};a<e.length;a++)"vtimezone"===e[a].name?n[o=e[a].getFirstProperty("tzid").getFirstValue()]=e[a]:r=r.concat(e[a].getAllProperties());for(a=0,i={};a<r.length;a++)(o=r[a].getParameter("tzid"))&&(i[o]=!0);for(a in n)n.hasOwnProperty(a)&&!i[a]&&t.removeSubcomponent(n[a]);for(a in i)i.hasOwnProperty(a)&&!n[a]&&tf.TimezoneService.has(a)&&t.addSubcomponent(tf.TimezoneService.get(a).component);return t},isStrictlyNaN:function(t){return"number"==typeof t&&isNaN(t)},strictParseInt:function(t){var e=parseInt(t,10);if(tf.helpers.isStrictlyNaN(e))throw Error('Could not extract integer from "'+t+'"');return e},formatClassType:function(t,e){if(void 0!==t)return t instanceof e?t:new e(t)},unescapedIndexOf:function(t,e,r){for(;-1!==(r=t.indexOf(e,r));){if(!(r>0)||"\\"!==t[r-1])return r;r+=1}return -1},binsearchInsert:function(t,e,r){if(!t.length)return 0;for(var n,i,a=0,o=t.length-1;a<=o;)if((i=r(e,t[n=a+Math.floor((o-a)/2)]))<0)o=n-1;else if(i>0)a=n+1;else break;return i<0?n:i>0?n+1:n},dumpn:function(){tf.debug&&("undefined"!=typeof console&&"log"in console?tf.helpers.dumpn=function(t){console.log(t)}:tf.helpers.dumpn=function(t){dump(t+"\n")},tf.helpers.dumpn(arguments[0]))},clone:function(t,e){if(!t||"object"!=typeof t)return t;if(t instanceof Date)return new Date(t.getTime());if("clone"in t)return t.clone();if(Array.isArray(t)){for(var r=[],n=0;n<t.length;n++)r.push(e?tf.helpers.clone(t[n],!0):t[n]);return r}var i={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e?i[a]=tf.helpers.clone(t[a],!0):i[a]=t[a]);return i},foldline:function(t){for(var e="",r=t||"",n=0,i=0;r.length;){var a=r.codePointAt(n);a<128?++i:a<2048?i+=2:a<65536?i+=3:i+=4,i<tf.foldLength+1?n+=a>65535?2:1:(e+=tf.newLineChar+" "+r.substring(0,n),r=r.substring(n),n=i=0)}return e.substr(tf.newLineChar.length+1)},pad2:function(t){switch("string"!=typeof t&&("number"==typeof t&&(t=parseInt(t)),t=String(t)),t.length){case 0:return"00";case 1:return"0"+t;default:return t}},trunc:function(t){return t<0?Math.ceil(t):Math.floor(t)},inherits:function(t,e,r){function n(){}n.prototype=t.prototype,e.prototype=new n,r&&tf.helpers.extend(r,e.prototype)},extend:function(t,e){for(var r in t){var n=Object.getOwnPropertyDescriptor(t,r);n&&!Object.getOwnPropertyDescriptor(e,r)&&Object.defineProperty(e,r,n)}return e}},tf.design=function(){var t=/\\\\|\\,|\\[Nn]/g,e=/\\|,|\n/g;function r(t,e){return{matches:/.*/,fromICAL:function(e,r){var n;return n=t,-1===e.indexOf("\\")?e:(r&&(n=RegExp(n.source+"|\\\\"+r)),e.replace(n,d))},toICAL:function(t,r){var n=e;return r&&(n=RegExp(n.source+"|"+r)),t.replace(n,function(t){switch(t){case"\\":return"\\\\";case";":return"\\;";case",":return"\\,";case"\n":return"\\n";default:return t}})}}}var n={defaultType:"text"},i={defaultType:"text",multiValue:","},a={defaultType:"text",structuredValue:";"},o={defaultType:"integer"},s={defaultType:"date-time",allowedTypes:["date-time","date"]},u={defaultType:"date-time"},c={defaultType:"uri"},l={defaultType:"utc-offset"},h={defaultType:"recur"},f={defaultType:"date-and-or-time",allowedTypes:["date-time","date","text"]};function d(t){switch(t){case"\\\\":return"\\";case"\\;":return";";case"\\,":return",";case"\\n":case"\\N":return"\n";default:return t}}var m={categories:i,url:c,version:n,uid:n},y={boolean:{values:["TRUE","FALSE"],fromICAL:function(t){return"TRUE"===t},toICAL:function(t){return t?"TRUE":"FALSE"}},float:{matches:/^[+-]?\d+\.\d+$/,fromICAL:function(t){var e=parseFloat(t);return tf.helpers.isStrictlyNaN(e)?0:e},toICAL:function(t){return String(t)}},integer:{fromICAL:function(t){var e=parseInt(t);return tf.helpers.isStrictlyNaN(e)?0:e},toICAL:function(t){return String(t)}},"utc-offset":{toICAL:function(t){return t.length<7?t.substr(0,3)+t.substr(4,2):t.substr(0,3)+t.substr(4,2)+t.substr(7,2)},fromICAL:function(t){return t.length<6?t.substr(0,3)+":"+t.substr(3,2):t.substr(0,3)+":"+t.substr(3,2)+":"+t.substr(5,2)},decorate:function(t){return tf.UtcOffset.fromString(t)},undecorate:function(t){return t.toString()}}},v=tf.helpers.extend(y,{text:r(/\\\\|\\;|\\,|\\[Nn]/g,/\\|;|,|\n/g),uri:{},binary:{decorate:function(t){return tf.Binary.fromString(t)},undecorate:function(t){return t.toString()}},"cal-address":{},date:{decorate:function(t,e){return O.strict?tf.Time.fromDateString(t,e):tf.Time.fromString(t,e)},undecorate:function(t){return t.toString()},fromICAL:function(t){return!O.strict&&t.length>=15?v["date-time"].fromICAL(t):t.substr(0,4)+"-"+t.substr(4,2)+"-"+t.substr(6,2)},toICAL:function(t){var e=t.length;return 10==e?t.substr(0,4)+t.substr(5,2)+t.substr(8,2):e>=19?v["date-time"].toICAL(t):t}},"date-time":{fromICAL:function(t){if(!O.strict&&8==t.length)return v.date.fromICAL(t);var e=t.substr(0,4)+"-"+t.substr(4,2)+"-"+t.substr(6,2)+"T"+t.substr(9,2)+":"+t.substr(11,2)+":"+t.substr(13,2);return t[15]&&"Z"===t[15]&&(e+="Z"),e},toICAL:function(t){var e=t.length;if(10==e&&!O.strict)return v.date.toICAL(t);if(!(e>=19))return t;var r=t.substr(0,4)+t.substr(5,2)+t.substr(8,5)+t.substr(14,2)+t.substr(17,2);return t[19]&&"Z"===t[19]&&(r+="Z"),r},decorate:function(t,e){return O.strict?tf.Time.fromDateTimeString(t,e):tf.Time.fromString(t,e)},undecorate:function(t){return t.toString()}},duration:{decorate:function(t){return tf.Duration.fromString(t)},undecorate:function(t){return t.toString()}},period:{fromICAL:function(t){var e=t.split("/");return e[0]=v["date-time"].fromICAL(e[0]),tf.Duration.isValueString(e[1])||(e[1]=v["date-time"].fromICAL(e[1])),e},toICAL:function(t){return O.strict||10!=t[0].length?t[0]=v["date-time"].toICAL(t[0]):t[0]=v.date.toICAL(t[0]),tf.Duration.isValueString(t[1])||(O.strict||10!=t[1].length?t[1]=v["date-time"].toICAL(t[1]):t[1]=v.date.toICAL(t[1])),t.join("/")},decorate:function(t,e){return tf.Period.fromJSON(t,e,!O.strict)},undecorate:function(t){return t.toJSON()}},recur:{fromICAL:function(t){return tf.Recur._stringToData(t,!0)},toICAL:function(t){var e="";for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=t[r];"until"==r?n=n.length>10?v["date-time"].toICAL(n):v.date.toICAL(n):"wkst"==r?"number"==typeof n&&(n=tf.Recur.numericDayToIcalDay(n)):Array.isArray(n)&&(n=n.join(",")),e+=r.toUpperCase()+"="+n+";"}return e.substr(0,e.length-1)},decorate:function(t){return tf.Recur.fromData(t)},undecorate:function(t){return t.toJSON()}},time:{fromICAL:function(t){if(t.length<6)return t;var e=t.substr(0,2)+":"+t.substr(2,2)+":"+t.substr(4,2);return"Z"===t[6]&&(e+="Z"),e},toICAL:function(t){if(t.length<8)return t;var e=t.substr(0,2)+t.substr(3,2)+t.substr(6,2);return"Z"===t[8]&&(e+="Z"),e}}}),g=tf.helpers.extend(m,{action:n,attach:{defaultType:"uri"},attendee:{defaultType:"cal-address"},calscale:n,class:n,comment:n,completed:u,contact:n,created:u,description:n,dtend:s,dtstamp:u,dtstart:s,due:s,duration:{defaultType:"duration"},exdate:{defaultType:"date-time",allowedTypes:["date-time","date"],multiValue:","},exrule:h,freebusy:{defaultType:"period",multiValue:","},geo:{defaultType:"float",structuredValue:";"},"last-modified":u,location:n,method:n,organizer:{defaultType:"cal-address"},"percent-complete":o,priority:o,prodid:n,"related-to":n,repeat:o,rdate:{defaultType:"date-time",allowedTypes:["date-time","date","period"],multiValue:",",detectType:function(t){return -1!==t.indexOf("/")?"period":-1===t.indexOf("T")?"date":"date-time"}},"recurrence-id":s,resources:i,"request-status":a,rrule:h,sequence:o,status:n,summary:n,transp:n,trigger:{defaultType:"duration",allowedTypes:["duration","date-time"]},tzoffsetfrom:l,tzoffsetto:l,tzurl:c,tzid:n,tzname:n}),b=tf.helpers.extend(y,{text:r(t,e),uri:r(t,e),date:{decorate:function(t){return tf.VCardTime.fromDateAndOrTimeString(t,"date")},undecorate:function(t){return t.toString()},fromICAL:function(t){return 8==t.length?v.date.fromICAL(t):"-"==t[0]&&6==t.length?t.substr(0,4)+"-"+t.substr(4):t},toICAL:function(t){return 10==t.length?v.date.toICAL(t):"-"==t[0]&&7==t.length?t.substr(0,4)+t.substr(5):t}},time:{decorate:function(t){return tf.VCardTime.fromDateAndOrTimeString("T"+t,"time")},undecorate:function(t){return t.toString()},fromICAL:function(t){var e=b.time._splitZone(t,!0),r=e[0],n=e[1];return 6==n.length?n=n.substr(0,2)+":"+n.substr(2,2)+":"+n.substr(4,2):4==n.length&&"-"!=n[0]?n=n.substr(0,2)+":"+n.substr(2,2):5==n.length&&(n=n.substr(0,3)+":"+n.substr(3,2)),5==r.length&&("-"==r[0]||"+"==r[0])&&(r=r.substr(0,3)+":"+r.substr(3)),n+r},toICAL:function(t){var e=b.time._splitZone(t),r=e[0],n=e[1];return 8==n.length?n=n.substr(0,2)+n.substr(3,2)+n.substr(6,2):5==n.length&&"-"!=n[0]?n=n.substr(0,2)+n.substr(3,2):6==n.length&&(n=n.substr(0,3)+n.substr(4,2)),6==r.length&&("-"==r[0]||"+"==r[0])&&(r=r.substr(0,3)+r.substr(4)),n+r},_splitZone:function(t,e){var r,n,i=t.length-1,a=t.length-(e?5:6),o=t[a];return"Z"==t[i]?(r=t[i],n=t.substr(0,i)):t.length>6&&("-"==o||"+"==o)?(r=t.substr(a),n=t.substr(0,a)):(r="",n=t),[r,n]}},"date-time":{decorate:function(t){return tf.VCardTime.fromDateAndOrTimeString(t,"date-time")},undecorate:function(t){return t.toString()},fromICAL:function(t){return b["date-and-or-time"].fromICAL(t)},toICAL:function(t){return b["date-and-or-time"].toICAL(t)}},"date-and-or-time":{decorate:function(t){return tf.VCardTime.fromDateAndOrTimeString(t,"date-and-or-time")},undecorate:function(t){return t.toString()},fromICAL:function(t){var e=t.split("T");return(e[0]?b.date.fromICAL(e[0]):"")+(e[1]?"T"+b.time.fromICAL(e[1]):"")},toICAL:function(t){var e=t.split("T");return b.date.toICAL(e[0])+(e[1]?"T"+b.time.toICAL(e[1]):"")}},timestamp:v["date-time"],"language-tag":{matches:/^[a-zA-Z0-9-]+$/}}),_=tf.helpers.extend(m,{adr:{defaultType:"text",structuredValue:";",multiValue:","},anniversary:f,bday:f,caladruri:c,caluri:c,clientpidmap:a,email:n,fburl:c,fn:n,gender:a,geo:c,impp:c,key:c,kind:n,lang:{defaultType:"language-tag"},logo:c,member:c,n:{defaultType:"text",structuredValue:";",multiValue:","},nickname:i,note:n,org:{defaultType:"text",structuredValue:";"},photo:c,related:c,rev:{defaultType:"timestamp"},role:n,sound:c,source:c,tel:{defaultType:"uri",allowedTypes:["uri","text"]},title:n,tz:{defaultType:"text",allowedTypes:["text","utc-offset","uri"]},xml:n}),T=tf.helpers.extend(y,{binary:v.binary,date:b.date,"date-time":b["date-time"],"phone-number":{},uri:v.uri,text:v.text,time:v.time,vcard:v.text,"utc-offset":{toICAL:function(t){return t.substr(0,7)},fromICAL:function(t){return t.substr(0,7)},decorate:function(t){return tf.UtcOffset.fromString(t)},undecorate:function(t){return t.toString()}}}),E=tf.helpers.extend(m,{fn:n,n:{defaultType:"text",structuredValue:";",multiValue:","},nickname:i,photo:{defaultType:"binary",allowedTypes:["binary","uri"]},bday:{defaultType:"date-time",allowedTypes:["date-time","date"],detectType:function(t){return -1===t.indexOf("T")?"date":"date-time"}},adr:{defaultType:"text",structuredValue:";",multiValue:","},label:n,tel:{defaultType:"phone-number"},email:n,mailer:n,tz:{defaultType:"utc-offset",allowedTypes:["utc-offset","text"]},geo:{defaultType:"float",structuredValue:";"},title:n,role:n,logo:{defaultType:"binary",allowedTypes:["binary","uri"]},agent:{defaultType:"vcard",allowedTypes:["vcard","text","uri"]},org:a,note:i,prodid:n,rev:{defaultType:"date-time",allowedTypes:["date-time","date"],detectType:function(t){return -1===t.indexOf("T")?"date":"date-time"}},"sort-string":n,sound:{defaultType:"binary",allowedTypes:["binary","uri"]},class:n,key:{defaultType:"binary",allowedTypes:["binary","text"]}}),A={value:v,param:{cutype:{values:["INDIVIDUAL","GROUP","RESOURCE","ROOM","UNKNOWN"],allowXName:!0,allowIanaToken:!0},"delegated-from":{valueType:"cal-address",multiValue:",",multiValueSeparateDQuote:!0},"delegated-to":{valueType:"cal-address",multiValue:",",multiValueSeparateDQuote:!0},encoding:{values:["8BIT","BASE64"]},fbtype:{values:["FREE","BUSY","BUSY-UNAVAILABLE","BUSY-TENTATIVE"],allowXName:!0,allowIanaToken:!0},member:{valueType:"cal-address",multiValue:",",multiValueSeparateDQuote:!0},partstat:{values:["NEEDS-ACTION","ACCEPTED","DECLINED","TENTATIVE","DELEGATED","COMPLETED","IN-PROCESS"],allowXName:!0,allowIanaToken:!0},range:{values:["THISANDFUTURE"]},related:{values:["START","END"]},reltype:{values:["PARENT","CHILD","SIBLING"],allowXName:!0,allowIanaToken:!0},role:{values:["REQ-PARTICIPANT","CHAIR","OPT-PARTICIPANT","NON-PARTICIPANT"],allowXName:!0,allowIanaToken:!0},rsvp:{values:["TRUE","FALSE"]},"sent-by":{valueType:"cal-address"},tzid:{matches:/^\//},value:{values:["binary","boolean","cal-address","date","date-time","duration","float","integer","period","recur","text","time","uri","utc-offset"],allowXName:!0,allowIanaToken:!0}},property:g},w={value:b,param:{type:{valueType:"text",multiValue:","},value:{values:["text","uri","date","time","date-time","date-and-or-time","timestamp","boolean","integer","float","utc-offset","language-tag"],allowXName:!0,allowIanaToken:!0}},property:_},D={value:T,param:{type:{valueType:"text",multiValue:","},value:{values:["text","uri","date","date-time","phone-number","time","boolean","integer","float","utc-offset","vcard","binary"],allowXName:!0,allowIanaToken:!0}},property:E},O={strict:!0,defaultSet:A,defaultType:"unknown",components:{vcard:w,vcard3:D,vevent:A,vtodo:A,vjournal:A,valarm:A,vtimezone:A,daylight:A,standard:A},icalendar:A,vcard:w,vcard3:D,getDesignSet:function(t){return t&&t in O.components?O.components[t]:O.defaultSet}};return O}(),tf.stringify=function(){var t="unknown",e=tf.design,r=tf.helpers;function n(t){"string"==typeof t[0]&&(t=[t]);for(var e=0,r=t.length,i="";e<r;e++)i+=n.component(t[e])+"\r\n";return i}n.component=function(t,r){var i=t[0].toUpperCase(),a="BEGIN:"+i+"\r\n",o=t[1],s=0,u=o.length,c=t[0];for("vcard"===c&&t[1].length>0&&!("version"===t[1][0][0]&&"4.0"===t[1][0][3])&&(c="vcard3"),r=r||e.getDesignSet(c);s<u;s++)a+=n.property(o[s],r)+"\r\n";for(var l=t[2]||[],h=0,f=l.length;h<f;h++)a+=n.component(l[h],r)+"\r\n";return a+"END:"+i},n.property=function(r,i,a){var o,s,u=r[0].toUpperCase(),c=r[0],l=r[1],h=u;for(o in l){var f=l[o];if(l.hasOwnProperty(o)){var d=o in i.param&&i.param[o].multiValue;d&&Array.isArray(f)?(i.param[o].multiValueSeparateDQuote&&(d='"'+d+'"'),f=f.map(n._rfc6868Unescape),f=n.multiValue(f,d,"unknown",null,i)):f=n._rfc6868Unescape(f),h+=";"+o.toUpperCase()+"="+n.propertyValue(f)}}if(3===r.length)return h+":";var m=r[2];i||(i=e.defaultSet);var d=!1,y=!1,v=!1;return c in i.property?("multiValue"in(s=i.property[c])&&(d=s.multiValue),"structuredValue"in s&&Array.isArray(r[3])&&(y=s.structuredValue),"defaultType"in s?m===s.defaultType&&(v=!0):m===t&&(v=!0)):m===t&&(v=!0),v||(h+=";VALUE="+m.toUpperCase()),h+=":",d&&y?h+=n.multiValue(r[3],y,m,d,i,y):d?h+=n.multiValue(r.slice(3),d,m,null,i,!1):y?h+=n.multiValue(r[3],y,m,null,i,y):h+=n.value(r[3],m,i,!1),a?h:tf.helpers.foldline(h)},n.propertyValue=function(t){return -1===r.unescapedIndexOf(t,",")&&-1===r.unescapedIndexOf(t,":")&&-1===r.unescapedIndexOf(t,";")?t:'"'+t+'"'},n.multiValue=function(t,e,r,i,a,o){for(var s="",u=t.length,c=0;c<u;c++)i&&Array.isArray(t[c])?s+=n.multiValue(t[c],i,r,null,a,o):s+=n.value(t[c],r,a,o),c!==u-1&&(s+=e);return s},n.value=function(t,e,r,n){return e in r.value&&"toICAL"in r.value[e]?r.value[e].toICAL(t,n):t},n._rfc6868Unescape=function(t){return t.replace(/[\n^"]/g,function(t){return i[t]})};var i={'"':"^'","\n":"^n","^":"^^"};return n}(),tf.parse=function(){var t=/[^ \t]/,e=tf.design,r=tf.helpers;function n(t){this.message=t,this.name="ParserError";try{throw Error()}catch(t){if(t.stack){var e=t.stack.split("\n");e.shift(),this.stack=e.join("\n")}}}function i(t){var e={},r=e.component=[];if(e.stack=[r],i._eachLine(t,function(t,r){i._handleContentLine(r,e)}),e.stack.length>1)throw new n("invalid ical body. component began but did not end");return e=null,1==r.length?r[0]:r}n.prototype=Error.prototype,i.property=function(t,r){var n={component:[[],[]],designSet:r||e.defaultSet};return i._handleContentLine(t,n),n.component[1][0]},i.component=function(t){return i(t)},i.ParserError=n,i._handleContentLine=function(t,r){var a,o,s,u,c,l,h,f,d=t.indexOf(":"),m=t.indexOf(";"),y={};if(-1!==m&&-1!==d&&m>d&&(m=-1),-1!==m){if(s=t.substring(0,m).toLowerCase(),-1==(c=i._parseParameters(t.substring(m),0,r.designSet))[2])throw new n("Invalid parameters in '"+t+"'");if(y=c[0],a=c[1].length+c[2]+m,-1!==(o=t.substring(a).indexOf(":")))u=t.substring(a+o+1);else throw new n("Missing parameter value in '"+t+"'")}else if(-1!==d){if(s=t.substring(0,d).toLowerCase(),u=t.substring(d+1),"begin"===s){var v=[u.toLowerCase(),[],[]];1===r.stack.length?r.component.push(v):r.component[2].push(v),r.stack.push(r.component),r.component=v,r.designSet||(r.designSet=e.getDesignSet(r.component[0]));return}if("end"===s){r.component=r.stack.pop();return}}else throw new n('invalid line (no token ";" or ":") "'+t+'"');var g=!1,b=!1;s in r.designSet.property&&("multiValue"in(h=r.designSet.property[s])&&(g=h.multiValue),"structuredValue"in h&&(b=h.structuredValue),u&&"detectType"in h&&(l=h.detectType(u))),l||(l="value"in y?y.value.toLowerCase():h?h.defaultType:"unknown"),delete y.value,g&&b?(u=i._parseMultiValue(u,b,l,[],g,r.designSet,b),f=[s,y,l,u]):g?(f=[s,y,l],i._parseMultiValue(u,g,l,f,null,r.designSet,!1)):(u=b?i._parseMultiValue(u,b,l,[],null,r.designSet,b):i._parseValue(u,l,r.designSet,!1),f=[s,y,l,u]),"vcard"!==r.component[0]||0!==r.component[1].length||"version"===s&&"4.0"===u||(r.designSet=e.getDesignSet("vcard3")),r.component[1].push(f)},i._parseValue=function(t,e,r,n){return e in r.value&&"fromICAL"in r.value[e]?r.value[e].fromICAL(t,n):t},i._parseParameters=function(t,e,a){for(var o,s,u,c,l,h,f=e,d=0,m={},y=-1;!1!==d&&-1!==(d=r.unescapedIndexOf(t,"=",d+1));){if(0==(c=t.substr(f+1,d-f-1)).length)throw new n("Empty parameter name in '"+t+"'");if(l=c.toLowerCase(),u=!1,s=!1,o=l in a.param&&a.param[l].valueType?a.param[l].valueType:"text",l in a.param&&(s=a.param[l].multiValue,a.param[l].multiValueSeparateDQuote&&(u=i._rfc6868Escape('"'+s+'"'))),'"'===t[d+1]){if(y=d+2,d=r.unescapedIndexOf(t,'"',y),s&&-1!=d)for(var v=!0;v;)t[d+1]==s&&'"'==t[d+2]?d=r.unescapedIndexOf(t,'"',d+3):v=!1;if(-1===d)throw new n('invalid line (no matching double quote) "'+t+'"');h=t.substr(y,d-y),-1===(f=r.unescapedIndexOf(t,";",d))&&(d=!1)}else{y=d+1;var g=r.unescapedIndexOf(t,";",y),b=r.unescapedIndexOf(t,":",y);-1!==b&&g>b?(g=b,d=!1):-1===g?(g=-1===b?t.length:b,d=!1):(f=g,d=g),h=t.substr(y,g-y)}if(h=i._rfc6868Escape(h),s){var _=u||s;h=i._parseMultiValue(h,_,o,[],null,a)}else h=i._parseValue(h,o,a);s&&l in m?Array.isArray(m[l])?m[l].push(h):m[l]=[m[l],h]:m[l]=h}return[m,h,y]},i._rfc6868Escape=function(t){return t.replace(/\^['n^]/g,function(t){return a[t]})};var a={"^'":'"',"^n":"\n","^^":"^"};return i._parseMultiValue=function(t,e,n,a,o,s,u){var c,l=0,h=0;if(0===e.length)return t;for(;-1!==(l=r.unescapedIndexOf(t,e,h));)c=t.substr(h,l-h),c=o?i._parseMultiValue(c,o,n,[],null,s,u):i._parseValue(c,n,s,u),a.push(c),h=l+e.length;return c=t.substr(h),c=o?i._parseMultiValue(c,o,n,[],null,s,u):i._parseValue(c,n,s,u),a.push(c),1==a.length?a[0]:a},i._eachLine=function(e,r){var n,i,a,o=e.length,s=e.search(t),u=s;do a=(u=e.indexOf("\n",s)+1)>1&&"\r"===e[u-2]?2:1,0===u&&(u=o,a=0)," "===(i=e[s])||"	"===i?n+=e.substr(s+1,u-s-(a+1)):(n&&r(null,n),n=e.substr(s,u-s-a)),s=u;while(u!==o)(n=n.trim()).length&&r(null,n)},i}(),tf.Component=function(){function t(t,e){"string"==typeof t&&(t=[t,[],[]]),this.jCal=t,this.parent=e||null}return t.prototype={_hydratedPropertyCount:0,_hydratedComponentCount:0,get name(){return this.jCal[0]},get _designSet(){return this.parent&&this.parent._designSet||tf.design.getDesignSet(this.name)},_hydrateComponent:function(e){if(this._components||(this._components=[],this._hydratedComponentCount=0),this._components[e])return this._components[e];var r=new t(this.jCal[2][e],this);return this._hydratedComponentCount++,this._components[e]=r},_hydrateProperty:function(t){if(this._properties||(this._properties=[],this._hydratedPropertyCount=0),this._properties[t])return this._properties[t];var e=new tf.Property(this.jCal[1][t],this);return this._hydratedPropertyCount++,this._properties[t]=e},getFirstSubcomponent:function(t){if(t){for(var e=0,r=this.jCal[2],n=r.length;e<n;e++)if(r[e][0]===t)return this._hydrateComponent(e)}else if(this.jCal[2].length)return this._hydrateComponent(0);return null},getAllSubcomponents:function(t){var e=this.jCal[2].length,r=0;if(t){for(var n=this.jCal[2],i=[];r<e;r++)t===n[r][0]&&i.push(this._hydrateComponent(r));return i}if(!this._components||this._hydratedComponentCount!==e)for(;r<e;r++)this._hydrateComponent(r);return this._components||[]},hasProperty:function(t){for(var e=this.jCal[1],r=e.length,n=0;n<r;n++)if(e[n][0]===t)return!0;return!1},getFirstProperty:function(t){if(t){for(var e=0,r=this.jCal[1],n=r.length;e<n;e++)if(r[e][0]===t)return this._hydrateProperty(e)}else if(this.jCal[1].length)return this._hydrateProperty(0);return null},getFirstPropertyValue:function(t){var e=this.getFirstProperty(t);return e?e.getFirstValue():null},getAllProperties:function(t){var e=this.jCal[1].length,r=0;if(t){for(var n=this.jCal[1],i=[];r<e;r++)t===n[r][0]&&i.push(this._hydrateProperty(r));return i}if(!this._properties||this._hydratedPropertyCount!==e)for(;r<e;r++)this._hydrateProperty(r);return this._properties||[]},_removeObjectByIndex:function(t,e,r){if((e=e||[])[r]){var n=e[r];"parent"in n&&(n.parent=null)}e.splice(r,1),this.jCal[t].splice(r,1)},_removeObject:function(t,e,r){var n=0,i=this.jCal[t],a=i.length,o=this[e];if("string"==typeof r){for(;n<a;n++)if(i[n][0]===r)return this._removeObjectByIndex(t,o,n),!0}else if(o){for(;n<a;n++)if(o[n]&&o[n]===r)return this._removeObjectByIndex(t,o,n),!0}return!1},_removeAllObjects:function(t,e,r){for(var n=this[e],i=this.jCal[t],a=i.length-1;a>=0;a--)r&&i[a][0]!==r||this._removeObjectByIndex(t,n,a)},addSubcomponent:function(t){this._components||(this._components=[],this._hydratedComponentCount=0),t.parent&&t.parent.removeSubcomponent(t);var e=this.jCal[2].push(t.jCal);return this._components[e-1]=t,this._hydratedComponentCount++,t.parent=this,t},removeSubcomponent:function(t){var e=this._removeObject(2,"_components",t);return e&&this._hydratedComponentCount--,e},removeAllSubcomponents:function(t){var e=this._removeAllObjects(2,"_components",t);return this._hydratedComponentCount=0,e},addProperty:function(t){if(!(t instanceof tf.Property))throw TypeError("must instance of ICAL.Property");this._properties||(this._properties=[],this._hydratedPropertyCount=0),t.parent&&t.parent.removeProperty(t);var e=this.jCal[1].push(t.jCal);return this._properties[e-1]=t,this._hydratedPropertyCount++,t.parent=this,t},addPropertyWithValue:function(t,e){var r=new tf.Property(t);return r.setValue(e),this.addProperty(r),r},updatePropertyWithValue:function(t,e){var r=this.getFirstProperty(t);return r?r.setValue(e):r=this.addPropertyWithValue(t,e),r},removeProperty:function(t){var e=this._removeObject(1,"_properties",t);return e&&this._hydratedPropertyCount--,e},removeAllProperties:function(t){var e=this._removeAllObjects(1,"_properties",t);return this._hydratedPropertyCount=0,e},toJSON:function(){return this.jCal},toString:function(){return tf.stringify.component(this.jCal,this._designSet)}},t.fromString=function(e){return new t(tf.parse.component(e))},t}(),tf.Property=function(){var t=tf.design;function e(e,r){this._parent=r||null,"string"==typeof e?(this.jCal=[e,{},t.defaultType],this.jCal[2]=this.getDefaultType()):this.jCal=e,this._updateType()}return e.prototype={get type(){return this.jCal[2]},get name(){return this.jCal[0]},get parent(){return this._parent},set parent(p){var r=!this._parent||p&&p._designSet!=this._parent._designSet;return this._parent=p,this.type==t.defaultType&&r&&(this.jCal[2]=this.getDefaultType(),this._updateType()),p},get _designSet(){return this.parent?this.parent._designSet:t.defaultSet},_updateType:function(){var t=this._designSet;this.type in t.value&&(t.value[this.type],"decorate"in t.value[this.type]?this.isDecorated=!0:this.isDecorated=!1,this.name in t.property&&(this.isMultiValue="multiValue"in t.property[this.name],this.isStructuredValue="structuredValue"in t.property[this.name]))},_hydrateValue:function(t){return this._values&&this._values[t]?this._values[t]:this.jCal.length<=3+t?null:this.isDecorated?(this._values||(this._values=[]),this._values[t]=this._decorate(this.jCal[3+t])):this.jCal[3+t]},_decorate:function(t){return this._designSet.value[this.type].decorate(t,this)},_undecorate:function(t){return this._designSet.value[this.type].undecorate(t,this)},_setDecoratedValue:function(t,e){this._values||(this._values=[]),"object"==typeof t&&"icaltype"in t?(this.jCal[3+e]=this._undecorate(t),this._values[e]=t):(this.jCal[3+e]=t,this._values[e]=this._decorate(t))},getParameter:function(t){return t in this.jCal[1]?this.jCal[1][t]:void 0},getFirstParameter:function(t){var e=this.getParameter(t);return Array.isArray(e)?e[0]:e},setParameter:function(t,e){var r=t.toLowerCase();"string"==typeof e&&r in this._designSet.param&&"multiValue"in this._designSet.param[r]&&(e=[e]),this.jCal[1][t]=e},removeParameter:function(t){delete this.jCal[1][t]},getDefaultType:function(){var e=this.jCal[0],r=this._designSet;if(e in r.property){var n=r.property[e];if("defaultType"in n)return n.defaultType}return t.defaultType},resetType:function(t){this.removeAllValues(),this.jCal[2]=t,this._updateType()},getFirstValue:function(){return this._hydrateValue(0)},getValues:function(){var t=this.jCal.length-3;if(t<1)return[];for(var e=0,r=[];e<t;e++)r[e]=this._hydrateValue(e);return r},removeAllValues:function(){this._values&&(this._values.length=0),this.jCal.length=3},setValues:function(t){if(!this.isMultiValue)throw Error(this.name+": does not not support mulitValue.\noverride isMultiValue");var e=t.length,r=0;if(this.removeAllValues(),e>0&&"object"==typeof t[0]&&"icaltype"in t[0]&&this.resetType(t[0].icaltype),this.isDecorated)for(;r<e;r++)this._setDecoratedValue(t[r],r);else for(;r<e;r++)this.jCal[3+r]=t[r]},setValue:function(t){this.removeAllValues(),"object"==typeof t&&"icaltype"in t&&this.resetType(t.icaltype),this.isDecorated?this._setDecoratedValue(t,0):this.jCal[3]=t},toJSON:function(){return this.jCal},toICALString:function(){return tf.stringify.property(this.jCal,this._designSet,!0)}},e.fromString=function(t,r){return new e(tf.parse.property(t,r))},e}(),tf.UtcOffset=function(){function t(t){this.fromData(t)}return t.prototype={hours:0,minutes:0,factor:1,icaltype:"utc-offset",clone:function(){return tf.UtcOffset.fromSeconds(this.toSeconds())},fromData:function(t){if(t)for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);this._normalize()},fromSeconds:function(t){var e=Math.abs(t);return this.factor=t<0?-1:1,this.hours=tf.helpers.trunc(e/3600),e-=3600*this.hours,this.minutes=tf.helpers.trunc(e/60),this},toSeconds:function(){return this.factor*(60*this.minutes+3600*this.hours)},compare:function(t){var e=this.toSeconds(),r=t.toSeconds();return(e>r)-(r>e)},_normalize:function(){for(var t=this.toSeconds(),e=this.factor;t<-43200;)t+=97200;for(;t>50400;)t-=97200;this.fromSeconds(t),0==t&&(this.factor=e)},toICALString:function(){return tf.design.icalendar.value["utc-offset"].toICAL(this.toString())},toString:function(){return(1==this.factor?"+":"-")+tf.helpers.pad2(this.hours)+":"+tf.helpers.pad2(this.minutes)}},t.fromString=function(t){var e={};return e.factor="+"===t[0]?1:-1,e.hours=tf.helpers.strictParseInt(t.substr(1,2)),e.minutes=tf.helpers.strictParseInt(t.substr(4,2)),new tf.UtcOffset(e)},t.fromSeconds=function(e){var r=new t;return r.fromSeconds(e),r},t}(),tf.Binary=function(){function t(t){this.value=t}return t.prototype={icaltype:"binary",decodeValue:function(){return this._b64_decode(this.value)},setEncodedValue:function(t){this.value=this._b64_encode(t)},_b64_encode:function(t){var e,r,n,i,a,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",s=0,u=0,c="",l=[];if(!t)return t;do e=(a=t.charCodeAt(s++)<<16|t.charCodeAt(s++)<<8|t.charCodeAt(s++))>>18&63,r=a>>12&63,n=a>>6&63,i=63&a,l[u++]=o.charAt(e)+o.charAt(r)+o.charAt(n)+o.charAt(i);while(s<t.length)c=l.join("");var h=t.length%3;return(h?c.slice(0,h-3):c)+"===".slice(h||3)},_b64_decode:function(t){var e,r,n,i,a,o,s,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c=0,l=0,h=[];if(!t)return t;t+="";do i=u.indexOf(t.charAt(c++)),e=(s=i<<18|u.indexOf(t.charAt(c++))<<12|(a=u.indexOf(t.charAt(c++)))<<6|(o=u.indexOf(t.charAt(c++))))>>16&255,r=s>>8&255,n=255&s,64==a?h[l++]=String.fromCharCode(e):64==o?h[l++]=String.fromCharCode(e,r):h[l++]=String.fromCharCode(e,r,n);while(c<t.length)return h.join("")},toString:function(){return this.value}},t.fromString=function(e){return new t(e)},t}(),tf.Period=function(t){if(this.wrappedJSObject=this,t&&"start"in t){if(t.start&&!(t.start instanceof tf.Time))throw TypeError(".start must be an instance of ICAL.Time");this.start=t.start}if(t&&t.end&&t.duration)throw Error("cannot accept both end and duration");if(t&&"end"in t){if(t.end&&!(t.end instanceof tf.Time))throw TypeError(".end must be an instance of ICAL.Time");this.end=t.end}if(t&&"duration"in t){if(t.duration&&!(t.duration instanceof tf.Duration))throw TypeError(".duration must be an instance of ICAL.Duration");this.duration=t.duration}},tf.Period.prototype={start:null,end:null,duration:null,icalclass:"icalperiod",icaltype:"period",clone:function(){return tf.Period.fromData({start:this.start?this.start.clone():null,end:this.end?this.end.clone():null,duration:this.duration?this.duration.clone():null})},getDuration:function(){return this.duration?this.duration:this.end.subtractDate(this.start)},getEnd:function(){if(this.end)return this.end;var t=this.start.clone();return t.addDuration(this.duration),t},toString:function(){return this.start+"/"+(this.end||this.duration)},toJSON:function(){return[this.start.toString(),(this.end||this.duration).toString()]},toICALString:function(){return this.start.toICALString()+"/"+(this.end||this.duration).toICALString()}},tf.Period.fromString=function(t,e){var r=t.split("/");if(2!==r.length)throw Error('Invalid string value: "'+t+'" must contain a "/" char.');var n={start:tf.Time.fromDateTimeString(r[0],e)},i=r[1];return tf.Duration.isValueString(i)?n.duration=tf.Duration.fromString(i):n.end=tf.Time.fromDateTimeString(i,e),new tf.Period(n)},tf.Period.fromData=function(t){return new tf.Period(t)},tf.Period.fromJSON=function(t,e,r){function n(t,e){return r?tf.Time.fromString(t,e):tf.Time.fromDateTimeString(t,e)}return tf.Duration.isValueString(t[1])?tf.Period.fromData({start:n(t[0],e),duration:tf.Duration.fromString(t[1])}):tf.Period.fromData({start:n(t[0],e),end:n(t[1],e)})},w=/([PDWHMTS]{1,1})/,tf.Duration=function(t){this.wrappedJSObject=this,this.fromData(t)},tf.Duration.prototype={weeks:0,days:0,hours:0,minutes:0,seconds:0,isNegative:!1,icalclass:"icalduration",icaltype:"duration",clone:function(){return tf.Duration.fromData(this)},toSeconds:function(){var t=this.seconds+60*this.minutes+3600*this.hours+86400*this.days+604800*this.weeks;return this.isNegative?-t:t},fromSeconds:function(t){var e=Math.abs(t);return this.isNegative=t<0,this.days=tf.helpers.trunc(e/86400),this.days%7==0?(this.weeks=this.days/7,this.days=0):this.weeks=0,e-=(this.days+7*this.weeks)*86400,this.hours=tf.helpers.trunc(e/3600),e-=3600*this.hours,this.minutes=tf.helpers.trunc(e/60),e-=60*this.minutes,this.seconds=e,this},fromData:function(t){var e=["weeks","days","hours","minutes","seconds","isNegative"];for(var r in e)if(e.hasOwnProperty(r)){var n=e[r];t&&n in t?this[n]=t[n]:this[n]=0}},reset:function(){this.isNegative=!1,this.weeks=0,this.days=0,this.hours=0,this.minutes=0,this.seconds=0},compare:function(t){var e=this.toSeconds(),r=t.toSeconds();return(e>r)-(e<r)},normalize:function(){this.fromSeconds(this.toSeconds())},toString:function(){if(0==this.toSeconds())return"PT0S";var t="";return this.isNegative&&(t+="-"),t+="P",this.weeks&&(t+=this.weeks+"W"),this.days&&(t+=this.days+"D"),(this.hours||this.minutes||this.seconds)&&(t+="T",this.hours&&(t+=this.hours+"H"),this.minutes&&(t+=this.minutes+"M"),this.seconds&&(t+=this.seconds+"S")),t},toICALString:function(){return this.toString()}},tf.Duration.fromSeconds=function(t){return new tf.Duration().fromSeconds(t)},tf.Duration.isValueString=function(t){return"P"===t[0]||"P"===t[1]},tf.Duration.fromString=function(t){for(var e=0,r=Object.create(null),n=0;-1!==(e=t.search(w));){var i=t[e],a=t.substr(0,e);t=t.substr(e+1),n+=function(t,e,r){var n;switch(t){case"P":e&&"-"===e?r.isNegative=!0:r.isNegative=!1;break;case"D":n="days";break;case"W":n="weeks";break;case"H":n="hours";break;case"M":n="minutes";break;case"S":n="seconds";break;default:return 0}if(n){if(!e&&0!==e)throw Error('invalid duration value: Missing number before "'+t+'"');var i=parseInt(e,10);if(tf.helpers.isStrictlyNaN(i))throw Error('invalid duration value: Invalid number "'+e+'" before "'+t+'"');r[n]=i}return 1}(i,a,r)}if(n<2)throw Error('invalid duration value: Not enough duration components in "'+t+'"');return new tf.Duration(r)},tf.Duration.fromData=function(t){return new tf.Duration(t)},D=["tzid","location","tznames","latitude","longitude"],tf.Timezone=function(t){this.wrappedJSObject=this,this.fromData(t)},tf.Timezone.prototype={tzid:"",location:"",tznames:"",latitude:0,longitude:0,component:null,expandedUntilYear:0,icalclass:"icaltimezone",fromData:function(t){if(this.expandedUntilYear=0,this.changes=[],t instanceof tf.Component)this.component=t;else{if(t&&"component"in t){if("string"==typeof t.component){var e=tf.parse(t.component);this.component=new tf.Component(e)}else t.component instanceof tf.Component?this.component=t.component:this.component=null}for(var r in D)if(D.hasOwnProperty(r)){var n=D[r];t&&n in t&&(this[n]=t[n])}}return this.component instanceof tf.Component&&!this.tzid&&(this.tzid=this.component.getFirstPropertyValue("tzid")),this},utcOffset:function(t){if(this==tf.Timezone.utcTimezone||this==tf.Timezone.localTimezone||(this._ensureCoverage(t.year),!this.changes.length))return 0;for(var e={year:t.year,month:t.month,day:t.day,hour:t.hour,minute:t.minute,second:t.second},r=this._findNearbyChange(e),n=-1,i=1;;){var a=tf.helpers.clone(this.changes[r],!0);if(a.utcOffset<a.prevUtcOffset?tf.Timezone.adjust_change(a,0,0,0,a.utcOffset):tf.Timezone.adjust_change(a,0,0,0,a.prevUtcOffset),tf.Timezone._compare_change_fn(e,a)>=0?n=r:i=-1,-1==i&&-1!=n)break;if((r+=i)<0)return 0;if(r>=this.changes.length)break}var o=this.changes[n];if(o.utcOffset-o.prevUtcOffset<0&&n>0){var s=tf.helpers.clone(o,!0);if(tf.Timezone.adjust_change(s,0,0,0,s.prevUtcOffset),0>tf.Timezone._compare_change_fn(e,s)){var u=this.changes[n-1];!1!=o.is_daylight&&!1==u.is_daylight&&(o=u)}}return o.utcOffset},_findNearbyChange:function(t){var e=tf.helpers.binsearchInsert(this.changes,t,tf.Timezone._compare_change_fn);return e>=this.changes.length?this.changes.length-1:e},_ensureCoverage:function(t){if(-1==tf.Timezone._minimumExpansionYear){var e=tf.Time.now();tf.Timezone._minimumExpansionYear=e.year}var r=t;if(r<tf.Timezone._minimumExpansionYear&&(r=tf.Timezone._minimumExpansionYear),(r+=tf.Timezone.EXTRA_COVERAGE)>tf.Timezone.MAX_YEAR&&(r=tf.Timezone.MAX_YEAR),!this.changes.length||this.expandedUntilYear<t){for(var n=this.component.getAllSubcomponents(),i=n.length,a=0;a<i;a++)this._expandComponent(n[a],r,this.changes);this.changes.sort(tf.Timezone._compare_change_fn),this.expandedUntilYear=r}},_expandComponent:function(t,e,r){if(!t.hasProperty("dtstart")||!t.hasProperty("tzoffsetto")||!t.hasProperty("tzoffsetfrom"))return null;var n=t.getFirstProperty("dtstart").getFirstValue();function i(t){return t.factor*(3600*t.hours+60*t.minutes)}function a(){var e={};return e.is_daylight="daylight"==t.name,e.utcOffset=i(t.getFirstProperty("tzoffsetto").getFirstValue()),e.prevUtcOffset=i(t.getFirstProperty("tzoffsetfrom").getFirstValue()),e}if(t.hasProperty("rrule")||t.hasProperty("rdate")){var o=t.getAllProperties("rdate");for(var s in o)if(o.hasOwnProperty(s)){var u=o[s].getFirstValue();(l=a()).year=u.year,l.month=u.month,l.day=u.day,u.isDate?(l.hour=n.hour,l.minute=n.minute,l.second=n.second,n.zone!=tf.Timezone.utcTimezone&&tf.Timezone.adjust_change(l,0,0,0,-l.prevUtcOffset)):(l.hour=u.hour,l.minute=u.minute,l.second=u.second,u.zone!=tf.Timezone.utcTimezone&&tf.Timezone.adjust_change(l,0,0,0,-l.prevUtcOffset)),r.push(l)}var c=t.getFirstProperty("rrule");if(c){c=c.getFirstValue(),l=a(),c.until&&c.until.zone==tf.Timezone.utcTimezone&&(c.until.adjust(0,0,0,l.prevUtcOffset),c.until.zone=tf.Timezone.localTimezone);for(var l,h,f=c.iterator(n);(h=f.next())&&(l=a(),!(h.year>e)&&h);)l.year=h.year,l.month=h.month,l.day=h.day,l.hour=h.hour,l.minute=h.minute,l.second=h.second,l.isDate=h.isDate,tf.Timezone.adjust_change(l,0,0,0,-l.prevUtcOffset),r.push(l)}}else(l=a()).year=n.year,l.month=n.month,l.day=n.day,l.hour=n.hour,l.minute=n.minute,l.second=n.second,tf.Timezone.adjust_change(l,0,0,0,-l.prevUtcOffset),r.push(l);return r},toString:function(){return this.tznames?this.tznames:this.tzid}},tf.Timezone._compare_change_fn=function(t,e){return t.year<e.year?-1:t.year>e.year?1:t.month<e.month?-1:t.month>e.month?1:t.day<e.day?-1:t.day>e.day?1:t.hour<e.hour?-1:t.hour>e.hour?1:t.minute<e.minute?-1:t.minute>e.minute?1:t.second<e.second?-1:t.second>e.second?1:0},tf.Timezone.convert_time=function(t,e,r){if(t.isDate||e.tzid==r.tzid||e==tf.Timezone.localTimezone||r==tf.Timezone.localTimezone)return t.zone=r,t;var n=e.utcOffset(t);return t.adjust(0,0,0,-n),n=r.utcOffset(t),t.adjust(0,0,0,n),null},tf.Timezone.fromData=function(t){return new tf.Timezone().fromData(t)},tf.Timezone.utcTimezone=tf.Timezone.fromData({tzid:"UTC"}),tf.Timezone.localTimezone=tf.Timezone.fromData({tzid:"floating"}),tf.Timezone.adjust_change=function(t,e,r,n,i){return tf.Time.prototype.adjust.call(t,e,r,n,i,t)},tf.Timezone._minimumExpansionYear=-1,tf.Timezone.MAX_YEAR=2035,tf.Timezone.EXTRA_COVERAGE=5,tf.TimezoneService=((C={get count(){return Object.keys(O).length},reset:function(){O=Object.create(null);var t=tf.Timezone.utcTimezone;O.Z=t,O.UTC=t,O.GMT=t},has:function(t){return!!O[t]},get:function(t){return O[t]},register:function(t,e){if(t instanceof tf.Component&&"vtimezone"===t.name&&(t=(e=new tf.Timezone(t)).tzid),e instanceof tf.Timezone)O[t]=e;else throw TypeError("timezone must be ICAL.Timezone or ICAL.Component")},remove:function(t){return delete O[t]}}).reset(),C),tf.Time=function(t,e){this.wrappedJSObject=this;var r=this._time=Object.create(null);r.year=0,r.month=1,r.day=1,r.hour=0,r.minute=0,r.second=0,r.isDate=!1,this.fromData(t,e)},tf.Time._dowCache={},tf.Time._wnCache={},tf.Time.prototype={icalclass:"icaltime",_cachedUnixTime:null,get icaltype(){return this.isDate?"date":"date-time"},zone:null,_pendingNormalization:!1,clone:function(){return new tf.Time(this._time,this.zone)},reset:function(){this.fromData(tf.Time.epochTime),this.zone=tf.Timezone.utcTimezone},resetTo:function(t,e,r,n,i,a,o){this.fromData({year:t,month:e,day:r,hour:n,minute:i,second:a,zone:o})},fromJSDate:function(t,e){return t?e?(this.zone=tf.Timezone.utcTimezone,this.year=t.getUTCFullYear(),this.month=t.getUTCMonth()+1,this.day=t.getUTCDate(),this.hour=t.getUTCHours(),this.minute=t.getUTCMinutes(),this.second=t.getUTCSeconds()):(this.zone=tf.Timezone.localTimezone,this.year=t.getFullYear(),this.month=t.getMonth()+1,this.day=t.getDate(),this.hour=t.getHours(),this.minute=t.getMinutes(),this.second=t.getSeconds()):this.reset(),this._cachedUnixTime=null,this},fromData:function(t,e){if(t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if("icaltype"===r)continue;this[r]=t[r]}}if(e&&(this.zone=e),!t||"isDate"in t?t&&"isDate"in t&&(this.isDate=t.isDate):this.isDate=!("hour"in t),t&&"timezone"in t){var n=tf.TimezoneService.get(t.timezone);this.zone=n||tf.Timezone.localTimezone}return t&&"zone"in t&&(this.zone=t.zone),this.zone||(this.zone=tf.Timezone.localTimezone),this._cachedUnixTime=null,this},dayOfWeek:function(t){var e=t||tf.Time.SUNDAY,r=(this.year<<12)+(this.month<<8)+(this.day<<3)+e;if(r in tf.Time._dowCache)return tf.Time._dowCache[r];var n=this.day,i=this.month+(this.month<3?12:0),a=this.year-(this.month<3?1:0),o=n+a+tf.helpers.trunc((i+1)*26/10)+tf.helpers.trunc(a/4);return o+=6*tf.helpers.trunc(a/100)+tf.helpers.trunc(a/400),o=(o+7-e)%7+1,tf.Time._dowCache[r]=o,o},dayOfYear:function(){var t=tf.Time.isLeapYear(this.year)?1:0;return tf.Time.daysInYearPassedMonth[t][this.month-1]+this.day},startOfWeek:function(t){var e=t||tf.Time.SUNDAY,r=this.clone();return r.day-=(this.dayOfWeek()+7-e)%7,r.isDate=!0,r.hour=0,r.minute=0,r.second=0,r},endOfWeek:function(t){var e=t||tf.Time.SUNDAY,r=this.clone();return r.day+=(7-this.dayOfWeek()+e-tf.Time.SUNDAY)%7,r.isDate=!0,r.hour=0,r.minute=0,r.second=0,r},startOfMonth:function(){var t=this.clone();return t.day=1,t.isDate=!0,t.hour=0,t.minute=0,t.second=0,t},endOfMonth:function(){var t=this.clone();return t.day=tf.Time.daysInMonth(t.month,t.year),t.isDate=!0,t.hour=0,t.minute=0,t.second=0,t},startOfYear:function(){var t=this.clone();return t.day=1,t.month=1,t.isDate=!0,t.hour=0,t.minute=0,t.second=0,t},endOfYear:function(){var t=this.clone();return t.day=31,t.month=12,t.isDate=!0,t.hour=0,t.minute=0,t.second=0,t},startDoyWeek:function(t){var e=t||tf.Time.SUNDAY,r=this.dayOfWeek()-e;return r<0&&(r+=7),this.dayOfYear()-r},getDominicalLetter:function(){return tf.Time.getDominicalLetter(this.year)},nthWeekDay:function(t,e){var r,n=tf.Time.daysInMonth(this.month,this.year),i=e,a=0,o=this.clone();if(i>=0){o.day=1,0!=i&&i--,a=o.day;var s=t-o.dayOfWeek();s<0&&(s+=7),a+=s,a-=t,r=t}else{o.day=n;var u=o.dayOfWeek();i++,(r=u-t)<0&&(r+=7),r=n-r}return a+(r+=7*i)},isNthWeekDay:function(t,e){var r=this.dayOfWeek();return 0===e&&r===t||this.nthWeekDay(t,e)===this.day},weekNumber:function(t){var e,r=(this.year<<12)+(this.month<<8)+(this.day<<3)+t;if(r in tf.Time._wnCache)return tf.Time._wnCache[r];var n=this.clone();n.isDate=!0;var i=this.year;12==n.month&&n.day>25?(e=tf.Time.weekOneStarts(i+1,t),0>n.compare(e)?e=tf.Time.weekOneStarts(i,t):i++):(e=tf.Time.weekOneStarts(i,t),0>n.compare(e)&&(e=tf.Time.weekOneStarts(--i,t)));var a=n.subtractDate(e).toSeconds()/86400,o=tf.helpers.trunc(a/7)+1;return tf.Time._wnCache[r]=o,o},addDuration:function(t){var e=t.isNegative?-1:1,r=this.second,n=this.minute,i=this.hour,a=this.day;r+=e*t.seconds,n+=e*t.minutes,i+=e*t.hours,a+=e*t.days+7*e*t.weeks,this.second=r,this.minute=n,this.hour=i,this.day=a,this._cachedUnixTime=null},subtractDate:function(t){var e=this.toUnixTime()+this.utcOffset(),r=t.toUnixTime()+t.utcOffset();return tf.Duration.fromSeconds(e-r)},subtractDateTz:function(t){var e=this.toUnixTime(),r=t.toUnixTime();return tf.Duration.fromSeconds(e-r)},compare:function(t){var e=this.toUnixTime(),r=t.toUnixTime();return e>r?1:r>e?-1:0},compareDateOnlyTz:function(t,e){function r(t){return tf.Time._cmp_attr(n,i,t)}var n=this.convertToZone(e),i=t.convertToZone(e),a=0;return 0!=(a=r("year"))||0!=(a=r("month"))?a:a=r("day")},convertToZone:function(t){var e=this.clone(),r=this.zone.tzid==t.tzid;return this.isDate||r||tf.Timezone.convert_time(e,this.zone,t),e.zone=t,e},utcOffset:function(){return this.zone==tf.Timezone.localTimezone||this.zone==tf.Timezone.utcTimezone?0:this.zone.utcOffset(this)},toICALString:function(){var t=this.toString();return t.length>10?tf.design.icalendar.value["date-time"].toICAL(t):tf.design.icalendar.value.date.toICAL(t)},toString:function(){var t=this.year+"-"+tf.helpers.pad2(this.month)+"-"+tf.helpers.pad2(this.day);return this.isDate||(t+="T"+tf.helpers.pad2(this.hour)+":"+tf.helpers.pad2(this.minute)+":"+tf.helpers.pad2(this.second),this.zone!==tf.Timezone.utcTimezone||(t+="Z")),t},toJSDate:function(){return this.zone!=tf.Timezone.localTimezone?new Date(1e3*this.toUnixTime()):this.isDate?new Date(this.year,this.month-1,this.day):new Date(this.year,this.month-1,this.day,this.hour,this.minute,this.second,0)},_normalize:function(){return this._time.isDate,this._time.isDate&&(this._time.hour=0,this._time.minute=0,this._time.second=0),this.adjust(0,0,0,0),this},adjust:function(t,e,r,n,i){var a,o,s,u,c,l,h,f=0,d=0,m=i||this._time;if(!m.isDate&&(a=m.second+n,m.second=a%60,l=tf.helpers.trunc(a/60),m.second<0&&(m.second+=60,l--),o=m.minute+r+l,m.minute=o%60,h=tf.helpers.trunc(o/60),m.minute<0&&(m.minute+=60,h--),s=m.hour+e+h,m.hour=s%24,f=tf.helpers.trunc(s/24),m.hour<0&&(m.hour+=24,f--)),m.month>12?d=tf.helpers.trunc((m.month-1)/12):m.month<1&&(d=tf.helpers.trunc(m.month/12)-1),m.year+=d,m.month-=12*d,(u=m.day+t+f)>0)for(;!(u<=(c=tf.Time.daysInMonth(m.month,m.year)));)m.month++,m.month>12&&(m.year++,m.month=1),u-=c;else for(;u<=0;)1==m.month?(m.year--,m.month=12):m.month--,u+=tf.Time.daysInMonth(m.month,m.year);return m.day=u,this._cachedUnixTime=null,this},fromUnixTime:function(t){this.zone=tf.Timezone.utcTimezone;var e=tf.Time.epochTime.clone();e.adjust(0,0,0,t),this.year=e.year,this.month=e.month,this.day=e.day,this.hour=e.hour,this.minute=e.minute,this.second=Math.floor(e.second),this._cachedUnixTime=null},toUnixTime:function(){if(null!==this._cachedUnixTime)return this._cachedUnixTime;var t=this.utcOffset(),e=Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second-t);return this._cachedUnixTime=e/1e3,this._cachedUnixTime},toJSON:function(){for(var t,e=["year","month","day","hour","minute","second","isDate"],r=Object.create(null),n=0,i=e.length;n<i;n++)r[t=e[n]]=this[t];return this.zone&&(r.timezone=this.zone.tzid),r}},function(){function t(t){Object.defineProperty(tf.Time.prototype,t,{get:function(){return this._pendingNormalization&&(this._normalize(),this._pendingNormalization=!1),this._time[t]},set:function(e){return"isDate"===t&&e&&!this._time.isDate&&this.adjust(0,0,0,0),this._cachedUnixTime=null,this._pendingNormalization=!0,this._time[t]=e,e}})}"defineProperty"in Object&&(t("year"),t("month"),t("day"),t("hour"),t("minute"),t("second"),t("isDate"))}(),tf.Time.daysInMonth=function(t,e){var r=30;return t<1||t>12||(r=[0,31,28,31,30,31,30,31,31,30,31,30,31][t],2==t&&(r+=tf.Time.isLeapYear(e))),r},tf.Time.isLeapYear=function(t){return t<=1752?t%4==0:t%4==0&&t%100!=0||t%400==0},tf.Time.fromDayOfYear=function(t,e){var r=e,n=t,i=new tf.Time;i.auto_normalize=!1;var a=tf.Time.isLeapYear(r)?1:0;if(n<1)return r--,a=tf.Time.isLeapYear(r)?1:0,n+=tf.Time.daysInYearPassedMonth[a][12],tf.Time.fromDayOfYear(n,r);if(n>tf.Time.daysInYearPassedMonth[a][12])return a=tf.Time.isLeapYear(r)?1:0,n-=tf.Time.daysInYearPassedMonth[a][12],r++,tf.Time.fromDayOfYear(n,r);i.year=r,i.isDate=!0;for(var o=11;o>=0;o--)if(n>tf.Time.daysInYearPassedMonth[a][o]){i.month=o+1,i.day=n-tf.Time.daysInYearPassedMonth[a][o];break}return i.auto_normalize=!0,i},tf.Time.fromStringv2=function(t){return new tf.Time({year:parseInt(t.substr(0,4),10),month:parseInt(t.substr(5,2),10),day:parseInt(t.substr(8,2),10),isDate:!0})},tf.Time.fromDateString=function(t){return new tf.Time({year:tf.helpers.strictParseInt(t.substr(0,4)),month:tf.helpers.strictParseInt(t.substr(5,2)),day:tf.helpers.strictParseInt(t.substr(8,2)),isDate:!0})},tf.Time.fromDateTimeString=function(t,e){var r;if(t.length<19)throw Error('invalid date-time value: "'+t+'"');return t[19]&&"Z"===t[19]?r="Z":e&&(r=e.getParameter("tzid")),new tf.Time({year:tf.helpers.strictParseInt(t.substr(0,4)),month:tf.helpers.strictParseInt(t.substr(5,2)),day:tf.helpers.strictParseInt(t.substr(8,2)),hour:tf.helpers.strictParseInt(t.substr(11,2)),minute:tf.helpers.strictParseInt(t.substr(14,2)),second:tf.helpers.strictParseInt(t.substr(17,2)),timezone:r})},tf.Time.fromString=function(t,e){return t.length>10?tf.Time.fromDateTimeString(t,e):tf.Time.fromDateString(t)},tf.Time.fromJSDate=function(t,e){return new tf.Time().fromJSDate(t,e)},tf.Time.fromData=function(t,e){return new tf.Time().fromData(t,e)},tf.Time.now=function(){return tf.Time.fromJSDate(new Date,!1)},tf.Time.weekOneStarts=function(t,e){var r=tf.Time.fromData({year:t,month:1,day:1,isDate:!0}),n=r.dayOfWeek(),i=e||tf.Time.DEFAULT_WEEK_START;return n>tf.Time.THURSDAY&&(r.day+=7),i>tf.Time.THURSDAY&&(r.day-=7),r.day-=n-i,r},tf.Time.getDominicalLetter=function(t){var e="GFEDCBA",r=(t+(t/4|0)+(t/400|0)-(t/100|0)-1)%7;return tf.Time.isLeapYear(t)?e[(r+6)%7]+e[r]:e[r]},tf.Time.epochTime=tf.Time.fromData({year:1970,month:1,day:1,hour:0,minute:0,second:0,isDate:!1,timezone:"Z"}),tf.Time._cmp_attr=function(t,e,r){return t[r]>e[r]?1:t[r]<e[r]?-1:0},tf.Time.daysInYearPassedMonth=[[0,31,59,90,120,151,181,212,243,273,304,334,365],[0,31,60,91,121,152,182,213,244,274,305,335,366]],tf.Time.SUNDAY=1,tf.Time.MONDAY=2,tf.Time.TUESDAY=3,tf.Time.WEDNESDAY=4,tf.Time.THURSDAY=5,tf.Time.FRIDAY=6,tf.Time.SATURDAY=7,tf.Time.DEFAULT_WEEK_START=tf.Time.MONDAY,tf.VCardTime=function(t,e,r){this.wrappedJSObject=this;var n=this._time=Object.create(null);n.year=null,n.month=null,n.day=null,n.hour=null,n.minute=null,n.second=null,this.icaltype=r||"date-and-or-time",this.fromData(t,e)},tf.helpers.inherits(tf.Time,tf.VCardTime,{icalclass:"vcardtime",icaltype:"date-and-or-time",zone:null,clone:function(){return new tf.VCardTime(this._time,this.zone,this.icaltype)},_normalize:function(){return this},utcOffset:function(){return this.zone instanceof tf.UtcOffset?this.zone.toSeconds():tf.Time.prototype.utcOffset.apply(this,arguments)},toICALString:function(){return tf.design.vcard.value[this.icaltype].toICAL(this.toString())},toString:function(){var t,e=tf.helpers.pad2,r=this.year,n=this.month,i=this.day,a=this.hour,o=this.minute,s=this.second,u=null!==n,c=null!==i,l=null!==a,h=null!==o,f=null!==s,d=(null!==r?e(r)+(u||c?"-":""):u||c?"--":"")+(u?e(n):"")+(c?"-"+e(i):""),m=(l?e(a):"-")+(l&&h?":":"")+(h?e(o):"")+(l||h?"":"-")+(h&&f?":":"")+(f?e(s):"");switch(t=this.zone===tf.Timezone.utcTimezone?"Z":this.zone instanceof tf.UtcOffset?this.zone.toString():this.zone===tf.Timezone.localTimezone?"":this.zone instanceof tf.Timezone?tf.UtcOffset.fromSeconds(this.zone.utcOffset(this)).toString():"",this.icaltype){case"time":return m+t;case"date-and-or-time":case"date-time":return d+("--"==m?"":"T"+m+t);case"date":return d}return null}}),tf.VCardTime.fromDateAndOrTimeString=function(t,e){function r(t,e,r){return t?tf.helpers.strictParseInt(t.substr(e,r)):null}var n=t.split("T"),i=n[0],a=n[1],o=a?tf.design.vcard.value.time._splitZone(a):[],s=o[0],u=o[1];tf.helpers.strictParseInt;var c=i?i.length:0,l=u?u.length:0,h=i&&"-"==i[0]&&"-"==i[1],f=u&&"-"==u[0],d={year:h?null:r(i,0,4),month:h&&(4==c||7==c)?r(i,2,2):7==c?r(i,5,2):10==c?r(i,5,2):null,day:5==c?r(i,3,2):7==c&&h?r(i,5,2):10==c?r(i,8,2):null,hour:f?null:r(u,0,2),minute:f&&3==l?r(u,1,2):l>4?r(u,f?1:3,2):null,second:4==l?r(u,2,2):6==l?r(u,4,2):8==l?r(u,6,2):null};return s="Z"==s?tf.Timezone.utcTimezone:s&&":"==s[3]?tf.UtcOffset.fromString(s):null,new tf.VCardTime(d,s,e)},function(){var t={SU:tf.Time.SUNDAY,MO:tf.Time.MONDAY,TU:tf.Time.TUESDAY,WE:tf.Time.WEDNESDAY,TH:tf.Time.THURSDAY,FR:tf.Time.FRIDAY,SA:tf.Time.SATURDAY},e={};for(var r in t)t.hasOwnProperty(r)&&(e[t[r]]=r);function n(t,e,r,n){var i=n;if("+"===n[0]&&(i=n.substr(1)),i=tf.helpers.strictParseInt(i),void 0!==e&&n<e)throw Error(t+': invalid value "'+n+'" must be > '+e);if(void 0!==r&&n>r)throw Error(t+': invalid value "'+n+'" must be < '+e);return i}tf.Recur=function(t){this.wrappedJSObject=this,this.parts={},t&&"object"==typeof t&&this.fromData(t)},tf.Recur.prototype={parts:null,interval:1,wkst:tf.Time.MONDAY,until:null,count:null,freq:null,icalclass:"icalrecur",icaltype:"recur",iterator:function(t){return new tf.RecurIterator({rule:this,dtstart:t})},clone:function(){return new tf.Recur(this.toJSON())},isFinite:function(){return!!(this.count||this.until)},isByCount:function(){return!!(this.count&&!this.until)},addComponent:function(t,e){var r=t.toUpperCase();r in this.parts?this.parts[r].push(e):this.parts[r]=[e]},setComponent:function(t,e){this.parts[t.toUpperCase()]=e.slice()},getComponent:function(t){var e=t.toUpperCase();return e in this.parts?this.parts[e].slice():[]},getNextOccurrence:function(t,e){var r,n=this.iterator(t);do r=n.next();while(r&&0>=r.compare(e))return r&&e.zone&&(r.zone=e.zone),r},fromData:function(t){for(var e in t){var r=e.toUpperCase();r in u?Array.isArray(t[e])?this.parts[r]=t[e]:this.parts[r]=[t[e]]:this[e]=t[e]}this.interval&&"number"!=typeof this.interval&&s.INTERVAL(this.interval,this),this.wkst&&"number"!=typeof this.wkst&&(this.wkst=tf.Recur.icalDayToNumericDay(this.wkst)),!this.until||this.until instanceof tf.Time||(this.until=tf.Time.fromString(this.until))},toJSON:function(){var t=Object.create(null);for(var e in t.freq=this.freq,this.count&&(t.count=this.count),this.interval>1&&(t.interval=this.interval),this.parts)if(this.parts.hasOwnProperty(e)){var r=this.parts[e];Array.isArray(r)&&1==r.length?t[e.toLowerCase()]=r[0]:t[e.toLowerCase()]=tf.helpers.clone(this.parts[e])}return this.until&&(t.until=this.until.toString()),"wkst"in this&&this.wkst!==tf.Time.DEFAULT_WEEK_START&&(t.wkst=tf.Recur.numericDayToIcalDay(this.wkst)),t},toString:function(){var t="FREQ="+this.freq;for(var e in this.count&&(t+=";COUNT="+this.count),this.interval>1&&(t+=";INTERVAL="+this.interval),this.parts)this.parts.hasOwnProperty(e)&&(t+=";"+e+"="+this.parts[e]);return this.until&&(t+=";UNTIL="+this.until.toICALString()),"wkst"in this&&this.wkst!==tf.Time.DEFAULT_WEEK_START&&(t+=";WKST="+tf.Recur.numericDayToIcalDay(this.wkst)),t}},tf.Recur.icalDayToNumericDay=function(e,r){var n=r||tf.Time.SUNDAY;return(t[e]-n+7)%7+1},tf.Recur.numericDayToIcalDay=function(t,r){var n=t+(r||tf.Time.SUNDAY)-tf.Time.SUNDAY;return n>7&&(n-=7),e[n]};var i=/^(SU|MO|TU|WE|TH|FR|SA)$/,a=/^([+-])?(5[0-3]|[1-4][0-9]|[1-9])?(SU|MO|TU|WE|TH|FR|SA)$/,o=["SECONDLY","MINUTELY","HOURLY","DAILY","WEEKLY","MONTHLY","YEARLY"],s={FREQ:function(t,e,r){if(-1!==o.indexOf(t))e.freq=t;else throw Error('invalid frequency "'+t+'" expected: "'+o.join(", ")+'"')},COUNT:function(t,e,r){e.count=tf.helpers.strictParseInt(t)},INTERVAL:function(t,e,r){e.interval=tf.helpers.strictParseInt(t),e.interval<1&&(e.interval=1)},UNTIL:function(t,e,r){t.length>10?e.until=tf.design.icalendar.value["date-time"].fromICAL(t):e.until=tf.design.icalendar.value.date.fromICAL(t),r||(e.until=tf.Time.fromString(e.until))},WKST:function(t,e,r){if(i.test(t))e.wkst=tf.Recur.icalDayToNumericDay(t);else throw Error('invalid WKST value "'+t+'"')}},u={BYSECOND:n.bind(this,"BYSECOND",0,60),BYMINUTE:n.bind(this,"BYMINUTE",0,59),BYHOUR:n.bind(this,"BYHOUR",0,23),BYDAY:function(t){if(a.test(t))return t;throw Error('invalid BYDAY value "'+t+'"')},BYMONTHDAY:n.bind(this,"BYMONTHDAY",-31,31),BYYEARDAY:n.bind(this,"BYYEARDAY",-366,366),BYWEEKNO:n.bind(this,"BYWEEKNO",-53,53),BYMONTH:n.bind(this,"BYMONTH",1,12),BYSETPOS:n.bind(this,"BYSETPOS",-366,366)};tf.Recur.fromString=function(t){var e=tf.Recur._stringToData(t,!1);return new tf.Recur(e)},tf.Recur.fromData=function(t){return new tf.Recur(t)},tf.Recur._stringToData=function(t,e){for(var r=Object.create(null),n=t.split(";"),i=n.length,a=0;a<i;a++){var o=n[a].split("="),c=o[0].toUpperCase(),l=o[0].toLowerCase(),h=e?l:c,f=o[1];if(c in u){for(var d=f.split(","),m=0,y=d.length;m<y;m++)d[m]=u[c](d[m]);r[h]=1==d.length?d[0]:d}else c in s?s[c](f,r,e):r[l]=f}return r}}(),tf.RecurIterator=function(){function t(t){this.fromData(t)}return t.prototype={completed:!1,rule:null,dtstart:null,last:null,occurrence_number:0,by_indices:null,initialized:!1,by_data:null,days:null,days_index:0,fromData:function(t){if(this.rule=tf.helpers.formatClassType(t.rule,tf.Recur),!this.rule)throw Error("iterator requires a (ICAL.Recur) rule");if(this.dtstart=tf.helpers.formatClassType(t.dtstart,tf.Time),!this.dtstart)throw Error("iterator requires a (ICAL.Time) dtstart");t.by_data?this.by_data=t.by_data:this.by_data=tf.helpers.clone(this.rule.parts,!0),t.occurrence_number&&(this.occurrence_number=t.occurrence_number),this.days=t.days||[],t.last&&(this.last=tf.helpers.formatClassType(t.last,tf.Time)),this.by_indices=t.by_indices,this.by_indices||(this.by_indices={BYSECOND:0,BYMINUTE:0,BYHOUR:0,BYDAY:0,BYMONTH:0,BYWEEKNO:0,BYMONTHDAY:0}),this.initialized=t.initialized||!1,this.initialized||this.init()},init:function(){this.initialized=!0,this.last=this.dtstart.clone();var t=this.by_data;if("BYDAY"in t&&this.sort_byday_rules(t.BYDAY),"BYYEARDAY"in t&&("BYMONTH"in t||"BYWEEKNO"in t||"BYMONTHDAY"in t||"BYDAY"in t))throw Error("Invalid BYYEARDAY rule");if("BYWEEKNO"in t&&"BYMONTHDAY"in t)throw Error("BYWEEKNO does not fit to BYMONTHDAY");if("MONTHLY"==this.rule.freq&&("BYYEARDAY"in t||"BYWEEKNO"in t))throw Error("For MONTHLY recurrences neither BYYEARDAY nor BYWEEKNO may appear");if("WEEKLY"==this.rule.freq&&("BYYEARDAY"in t||"BYMONTHDAY"in t))throw Error("For WEEKLY recurrences neither BYMONTHDAY nor BYYEARDAY may appear");if("YEARLY"!=this.rule.freq&&"BYYEARDAY"in t)throw Error("BYYEARDAY may only appear in YEARLY rules");if(this.last.second=this.setup_defaults("BYSECOND","SECONDLY",this.dtstart.second),this.last.minute=this.setup_defaults("BYMINUTE","MINUTELY",this.dtstart.minute),this.last.hour=this.setup_defaults("BYHOUR","HOURLY",this.dtstart.hour),this.last.day=this.setup_defaults("BYMONTHDAY","DAILY",this.dtstart.day),this.last.month=this.setup_defaults("BYMONTH","MONTHLY",this.dtstart.month),"WEEKLY"==this.rule.freq){if("BYDAY"in t){var e=this.ruleDayOfWeek(t.BYDAY[0],this.rule.wkst),r=e[0],n=e[1],i=n-this.last.dayOfWeek(this.rule.wkst);(this.last.dayOfWeek(this.rule.wkst)<n&&i>=0||i<0)&&(this.last.day+=i)}else{var a=tf.Recur.numericDayToIcalDay(this.dtstart.dayOfWeek());t.BYDAY=[a]}}if("YEARLY"==this.rule.freq){for(;this.expand_year_days(this.last.year),!(this.days.length>0);)this.increment_year(this.rule.interval);this._nextByYearDay()}if("MONTHLY"==this.rule.freq&&this.has_by_data("BYDAY")){var o=null,s=this.last.clone(),u=tf.Time.daysInMonth(this.last.month,this.last.year);for(var c in this.by_data.BYDAY)if(this.by_data.BYDAY.hasOwnProperty(c)){this.last=s.clone();var e=this.ruleDayOfWeek(this.by_data.BYDAY[c]),r=e[0],n=e[1],l=this.last.nthWeekDay(n,r);if(r>=6||r<=-6)throw Error("Malformed values in BYDAY part");if(l>u||l<=0){if(o&&o.month==s.month)continue;for(;l>u||l<=0;)this.increment_month(),u=tf.Time.daysInMonth(this.last.month,this.last.year),l=this.last.nthWeekDay(n,r)}this.last.day=l,(!o||0>this.last.compare(o))&&(o=this.last.clone())}if(this.last=o.clone(),this.has_by_data("BYMONTHDAY")&&this._byDayAndMonthDay(!0),this.last.day>u||0==this.last.day)throw Error("Malformed values in BYDAY part")}else if(this.has_by_data("BYMONTHDAY")&&this.last.day<0){var u=tf.Time.daysInMonth(this.last.month,this.last.year);this.last.day=u+this.last.day+1}},next:function(){var t,e=this.last?this.last.clone():null;if(this.rule.count&&this.occurrence_number>=this.rule.count||this.rule.until&&this.last.compare(this.rule.until)>0)return this.completed=!0,null;if(0==this.occurrence_number&&this.last.compare(this.dtstart)>=0)return this.occurrence_number++,this.last;do switch(t=1,this.rule.freq){case"SECONDLY":this.next_second();break;case"MINUTELY":this.next_minute();break;case"HOURLY":this.next_hour();break;case"DAILY":this.next_day();break;case"WEEKLY":this.next_week();break;case"MONTHLY":t=this.next_month();break;case"YEARLY":this.next_year();break;default:return null}while(!this.check_contracting_rules()||0>this.last.compare(this.dtstart)||!t)if(0==this.last.compare(e))throw Error("Same occurrence found twice, protecting you from death by recursion");return this.rule.until&&this.last.compare(this.rule.until)>0?(this.completed=!0,null):(this.occurrence_number++,this.last)},next_second:function(){return this.next_generic("BYSECOND","SECONDLY","second","minute")},increment_second:function(t){return this.increment_generic(t,"second",60,"minute")},next_minute:function(){return this.next_generic("BYMINUTE","MINUTELY","minute","hour","next_second")},increment_minute:function(t){return this.increment_generic(t,"minute",60,"hour")},next_hour:function(){return this.next_generic("BYHOUR","HOURLY","hour","monthday","next_minute")},increment_hour:function(t){this.increment_generic(t,"hour",24,"monthday")},next_day:function(){this.by_data;var t="DAILY"==this.rule.freq;return 0==this.next_hour()||(t?this.increment_monthday(this.rule.interval):this.increment_monthday(1)),0},next_week:function(){var t=0;if(0==this.next_weekday_by_week())return t;if(this.has_by_data("BYWEEKNO")){++this.by_indices.BYWEEKNO,this.by_indices.BYWEEKNO==this.by_data.BYWEEKNO.length&&(this.by_indices.BYWEEKNO=0,t=1),this.last.month=1,this.last.day=1;var e=this.by_data.BYWEEKNO[this.by_indices.BYWEEKNO];this.last.day+=7*e,t&&this.increment_year(1)}else this.increment_monthday(7*this.rule.interval);return t},normalizeByMonthDayRules:function(t,e,r){for(var n,i=tf.Time.daysInMonth(e,t),a=[],o=0,s=r.length;o<s;o++)if(!(Math.abs(n=r[o])>i)){if(n<0)n=i+(n+1);else if(0===n)continue;-1===a.indexOf(n)&&a.push(n)}return a.sort(function(t,e){return t-e})},_byDayAndMonthDay:function(t){var e,r,n,i,a=this.by_data.BYDAY,o=0,s=a.length,u=0,c=this,l=this.last.day;function h(){for(i=tf.Time.daysInMonth(c.last.month,c.last.year),n=(e=c.normalizeByMonthDayRules(c.last.year,c.last.month,c.by_data.BYMONTHDAY)).length;e[o]<=l&&!(t&&e[o]==l)&&o<n-1;)o++}function f(){l=0,c.increment_month(),o=0,h()}h(),t&&(l-=1);for(var d=48;!u&&d;){if(d--,(r=l+1)>i){f();continue}var m=e[o++];if(m>=r)l=m;else{f();continue}for(var y=0;y<s;y++){var v=this.ruleDayOfWeek(a[y]),g=v[0],b=v[1];if(this.last.day=l,this.last.isNthWeekDay(b,g)){u=1;break}}if(!u&&o===n){f();continue}}if(d<=0)throw Error("Malformed values in BYDAY combined with BYMONTHDAY parts");return u},next_month:function(){this.rule.freq;var t=1;if(0==this.next_hour())return t;if(this.has_by_data("BYDAY")&&this.has_by_data("BYMONTHDAY"))t=this._byDayAndMonthDay();else if(this.has_by_data("BYDAY")){var e=tf.Time.daysInMonth(this.last.month,this.last.year),r=0,n=0;if(this.has_by_data("BYSETPOS")){for(var i=this.last.day,a=1;a<=e;a++)this.last.day=a,this.is_day_in_byday(this.last)&&(n++,a<=i&&r++);this.last.day=i}t=0;for(var a=this.last.day+1;a<=e;a++)if(this.last.day=a,this.is_day_in_byday(this.last)&&(!this.has_by_data("BYSETPOS")||this.check_set_position(++r)||this.check_set_position(r-n-1))){t=1;break}a>e&&(this.last.day=1,this.increment_month(),this.is_day_in_byday(this.last)?(!this.has_by_data("BYSETPOS")||this.check_set_position(1))&&(t=1):t=0)}else if(this.has_by_data("BYMONTHDAY")){this.by_indices.BYMONTHDAY++,this.by_indices.BYMONTHDAY>=this.by_data.BYMONTHDAY.length&&(this.by_indices.BYMONTHDAY=0,this.increment_month());var e=tf.Time.daysInMonth(this.last.month,this.last.year),a=this.by_data.BYMONTHDAY[this.by_indices.BYMONTHDAY];a<0&&(a=e+a+1),a>e?(this.last.day=1,t=this.is_day_in_byday(this.last)):this.last.day=a}else{this.increment_month();var e=tf.Time.daysInMonth(this.last.month,this.last.year);this.by_data.BYMONTHDAY[0]>e?t=0:this.last.day=this.by_data.BYMONTHDAY[0]}return t},next_weekday_by_week:function(){var t=0;if(0==this.next_hour())return t;if(!this.has_by_data("BYDAY"))return 1;for(;;){var e=new tf.Time;this.by_indices.BYDAY++,this.by_indices.BYDAY==Object.keys(this.by_data.BYDAY).length&&(this.by_indices.BYDAY=0,t=1);var r=this.by_data.BYDAY[this.by_indices.BYDAY],n=this.ruleDayOfWeek(r)[1];(n-=this.rule.wkst)<0&&(n+=7),e.year=this.last.year,e.month=this.last.month,e.day=this.last.day;var i=e.startDoyWeek(this.rule.wkst);if(!(n+i<1)||t){var a=tf.Time.fromDayOfYear(i+n,this.last.year);return this.last.year=a.year,this.last.month=a.month,this.last.day=a.day,t}}},next_year:function(){if(0==this.next_hour())return 0;if(++this.days_index==this.days.length){this.days_index=0;do this.increment_year(this.rule.interval),this.expand_year_days(this.last.year);while(0==this.days.length)}return this._nextByYearDay(),1},_nextByYearDay:function(){var t=this.days[this.days_index],e=this.last.year;t<1&&(t+=1,e+=1);var r=tf.Time.fromDayOfYear(t,e);this.last.day=r.day,this.last.month=r.month},ruleDayOfWeek:function(t,e){var r=t.match(/([+-]?[0-9])?(MO|TU|WE|TH|FR|SA|SU)/);return r?[parseInt(r[1]||0,10),t=tf.Recur.icalDayToNumericDay(r[2],e)]:[0,0]},next_generic:function(t,e,r,n,i){var a=t in this.by_data,o=this.rule.freq==e,s=0;if(i&&0==this[i]())return s;if(a){this.by_indices[t]++,this.by_indices[t];var u=this.by_data[t];this.by_indices[t]==u.length&&(this.by_indices[t]=0,s=1),this.last[r]=u[this.by_indices[t]]}else o&&this["increment_"+r](this.rule.interval);return a&&s&&o&&this["increment_"+n](1),s},increment_monthday:function(t){for(var e=0;e<t;e++){var r=tf.Time.daysInMonth(this.last.month,this.last.year);this.last.day++,this.last.day>r&&(this.last.day-=r,this.increment_month())}},increment_month:function(){if(this.last.day=1,this.has_by_data("BYMONTH"))this.by_indices.BYMONTH++,this.by_indices.BYMONTH==this.by_data.BYMONTH.length&&(this.by_indices.BYMONTH=0,this.increment_year(1)),this.last.month=this.by_data.BYMONTH[this.by_indices.BYMONTH];else{"MONTHLY"==this.rule.freq?this.last.month+=this.rule.interval:this.last.month++,this.last.month--;var t=tf.helpers.trunc(this.last.month/12);this.last.month%=12,this.last.month++,0!=t&&this.increment_year(t)}},increment_year:function(t){this.last.year+=t},increment_generic:function(t,e,r,n){this.last[e]+=t;var i=tf.helpers.trunc(this.last[e]/r);this.last[e]%=r,0!=i&&this["increment_"+n](i)},has_by_data:function(t){return t in this.rule.parts},expand_year_days:function(t){var e=new tf.Time;this.days=[];var r={},n=["BYDAY","BYWEEKNO","BYMONTHDAY","BYMONTH","BYYEARDAY"];for(var i in n)if(n.hasOwnProperty(i)){var a=n[i];a in this.rule.parts&&(r[a]=this.rule.parts[a])}if("BYMONTH"in r&&"BYWEEKNO"in r){var o=1,s={};e.year=t,e.isDate=!0;for(var u=0;u<this.by_data.BYMONTH.length;u++){var c=this.by_data.BYMONTH[u];e.month=c,e.day=1;var l=e.weekNumber(this.rule.wkst);e.day=tf.Time.daysInMonth(c,t);var h=e.weekNumber(this.rule.wkst);for(u=l;u<h;u++)s[u]=1}for(var f=0;f<this.by_data.BYWEEKNO.length&&o;f++){var d=this.by_data.BYWEEKNO[f];d<52?o&=s[f]:o=0}o?delete r.BYMONTH:delete r.BYWEEKNO}var m=Object.keys(r).length;if(0==m){var y=this.dtstart.clone();y.year=this.last.year,this.days.push(y.dayOfYear())}else if(1==m&&"BYMONTH"in r){for(var v in this.by_data.BYMONTH)if(this.by_data.BYMONTH.hasOwnProperty(v)){var g=this.dtstart.clone();g.year=t,g.month=this.by_data.BYMONTH[v],g.isDate=!0,this.days.push(g.dayOfYear())}}else if(1==m&&"BYMONTHDAY"in r){for(var b in this.by_data.BYMONTHDAY)if(this.by_data.BYMONTHDAY.hasOwnProperty(b)){var _=this.dtstart.clone(),T=this.by_data.BYMONTHDAY[b];if(T<0){var E=tf.Time.daysInMonth(_.month,t);T=T+E+1}_.day=T,_.year=t,_.isDate=!0,this.days.push(_.dayOfYear())}}else if(2==m&&"BYMONTHDAY"in r&&"BYMONTH"in r){for(var v in this.by_data.BYMONTH)if(this.by_data.BYMONTH.hasOwnProperty(v)){var A=this.by_data.BYMONTH[v],E=tf.Time.daysInMonth(A,t);for(var b in this.by_data.BYMONTHDAY)if(this.by_data.BYMONTHDAY.hasOwnProperty(b)){var T=this.by_data.BYMONTHDAY[b];T<0&&(T=T+E+1),e.day=T,e.month=A,e.year=t,e.isDate=!0,this.days.push(e.dayOfYear())}}}else if(1==m&&"BYWEEKNO"in r);else if(2==m&&"BYWEEKNO"in r&&"BYMONTHDAY"in r);else if(1==m&&"BYDAY"in r)this.days=this.days.concat(this.expand_by_day(t));else if(2==m&&"BYDAY"in r&&"BYMONTH"in r){for(var v in this.by_data.BYMONTH)if(this.by_data.BYMONTH.hasOwnProperty(v)){var c=this.by_data.BYMONTH[v],E=tf.Time.daysInMonth(c,t);e.year=t,e.month=this.by_data.BYMONTH[v],e.day=1,e.isDate=!0;var w=e.dayOfWeek(),D=e.dayOfYear()-1;e.day=E;var O=e.dayOfWeek();if(this.has_by_data("BYSETPOS")){for(var C=[],S=1;S<=E;S++)e.day=S,this.is_day_in_byday(e)&&C.push(S);for(var x=0;x<C.length;x++)(this.check_set_position(x+1)||this.check_set_position(x-C.length))&&this.days.push(D+C[x])}else for(var I in this.by_data.BYDAY)if(this.by_data.BYDAY.hasOwnProperty(I)){var N,Y=this.by_data.BYDAY[I],R=this.ruleDayOfWeek(Y),k=R[0],P=R[1],L=(P+7-w)%7+1,j=E-(O+7-P)%7;if(0==k)for(var S=L;S<=E;S+=7)this.days.push(D+S);else k>0?(N=L+(k-1)*7)<=E&&this.days.push(D+N):(N=j+(k+1)*7)>0&&this.days.push(D+N)}}this.days.sort(function(t,e){return t-e})}else if(2==m&&"BYDAY"in r&&"BYMONTHDAY"in r){var M=this.expand_by_day(t);for(var B in M)if(M.hasOwnProperty(B)){var S=M[B],F=tf.Time.fromDayOfYear(S,t);this.by_data.BYMONTHDAY.indexOf(F.day)>=0&&this.days.push(S)}}else if(3==m&&"BYDAY"in r&&"BYMONTHDAY"in r&&"BYMONTH"in r){var M=this.expand_by_day(t);for(var B in M)if(M.hasOwnProperty(B)){var S=M[B],F=tf.Time.fromDayOfYear(S,t);this.by_data.BYMONTH.indexOf(F.month)>=0&&this.by_data.BYMONTHDAY.indexOf(F.day)>=0&&this.days.push(S)}}else if(2==m&&"BYDAY"in r&&"BYWEEKNO"in r){var M=this.expand_by_day(t);for(var B in M)if(M.hasOwnProperty(B)){var S=M[B],F=tf.Time.fromDayOfYear(S,t),d=F.weekNumber(this.rule.wkst);this.by_data.BYWEEKNO.indexOf(d)&&this.days.push(S)}}else 3==m&&"BYDAY"in r&&"BYWEEKNO"in r&&"BYMONTHDAY"in r||(1==m&&"BYYEARDAY"in r?this.days=this.days.concat(this.by_data.BYYEARDAY):this.days=[]);return 0},expand_by_day:function(t){var e=[],r=this.last.clone();r.year=t,r.month=1,r.day=1,r.isDate=!0;var n=r.dayOfWeek();r.month=12,r.day=31,r.isDate=!0;var i=r.dayOfWeek(),a=r.dayOfYear();for(var o in this.by_data.BYDAY)if(this.by_data.BYDAY.hasOwnProperty(o)){var s,u,c=this.by_data.BYDAY[o],l=this.ruleDayOfWeek(c),h=l[0],f=l[1];if(0==h)for(var d=(f+7-n)%7+1,m=d;m<=a;m+=7)e.push(m);else h>0?(s=f>=n?f-n+1:f-n+8,e.push(s+(h-1)*7)):(h=-h,u=f<=i?a-i+f:a-i+f-7,e.push(u-(h-1)*7))}return e},is_day_in_byday:function(t){for(var e in this.by_data.BYDAY)if(this.by_data.BYDAY.hasOwnProperty(e)){var r=this.by_data.BYDAY[e],n=this.ruleDayOfWeek(r),i=n[0],a=n[1],o=t.dayOfWeek();if(0==i&&a==o||t.nthWeekDay(a,i)==t.day)return 1}return 0},check_set_position:function(t){return!!this.has_by_data("BYSETPOS")&&-1!==this.by_data.BYSETPOS.indexOf(t)},sort_byday_rules:function(t){for(var e=0;e<t.length;e++)for(var r=0;r<e;r++)if(this.ruleDayOfWeek(t[r],this.rule.wkst)[1]>this.ruleDayOfWeek(t[e],this.rule.wkst)[1]){var n=t[e];t[e]=t[r],t[r]=n}},check_contract_restriction:function(e,r){var n=t._indexMap[e],i=t._expandMap[this.rule.freq][n],a=!1;if(e in this.by_data&&i==t.CONTRACT){var o=this.by_data[e];for(var s in o)if(o.hasOwnProperty(s)&&o[s]==r){a=!0;break}}else a=!0;return a},check_contracting_rules:function(){var t=this.last.dayOfWeek(),e=this.last.weekNumber(this.rule.wkst),r=this.last.dayOfYear();return this.check_contract_restriction("BYSECOND",this.last.second)&&this.check_contract_restriction("BYMINUTE",this.last.minute)&&this.check_contract_restriction("BYHOUR",this.last.hour)&&this.check_contract_restriction("BYDAY",tf.Recur.numericDayToIcalDay(t))&&this.check_contract_restriction("BYWEEKNO",e)&&this.check_contract_restriction("BYMONTHDAY",this.last.day)&&this.check_contract_restriction("BYMONTH",this.last.month)&&this.check_contract_restriction("BYYEARDAY",r)},setup_defaults:function(e,r,n){var i=t._indexMap[e];return t._expandMap[this.rule.freq][i]!=t.CONTRACT&&(e in this.by_data||(this.by_data[e]=[n]),this.rule.freq!=r)?this.by_data[e][0]:n},toJSON:function(){var t=Object.create(null);return t.initialized=this.initialized,t.rule=this.rule.toJSON(),t.dtstart=this.dtstart.toJSON(),t.by_data=this.by_data,t.days=this.days,t.last=this.last.toJSON(),t.by_indices=this.by_indices,t.occurrence_number=this.occurrence_number,t}},t._indexMap={BYSECOND:0,BYMINUTE:1,BYHOUR:2,BYDAY:3,BYMONTHDAY:4,BYYEARDAY:5,BYWEEKNO:6,BYMONTH:7,BYSETPOS:8},t._expandMap={SECONDLY:[1,1,1,1,1,1,1,1],MINUTELY:[2,1,1,1,1,1,1,1],HOURLY:[2,2,1,1,1,1,1,1],DAILY:[2,2,2,1,1,1,1,1],WEEKLY:[2,2,2,2,3,3,1,1],MONTHLY:[2,2,2,2,2,3,3,1],YEARLY:[2,2,2,2,2,2,2,2]},t.UNKNOWN=0,t.CONTRACT=1,t.EXPAND=2,t.ILLEGAL=3,t}(),tf.RecurExpansion=function(){function t(t){return tf.helpers.formatClassType(t,tf.Time)}function e(t,e){return t.compare(e)}function r(t){this.ruleDates=[],this.exDates=[],this.fromData(t)}return r.prototype={complete:!1,ruleIterators:null,ruleDates:null,exDates:null,ruleDateInc:0,exDateInc:0,exDate:null,ruleDate:null,dtstart:null,last:null,fromData:function(e){var r=tf.helpers.formatClassType(e.dtstart,tf.Time);if(r)this.dtstart=r;else throw Error(".dtstart (ICAL.Time) must be given");if(e.component)this._init(e.component);else{if(this.last=t(e.last)||r.clone(),!e.ruleIterators)throw Error(".ruleIterators or .component must be given");this.ruleIterators=e.ruleIterators.map(function(t){return tf.helpers.formatClassType(t,tf.RecurIterator)}),this.ruleDateInc=e.ruleDateInc,this.exDateInc=e.exDateInc,e.ruleDates&&(this.ruleDates=e.ruleDates.map(t),this.ruleDate=this.ruleDates[this.ruleDateInc]),e.exDates&&(this.exDates=e.exDates.map(t),this.exDate=this.exDates[this.exDateInc]),void 0!==e.complete&&(this.complete=e.complete)}},next:function(){for(var t,e,r,n=0;;){if(n++>500)throw Error("max tries have occured, rule may be impossible to forfill.");if(e=this.ruleDate,t=this._nextRecurrenceIter(this.last),!e&&!t){this.complete=!0;break}if((!e||t&&e.compare(t.last)>0)&&(e=t.last.clone(),t.next()),this.ruleDate===e&&this._nextRuleDay(),this.last=e,this.exDate&&((r=this.exDate.compare(this.last))<0&&this._nextExDay(),0===r)){this._nextExDay();continue}return this.last}},toJSON:function(){function t(t){return t.toJSON()}var e=Object.create(null);return e.ruleIterators=this.ruleIterators.map(t),this.ruleDates&&(e.ruleDates=this.ruleDates.map(t)),this.exDates&&(e.exDates=this.exDates.map(t)),e.ruleDateInc=this.ruleDateInc,e.exDateInc=this.exDateInc,e.last=this.last.toJSON(),e.dtstart=this.dtstart.toJSON(),e.complete=this.complete,e},_extractDates:function(t,r){function n(t){i=tf.helpers.binsearchInsert(a,t,e),a.splice(i,0,t)}for(var i,a=[],o=t.getAllProperties(r),s=o.length,u=0;u<s;u++)o[u].getValues().forEach(n);return a},_init:function(t){if(this.ruleIterators=[],this.last=this.dtstart.clone(),!(t.hasProperty("rdate")||t.hasProperty("rrule")||t.hasProperty("recurrence-id"))){this.ruleDate=this.last.clone(),this.complete=!0;return}if(t.hasProperty("rdate")&&(this.ruleDates=this._extractDates(t,"rdate"),this.ruleDates[0]&&0>this.ruleDates[0].compare(this.dtstart)?(this.ruleDateInc=0,this.last=this.ruleDates[0].clone()):this.ruleDateInc=tf.helpers.binsearchInsert(this.ruleDates,this.last,e),this.ruleDate=this.ruleDates[this.ruleDateInc]),t.hasProperty("rrule"))for(var r,n=t.getAllProperties("rrule"),i=0,a=n.length;i<a;i++)r=n[i].getFirstValue().iterator(this.dtstart),this.ruleIterators.push(r),r.next();t.hasProperty("exdate")&&(this.exDates=this._extractDates(t,"exdate"),this.exDateInc=tf.helpers.binsearchInsert(this.exDates,this.last,e),this.exDate=this.exDates[this.exDateInc])},_nextExDay:function(){this.exDate=this.exDates[++this.exDateInc]},_nextRuleDay:function(){this.ruleDate=this.ruleDates[++this.ruleDateInc]},_nextRecurrenceIter:function(){var t,e,r,n=this.ruleIterators;if(0===n.length)return null;for(var i=n.length,a=0;a<i;a++){if(e=(t=n[a]).last,t.completed){i--,0!==a&&a--,n.splice(a,1);continue}(!r||r.last.compare(e)>0)&&(r=t)}return r}},r}(),tf.Event=function(){function t(t,e){t instanceof tf.Component||(e=t,t=null),t?this.component=t:this.component=new tf.Component("vevent"),this._rangeExceptionCache=Object.create(null),this.exceptions=Object.create(null),this.rangeExceptions=[],e&&e.strictExceptions&&(this.strictExceptions=e.strictExceptions),e&&e.exceptions?e.exceptions.forEach(this.relateException,this):this.component.parent&&!this.isRecurrenceException()&&this.component.parent.getAllSubcomponents("vevent").forEach(function(t){t.hasProperty("recurrence-id")&&this.relateException(t)},this)}function e(t,e){return t[0]>e[0]?1:e[0]>t[0]?-1:0}return t.prototype={THISANDFUTURE:"THISANDFUTURE",exceptions:null,strictExceptions:!1,relateException:function(t){if(this.isRecurrenceException())throw Error("cannot relate exception to exceptions");if(t instanceof tf.Component&&(t=new tf.Event(t)),this.strictExceptions&&t.uid!==this.uid)throw Error("attempted to relate unrelated exception");var r=t.recurrenceId.toString();if(this.exceptions[r]=t,t.modifiesFuture()){var n=[t.recurrenceId.toUnixTime(),r],i=tf.helpers.binsearchInsert(this.rangeExceptions,n,e);this.rangeExceptions.splice(i,0,n)}},modifiesFuture:function(){return!!this.component.hasProperty("recurrence-id")&&this.component.getFirstProperty("recurrence-id").getParameter("range")===this.THISANDFUTURE},findRangeException:function(t){if(!this.rangeExceptions.length)return null;var r=t.toUnixTime(),n=tf.helpers.binsearchInsert(this.rangeExceptions,[r],e);if((n-=1)<0)return null;var i=this.rangeExceptions[n];return r<i[0]?null:i[1]},getOccurrenceDetails:function(t){var e=t.toString(),r=t.convertToZone(tf.Timezone.utcTimezone).toString(),n={recurrenceId:t};if(e in this.exceptions)i=n.item=this.exceptions[e],n.startDate=i.startDate,n.endDate=i.endDate,n.item=i;else if(r in this.exceptions)i=this.exceptions[r],n.startDate=i.startDate,n.endDate=i.endDate,n.item=i;else{var i,a,o=this.findRangeException(t);if(o){var s=this.exceptions[o];n.item=s;var u=this._rangeExceptionCache[o];if(!u){var c=s.recurrenceId.clone(),l=s.startDate.clone();c.zone=l.zone,u=l.subtractDate(c),this._rangeExceptionCache[o]=u}var h=t.clone();h.zone=s.startDate.zone,h.addDuration(u),(a=h.clone()).addDuration(s.duration),n.startDate=h,n.endDate=a}else(a=t.clone()).addDuration(this.duration),n.endDate=a,n.startDate=t,n.item=this}return n},iterator:function(t){return new tf.RecurExpansion({component:this.component,dtstart:t||this.startDate})},isRecurring:function(){var t=this.component;return t.hasProperty("rrule")||t.hasProperty("rdate")},isRecurrenceException:function(){return this.component.hasProperty("recurrence-id")},getRecurrenceTypes:function(){for(var t=this.component.getAllProperties("rrule"),e=0,r=t.length,n=Object.create(null);e<r;e++)n[t[e].getFirstValue().freq]=!0;return n},get uid(){return this._firstProp("uid")},set uid(value){this._setProp("uid",value)},get startDate(){return this._firstProp("dtstart")},set startDate(value){this._setTime("dtstart",value)},get endDate(){var r=this._firstProp("dtend");if(!r){var n=this._firstProp("duration");r=this.startDate.clone(),n?r.addDuration(n):r.isDate&&(r.day+=1)}return r},set endDate(value){this.component.hasProperty("duration")&&this.component.removeProperty("duration"),this._setTime("dtend",value)},get duration(){var i=this._firstProp("duration");if(!i)return this.endDate.subtractDateTz(this.startDate);return i},set duration(value){this.component.hasProperty("dtend")&&this.component.removeProperty("dtend"),this._setProp("duration",value)},get location(){return this._firstProp("location")},set location(value){return this._setProp("location",value)},get attendees(){return this.component.getAllProperties("attendee")},get summary(){return this._firstProp("summary")},set summary(value){this._setProp("summary",value)},get description(){return this._firstProp("description")},set description(value){this._setProp("description",value)},get color(){return this._firstProp("color")},set color(value){this._setProp("color",value)},get organizer(){return this._firstProp("organizer")},set organizer(value){this._setProp("organizer",value)},get sequence(){return this._firstProp("sequence")},set sequence(value){this._setProp("sequence",value)},get recurrenceId(){return this._firstProp("recurrence-id")},set recurrenceId(value){this._setTime("recurrence-id",value)},_setTime:function(t,e){var r=this.component.getFirstProperty(t);r||(r=new tf.Property(t),this.component.addProperty(r)),e.zone===tf.Timezone.localTimezone||e.zone===tf.Timezone.utcTimezone?r.removeParameter("tzid"):r.setParameter("tzid",e.zone.tzid),r.setValue(e)},_setProp:function(t,e){this.component.updatePropertyWithValue(t,e)},_firstProp:function(t){return this.component.getFirstPropertyValue(t)},toString:function(){return this.component.toString()}},t}(),tf.ComponentParser=function(){function t(t){var e;for(e in void 0===t&&(t={}),t)t.hasOwnProperty(e)&&(this[e]=t[e])}return t.prototype={parseEvent:!0,parseTimezone:!0,oncomplete:function(){},onerror:function(t){},ontimezone:function(t){},onevent:function(t){},process:function(t){"string"==typeof t&&(t=tf.parse(t)),t instanceof tf.Component||(t=new tf.Component(t));for(var e,r=t.getAllSubcomponents(),n=0,i=r.length;n<i;n++)switch((e=r[n]).name){case"vtimezone":if(this.parseTimezone){var a=e.getFirstPropertyValue("tzid");a&&this.ontimezone(new tf.Timezone({tzid:a,component:e}))}break;case"vevent":this.parseEvent&&this.onevent(new tf.Event(e));break;default:continue}this.oncomplete()}},t}();var td={};e="millisecond",r="second",n="minute",i="hour",a="week",o="month",s="quarter",u="year",c="date",l="Invalid Date",h=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,f=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,d=function(t,e,r){var n=String(t);return!n||n.length>=e?t:""+Array(e+1-n.length).join(r)+t},(y={})[m="en"]={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(t){var e=["th","st","nd","rd"],r=t%100;return"["+t+(e[(r-20)%10]||e[r]||"th")+"]"}},v="$isDayjsObject",g=function(t){return t instanceof E||!(!t||!t[v])},b=function t(e,r,n){var i;if(!e)return m;if("string"==typeof e){var a=e.toLowerCase();y[a]&&(i=a),r&&(y[a]=r,i=a);var o=e.split("-");if(!i&&o.length>1)return t(o[0])}else{var s=e.name;y[s]=e,i=s}return!n&&i&&(m=i),i||!n&&m},_=function(t,e){if(g(t))return t.clone();var r="object"==typeof e?e:{};return r.date=t,r.args=arguments,new E(r)},(T={s:d,z:function(t){var e=-t.utcOffset(),r=Math.abs(e);return(e<=0?"+":"-")+d(Math.floor(r/60),2,"0")+":"+d(r%60,2,"0")},m:function t(e,r){if(e.date()<r.date())return-t(r,e);var n=12*(r.year()-e.year())+(r.month()-e.month()),i=e.clone().add(n,o),a=r-i<0,s=e.clone().add(n+(a?-1:1),o);return+(-(n+(r-i)/(a?i-s:s-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return({M:o,y:u,w:a,d:"day",D:c,h:i,m:n,s:r,ms:e,Q:s})[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}}).l=b,T.i=g,T.w=function(t,e){return _(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})},A=(E=function(){function t(t){this.$L=b(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[v]=!0}var d=t.prototype;return d.parse=function(t){this.$d=function(t){var e=t.date,r=t.utc;if(null===e)return new Date(NaN);if(T.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var n=e.match(h);if(n){var i=n[2]-1||0,a=(n[7]||"0").substring(0,3);return r?new Date(Date.UTC(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,a)):new Date(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,a)}}return new Date(e)}(t),this.init()},d.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},d.$utils=function(){return T},d.isValid=function(){return this.$d.toString()!==l},d.isSame=function(t,e){var r=_(t);return this.startOf(e)<=r&&r<=this.endOf(e)},d.isAfter=function(t,e){return _(t)<this.startOf(e)},d.isBefore=function(t,e){return this.endOf(e)<_(t)},d.$g=function(t,e,r){return T.u(t)?this[e]:this.set(r,t)},d.unix=function(){return Math.floor(this.valueOf()/1e3)},d.valueOf=function(){return this.$d.getTime()},d.startOf=function(t,e){var s=this,l=!!T.u(e)||e,h=T.p(t),f=function(t,e){var r=T.w(s.$u?Date.UTC(s.$y,e,t):new Date(s.$y,e,t),s);return l?r:r.endOf("day")},d=function(t,e){return T.w(s.toDate()[t].apply(s.toDate("s"),(l?[0,0,0,0]:[23,59,59,999]).slice(e)),s)},m=this.$W,y=this.$M,v=this.$D,g="set"+(this.$u?"UTC":"");switch(h){case u:return l?f(1,0):f(31,11);case o:return l?f(1,y):f(0,y+1);case a:var b=this.$locale().weekStart||0,_=(m<b?m+7:m)-b;return f(l?v-_:v+(6-_),y);case"day":case c:return d(g+"Hours",0);case i:return d(g+"Minutes",1);case n:return d(g+"Seconds",2);case r:return d(g+"Milliseconds",3);default:return this.clone()}},d.endOf=function(t){return this.startOf(t,!1)},d.$set=function(t,a){var s,l=T.p(t),h="set"+(this.$u?"UTC":""),f=((s={}).day=h+"Date",s[c]=h+"Date",s[o]=h+"Month",s[u]=h+"FullYear",s[i]=h+"Hours",s[n]=h+"Minutes",s[r]=h+"Seconds",s[e]=h+"Milliseconds",s)[l],d="day"===l?this.$D+(a-this.$W):a;if(l===o||l===u){var m=this.clone().set(c,1);m.$d[f](d),m.init(),this.$d=m.set(c,Math.min(this.$D,m.daysInMonth())).$d}else f&&this.$d[f](d);return this.init(),this},d.set=function(t,e){return this.clone().$set(t,e)},d.get=function(t){return this[T.p(t)]()},d.add=function(t,e){var s,c=this;t=Number(t);var l=T.p(e),h=function(e){var r=_(c);return T.w(r.date(r.date()+Math.round(e*t)),c)};if(l===o)return this.set(o,this.$M+t);if(l===u)return this.set(u,this.$y+t);if("day"===l)return h(1);if(l===a)return h(7);var f=((s={})[n]=6e4,s[i]=36e5,s[r]=1e3,s)[l]||1,d=this.$d.getTime()+t*f;return T.w(d,this)},d.subtract=function(t,e){return this.add(-1*t,e)},d.format=function(t){var e=this,r=this.$locale();if(!this.isValid())return r.invalidDate||l;var n=t||"YYYY-MM-DDTHH:mm:ssZ",i=T.z(this),a=this.$H,o=this.$m,s=this.$M,u=r.weekdays,c=r.months,h=r.meridiem,d=function(t,r,i,a){return t&&(t[r]||t(e,n))||i[r].slice(0,a)},m=function(t){return T.s(a%12||12,t,"0")},y=h||function(t,e,r){var n=t<12?"AM":"PM";return r?n.toLowerCase():n};return n.replace(f,function(t,n){return n||function(t){switch(t){case"YY":return String(e.$y).slice(-2);case"YYYY":return T.s(e.$y,4,"0");case"M":return s+1;case"MM":return T.s(s+1,2,"0");case"MMM":return d(r.monthsShort,s,c,3);case"MMMM":return d(c,s);case"D":return e.$D;case"DD":return T.s(e.$D,2,"0");case"d":return String(e.$W);case"dd":return d(r.weekdaysMin,e.$W,u,2);case"ddd":return d(r.weekdaysShort,e.$W,u,3);case"dddd":return u[e.$W];case"H":return String(a);case"HH":return T.s(a,2,"0");case"h":return m(1);case"hh":return m(2);case"a":return y(a,o,!0);case"A":return y(a,o,!1);case"m":return String(o);case"mm":return T.s(o,2,"0");case"s":return String(e.$s);case"ss":return T.s(e.$s,2,"0");case"SSS":return T.s(e.$ms,3,"0");case"Z":return i}return null}(t)||i.replace(":","")})},d.utcOffset=function(){return-(15*Math.round(this.$d.getTimezoneOffset()/15))},d.diff=function(t,e,c){var l,h=this,f=T.p(e),d=_(t),m=(d.utcOffset()-this.utcOffset())*6e4,y=this-d,v=function(){return T.m(h,d)};switch(f){case u:l=v()/12;break;case o:l=v();break;case s:l=v()/3;break;case a:l=(y-m)/6048e5;break;case"day":l=(y-m)/864e5;break;case i:l=y/36e5;break;case n:l=y/6e4;break;case r:l=y/1e3;break;default:l=y}return c?l:T.a(l)},d.daysInMonth=function(){return this.endOf(o).$D},d.$locale=function(){return y[this.$L]},d.locale=function(t,e){if(!t)return this.$L;var r=this.clone(),n=b(t,e,!0);return n&&(r.$L=n),r},d.clone=function(){return T.w(this.$d,this)},d.toDate=function(){return new Date(this.valueOf())},d.toJSON=function(){return this.isValid()?this.toISOString():null},d.toISOString=function(){return this.$d.toISOString()},d.toString=function(){return this.$d.toUTCString()},t}()).prototype,_.prototype=A,[["$ms",e],["$s",r],["$m",n],["$H",i],["$W","day"],["$M",o],["$y",u],["$D",c]].forEach(function(t){A[t[1]]=function(e){return this.$g(e,t[0],t[1])}}),_.extend=function(t,e){return t.$i||(t(e,E,_),t.$i=!0),_},_.locale=b,_.isDayjs=g,_.unix=function(t){return _(1e3*t)},_.en=y[m],_.Ls=y,_.p={},td=_;var tp={};function tm(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function ty(t,e){if(t){if("string"==typeof t)return tm(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if("Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tm(t,e)}}function tv(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r,n,i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var a=[],o=!0,s=!1;try{for(i=i.call(t);!(o=(r=i.next()).done)&&(a.push(r.value),!e||a.length!==e);o=!0);}catch(t){s=!0,n=t}finally{try{o||null==i.return||i.return()}finally{if(s)throw n}}return a}}(t,e)||ty(t,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tg(t){return function(t){if(Array.isArray(t))return tm(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||ty(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tb(t,e){return(tb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function t_(){t_=function(t,e){return new r(t,void 0,e)};var t=RegExp.prototype,e=new WeakMap;function r(t,n,i){var a=RegExp(t,n);return e.set(a,i||e.get(t)),tb(a,r.prototype)}function n(t,r){var n=e.get(r);return Object.keys(n).reduce(function(e,r){var i=n[r];if("number"==typeof i)e[r]=t[i];else{for(var a=0;void 0===t[i[a]]&&a+1<i.length;)a++;e[r]=t[i[a]]}return e},Object.create(null))}return function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tb(t,e)}(r,RegExp),r.prototype.exec=function(e){var r=t.exec.call(this,e);if(r){r.groups=n(r,this);var i=r.indices;i&&(i.groups=n(i,this))}return r},r.prototype[Symbol.replace]=function(r,i){if("string"==typeof i){var a=e.get(this);return t[Symbol.replace].call(this,r,i.replace(/\$<([^>]+)>/g,function(t,e){var r=a[e];return"$"+(Array.isArray(r)?r.join("$"):r)}))}if("function"==typeof i){var o=this;return t[Symbol.replace].call(this,r,function(){var t=arguments;return"object"!=typeof t[t.length-1]&&(t=[].slice.call(t)).push(n(t,o)),i.apply(this,t)})}return t[Symbol.replace].call(this,r,i)},t_.apply(this,arguments)}function tT(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&0>e.indexOf(n)&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)0>e.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function tE(t,e,r,n){return new(r||(r=Promise))(function(i,a){function o(t){try{u(n.next(t))}catch(t){a(t)}}function s(t){try{u(n.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?i(t.value):((e=t.value)instanceof r?e:new r(function(t){t(e)})).then(o,s)}u((n=n.apply(t,e||[])).next())})}tp=(function t(e,r,n){function i(o,s){if(!r[o]){if(!e[o]){var u=void 0;if(!s&&u)return u(o,!0);if(a)return a(o,!0);var c=Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[o]={exports:{}};e[o][0].call(l.exports,function(t){return i(e[o][1][t]||t)},l,l.exports,t,e,r,n)}return r[o].exports}for(var a=void 0,o=0;o<n.length;o++)i(n[o]);return i})({1:[function(t,e,r){(function(t){var r,n,i=t.MutationObserver||t.WebKitMutationObserver;if(i){var a=0,o=new i(l),s=t.document.createTextNode("");o.observe(s,{characterData:!0}),r=function(){s.data=a=++a%2}}else if(t.setImmediate||void 0===t.MessageChannel)r="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){l(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(l,0)};else{var u=new t.MessageChannel;u.port1.onmessage=l,r=function(){u.port2.postMessage(0)}}var c=[];function l(){n=!0;for(var t,e,r=c.length;r;){for(e=c,c=[],t=-1;++t<r;)e[t]();r=c.length}n=!1}e.exports=function(t){1!==c.push(t)||n||r()}}).call(this,void 0!==te?te:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e,r){var n=t(1);function i(){}var a={},o=["REJECTED"],s=["FULFILLED"],u=["PENDING"];function c(t){if("function"!=typeof t)throw TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,t!==i&&d(this,t)}function l(t,e,r){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function h(t,e,r){n(function(){var n;try{n=e(r)}catch(e){return a.reject(t,e)}n===t?a.reject(t,TypeError("Cannot resolve promise with itself")):a.resolve(t,n)})}function f(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function d(t,e){var r=!1;function n(e){r||(r=!0,a.reject(t,e))}function i(e){r||(r=!0,a.resolve(t,e))}var o=m(function(){e(i,n)});"error"===o.status&&n(o.value)}function m(t,e){var r={};try{r.value=t(e),r.status="success"}catch(t){r.status="error",r.value=t}return r}e.exports=c,c.prototype.catch=function(t){return this.then(null,t)},c.prototype.then=function(t,e){if("function"!=typeof t&&this.state===s||"function"!=typeof e&&this.state===o)return this;var r=new this.constructor(i);return this.state!==u?h(r,this.state===s?t:e,this.outcome):this.queue.push(new l(r,t,e)),r},l.prototype.callFulfilled=function(t){a.resolve(this.promise,t)},l.prototype.otherCallFulfilled=function(t){h(this.promise,this.onFulfilled,t)},l.prototype.callRejected=function(t){a.reject(this.promise,t)},l.prototype.otherCallRejected=function(t){h(this.promise,this.onRejected,t)},a.resolve=function(t,e){var r=m(f,e);if("error"===r.status)return a.reject(t,r.value);var n=r.value;if(n)d(t,n);else{t.state=s,t.outcome=e;for(var i=-1,o=t.queue.length;++i<o;)t.queue[i].callFulfilled(e)}return t},a.reject=function(t,e){t.state=o,t.outcome=e;for(var r=-1,n=t.queue.length;++r<n;)t.queue[r].callRejected(e);return t},c.resolve=function(t){return t instanceof this?t:a.resolve(new this(i),t)},c.reject=function(t){var e=new this(i);return a.reject(e,t)},c.all=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(TypeError("must be an array"));var r=t.length,n=!1;if(!r)return this.resolve([]);for(var o=Array(r),s=0,u=-1,c=new this(i);++u<r;)!function(t,i){e.resolve(t).then(function(t){o[i]=t,++s!==r||n||(n=!0,a.resolve(c,o))},function(t){n||(n=!0,a.reject(c,t))})}(t[u],u);return c},c.race=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(TypeError("must be an array"));var r=t.length,n=!1;if(!r)return this.resolve([]);for(var o=-1,s=new this(i);++o<r;)!function(t){e.resolve(t).then(function(t){n||(n=!0,a.resolve(s,t))},function(t){n||(n=!0,a.reject(s,t))})}(t[o]);return s}},{1:1}],3:[function(t,e,r){(function(e){"function"!=typeof e.Promise&&(e.Promise=t(2))}).call(this,void 0!==te?te:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(t,e,r){var n="function"==typeof Symbol&&"symbol"===ti(Symbol.iterator)?function(t){return void 0===t?"undefined":ti(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":ti(t)},i=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(t){return}}();function a(t,e){t=t||[],e=e||{};try{return new Blob(t,e)}catch(i){if("TypeError"!==i.name)throw i;for(var r=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),n=0;n<t.length;n+=1)r.append(t[n]);return r.getBlob(e.type)}}"undefined"==typeof Promise&&t(3);var o=Promise;function s(t,e){e&&t.then(function(t){e(null,t)},function(t){e(t)})}function u(t,e,r){"function"==typeof e&&t.then(e),"function"==typeof r&&t.catch(r)}function c(t){return"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t)),t}function l(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var h="local-forage-detect-blob-support",f=void 0,d={},m=Object.prototype.toString,y="readonly",v="readwrite";function g(t){var e=d[t.name],r={};r.promise=new o(function(t,e){r.resolve=t,r.reject=e}),e.deferredOperations.push(r),e.dbReady?e.dbReady=e.dbReady.then(function(){return r.promise}):e.dbReady=r.promise}function b(t){var e=d[t.name].deferredOperations.pop();if(e)return e.resolve(),e.promise}function _(t,e){var r=d[t.name].deferredOperations.pop();if(r)return r.reject(e),r.promise}function T(t,e){return new o(function(r,n){if(d[t.name]=d[t.name]||C(),t.db){if(!e)return r(t.db);g(t),t.db.close()}var a=[t.name];e&&a.push(t.version);var o=i.open.apply(i,a);e&&(o.onupgradeneeded=function(e){var r=o.result;try{r.createObjectStore(t.storeName),e.oldVersion<=1&&r.createObjectStore(h)}catch(r){if("ConstraintError"===r.name)console.warn('The database "'+t.name+'" has been upgraded from version '+e.oldVersion+" to version "+e.newVersion+', but the storage "'+t.storeName+'" already exists.');else throw r}}),o.onerror=function(t){t.preventDefault(),n(o.error)},o.onsuccess=function(){var e=o.result;e.onversionchange=function(t){t.target.close()},r(e),b(t)}})}function E(t,e){if(!t.db)return!0;var r=!t.db.objectStoreNames.contains(t.storeName),n=t.version<t.db.version,i=t.version>t.db.version;if(n&&(t.version!==e&&console.warn('The database "'+t.name+"\" can't be downgraded from version "+t.db.version+" to version "+t.version+"."),t.version=t.db.version),i||r){if(r){var a=t.db.version+1;a>t.version&&(t.version=a)}return!0}return!1}function A(t){return a([function(t){for(var e=t.length,r=new ArrayBuffer(e),n=new Uint8Array(r),i=0;i<e;i++)n[i]=t.charCodeAt(i);return r}(atob(t.data))],{type:t.type})}function w(t){return t&&t.__local_forage_encoded_blob}function D(t){var e=this,r=e._initReady().then(function(){var t=d[e._dbInfo.name];if(t&&t.dbReady)return t.dbReady});return u(r,t,t),r}function O(t,e,r,n){void 0===n&&(n=1);try{var i=t.db.transaction(t.storeName,e);r(null,i)}catch(i){if(n>0&&(!t.db||"InvalidStateError"===i.name||"NotFoundError"===i.name))return o.resolve().then(function(){if(!t.db||"NotFoundError"===i.name&&!t.db.objectStoreNames.contains(t.storeName)&&t.version<=t.db.version)return t.db&&(t.version=t.db.version+1),T(t,!0)}).then(function(){return(function(t){g(t);for(var e=d[t.name],r=e.forages,n=0;n<r.length;n++){var i=r[n];i._dbInfo.db&&(i._dbInfo.db.close(),i._dbInfo.db=null)}return t.db=null,T(t,!1).then(function(e){return(t.db=e,E(t))?T(t,!0):e}).then(function(n){t.db=e.db=n;for(var i=0;i<r.length;i++)r[i]._dbInfo.db=n}).catch(function(e){throw _(t,e),e})})(t).then(function(){O(t,e,r,n-1)})}).catch(r);r(i)}}function C(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}var S={_driver:"asyncStorage",_initStorage:function(t){var e=this,r={db:null};if(t)for(var n in t)r[n]=t[n];var i=d[r.name];i||(i=C(),d[r.name]=i),i.forages.push(e),e._initReady||(e._initReady=e.ready,e.ready=D);var a=[];function s(){return o.resolve()}for(var u=0;u<i.forages.length;u++){var c=i.forages[u];c!==e&&a.push(c._initReady().catch(s))}var l=i.forages.slice(0);return o.all(a).then(function(){return r.db=i.db,T(r,!1)}).then(function(t){return(r.db=t,E(r,e._defaultConfig.version))?T(r,!0):t}).then(function(t){r.db=i.db=t,e._dbInfo=r;for(var n=0;n<l.length;n++){var a=l[n];a!==e&&(a._dbInfo.db=r.db,a._dbInfo.version=r.version)}})},_support:function(){try{if(!i||!i.open)return!1;var t="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),e="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!t||e)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(t){return!1}}(),iterate:function(t,e){var r=this,n=new o(function(e,n){r.ready().then(function(){O(r._dbInfo,y,function(i,a){if(i)return n(i);try{var o=a.objectStore(r._dbInfo.storeName).openCursor(),s=1;o.onsuccess=function(){var r=o.result;if(r){var n=r.value;w(n)&&(n=A(n));var i=t(n,r.key,s++);void 0!==i?e(i):r.continue()}else e()},o.onerror=function(){n(o.error)}}catch(t){n(t)}})}).catch(n)});return s(n,e),n},getItem:function(t,e){var r=this;t=c(t);var n=new o(function(e,n){r.ready().then(function(){O(r._dbInfo,y,function(i,a){if(i)return n(i);try{var o=a.objectStore(r._dbInfo.storeName).get(t);o.onsuccess=function(){var t=o.result;void 0===t&&(t=null),w(t)&&(t=A(t)),e(t)},o.onerror=function(){n(o.error)}}catch(t){n(t)}})}).catch(n)});return s(n,e),n},setItem:function(t,e,r){var n=this;t=c(t);var i=new o(function(r,i){var s;n.ready().then(function(){var t;return(s=n._dbInfo,"[object Blob]"===m.call(e))?(t=s.db,"boolean"==typeof f?o.resolve(f):new o(function(e){var r=t.transaction(h,v),n=a([""]);r.objectStore(h).put(n,"key"),r.onabort=function(t){t.preventDefault(),t.stopPropagation(),e(!1)},r.oncomplete=function(){var t=navigator.userAgent.match(/Chrome\/(\d+)/);e(navigator.userAgent.match(/Edge\//)||!t||parseInt(t[1],10)>=43)}}).catch(function(){return!1}).then(function(t){return f=t})).then(function(t){return t?e:new o(function(t,r){var n=new FileReader;n.onerror=r,n.onloadend=function(r){t({__local_forage_encoded_blob:!0,data:btoa(r.target.result||""),type:e.type})},n.readAsBinaryString(e)})}):e}).then(function(e){O(n._dbInfo,v,function(a,o){if(a)return i(a);try{var s=o.objectStore(n._dbInfo.storeName);null===e&&(e=void 0);var u=s.put(e,t);o.oncomplete=function(){void 0===e&&(e=null),r(e)},o.onabort=o.onerror=function(){var t=u.error?u.error:u.transaction.error;i(t)}}catch(t){i(t)}})}).catch(i)});return s(i,r),i},removeItem:function(t,e){var r=this;t=c(t);var n=new o(function(e,n){r.ready().then(function(){O(r._dbInfo,v,function(i,a){if(i)return n(i);try{var o=a.objectStore(r._dbInfo.storeName).delete(t);a.oncomplete=function(){e()},a.onerror=function(){n(o.error)},a.onabort=function(){var t=o.error?o.error:o.transaction.error;n(t)}}catch(t){n(t)}})}).catch(n)});return s(n,e),n},clear:function(t){var e=this,r=new o(function(t,r){e.ready().then(function(){O(e._dbInfo,v,function(n,i){if(n)return r(n);try{var a=i.objectStore(e._dbInfo.storeName).clear();i.oncomplete=function(){t()},i.onabort=i.onerror=function(){var t=a.error?a.error:a.transaction.error;r(t)}}catch(t){r(t)}})}).catch(r)});return s(r,t),r},length:function(t){var e=this,r=new o(function(t,r){e.ready().then(function(){O(e._dbInfo,y,function(n,i){if(n)return r(n);try{var a=i.objectStore(e._dbInfo.storeName).count();a.onsuccess=function(){t(a.result)},a.onerror=function(){r(a.error)}}catch(t){r(t)}})}).catch(r)});return s(r,t),r},key:function(t,e){var r=this,n=new o(function(e,n){if(t<0){e(null);return}r.ready().then(function(){O(r._dbInfo,y,function(i,a){if(i)return n(i);try{var o=a.objectStore(r._dbInfo.storeName),s=!1,u=o.openKeyCursor();u.onsuccess=function(){var r=u.result;if(!r){e(null);return}0===t?e(r.key):s?e(r.key):(s=!0,r.advance(t))},u.onerror=function(){n(u.error)}}catch(t){n(t)}})}).catch(n)});return s(n,e),n},keys:function(t){var e=this,r=new o(function(t,r){e.ready().then(function(){O(e._dbInfo,y,function(n,i){if(n)return r(n);try{var a=i.objectStore(e._dbInfo.storeName).openKeyCursor(),o=[];a.onsuccess=function(){var e=a.result;if(!e){t(o);return}o.push(e.key),e.continue()},a.onerror=function(){r(a.error)}}catch(t){r(t)}})}).catch(r)});return s(r,t),r},dropInstance:function(t,e){e=l.apply(this,arguments);var r,n=this.config();if((t="function"!=typeof t&&t||{}).name||(t.name=t.name||n.name,t.storeName=t.storeName||n.storeName),t.name){var a=t.name===n.name&&this._dbInfo.db?o.resolve(this._dbInfo.db):T(t,!1).then(function(e){var r=d[t.name],n=r.forages;r.db=e;for(var i=0;i<n.length;i++)n[i]._dbInfo.db=e;return e});r=t.storeName?a.then(function(e){if(e.objectStoreNames.contains(t.storeName)){var r=e.version+1;g(t);var n=d[t.name],a=n.forages;e.close();for(var s=0;s<a.length;s++){var u=a[s];u._dbInfo.db=null,u._dbInfo.version=r}return new o(function(e,n){var a=i.open(t.name,r);a.onerror=function(t){a.result.close(),n(t)},a.onupgradeneeded=function(){a.result.deleteObjectStore(t.storeName)},a.onsuccess=function(){var t=a.result;t.close(),e(t)}}).then(function(t){n.db=t;for(var e=0;e<a.length;e++){var r=a[e];r._dbInfo.db=t,b(r._dbInfo)}}).catch(function(e){throw(_(t,e)||o.resolve()).catch(function(){}),e})}}):a.then(function(e){g(t);var r=d[t.name],n=r.forages;e.close();for(var a=0;a<n.length;a++)n[a]._dbInfo.db=null;return new o(function(e,r){var n=i.deleteDatabase(t.name);n.onerror=function(){var t=n.result;t&&t.close(),r(n.error)},n.onblocked=function(){console.warn('dropInstance blocked for database "'+t.name+'" until all open connections are closed')},n.onsuccess=function(){var t=n.result;t&&t.close(),e(t)}}).then(function(t){r.db=t;for(var e=0;e<n.length;e++)b(n[e]._dbInfo)}).catch(function(e){throw(_(t,e)||o.resolve()).catch(function(){}),e})})}else r=o.reject("Invalid arguments");return s(r,e),r}},x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",I=/^~~local_forage_type~([^~]+)~/,N="__lfsc__:",Y=N.length,R="arbf",k="blob",P="si08",L="ui08",j="uic8",M="si16",B="si32",F="ur16",U="ui32",V="fl32",z="fl64",H=Y+R.length,K=Object.prototype.toString;function W(t){var e,r,n,i,a,o=.75*t.length,s=t.length,u=0;"="===t[t.length-1]&&(o--,"="===t[t.length-2]&&o--);var c=new ArrayBuffer(o),l=new Uint8Array(c);for(e=0;e<s;e+=4)r=x.indexOf(t[e]),n=x.indexOf(t[e+1]),i=x.indexOf(t[e+2]),a=x.indexOf(t[e+3]),l[u++]=r<<2|n>>4,l[u++]=(15&n)<<4|i>>2,l[u++]=(3&i)<<6|63&a;return c}function q(t){var e,r=new Uint8Array(t),n="";for(e=0;e<r.length;e+=3)n+=x[r[e]>>2]+x[(3&r[e])<<4|r[e+1]>>4]+x[(15&r[e+1])<<2|r[e+2]>>6]+x[63&r[e+2]];return r.length%3==2?n=n.substring(0,n.length-1)+"=":r.length%3==1&&(n=n.substring(0,n.length-2)+"=="),n}var $={serialize:function(t,e){var r="";if(t&&(r=K.call(t)),t&&("[object ArrayBuffer]"===r||t.buffer&&"[object ArrayBuffer]"===K.call(t.buffer))){var n,i=N;t instanceof ArrayBuffer?(n=t,i+=R):(n=t.buffer,"[object Int8Array]"===r?i+=P:"[object Uint8Array]"===r?i+=L:"[object Uint8ClampedArray]"===r?i+=j:"[object Int16Array]"===r?i+=M:"[object Uint16Array]"===r?i+=F:"[object Int32Array]"===r?i+=B:"[object Uint32Array]"===r?i+=U:"[object Float32Array]"===r?i+=V:"[object Float64Array]"===r?i+=z:e(Error("Failed to get type for BinaryArray"))),e(i+q(n))}else if("[object Blob]"===r){var a=new FileReader;a.onload=function(){e(N+k+("~~local_forage_type~"+t.type)+"~"+q(this.result))},a.readAsArrayBuffer(t)}else try{e(JSON.stringify(t))}catch(r){console.error("Couldn't convert value into a JSON string: ",t),e(null,r)}},deserialize:function(t){if(t.substring(0,Y)!==N)return JSON.parse(t);var e,r=t.substring(H),n=t.substring(Y,H);if(n===k&&I.test(r)){var i=r.match(I);e=i[1],r=r.substring(i[0].length)}var o=W(r);switch(n){case R:return o;case k:return a([o],{type:e});case P:return new Int8Array(o);case L:return new Uint8Array(o);case j:return new Uint8ClampedArray(o);case M:return new Int16Array(o);case F:return new Uint16Array(o);case B:return new Int32Array(o);case U:return new Uint32Array(o);case V:return new Float32Array(o);case z:return new Float64Array(o);default:throw Error("Unkown type: "+n)}},stringToBuffer:W,bufferToString:q};function G(t,e,r,n){t.executeSql("CREATE TABLE IF NOT EXISTS "+e.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],r,n)}function Z(t,e,r,n,i,a){t.executeSql(r,n,i,function(t,o){o.code===o.SYNTAX_ERR?t.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[e.storeName],function(t,s){s.rows.length?a(t,o):G(t,e,function(){t.executeSql(r,n,i,a)},a)},a):a(t,o)},a)}function J(t,e,r,n){var i=this;t=c(t);var a=new o(function(a,o){i.ready().then(function(){void 0===e&&(e=null);var s=e,u=i._dbInfo;u.serializer.serialize(e,function(e,c){c?o(c):u.db.transaction(function(r){Z(r,u,"INSERT OR REPLACE INTO "+u.storeName+" (key, value) VALUES (?, ?)",[t,e],function(){a(s)},function(t,e){o(e)})},function(e){if(e.code===e.QUOTA_ERR){if(n>0){a(J.apply(i,[t,s,r,n-1]));return}o(e)}})})}).catch(o)});return s(a,r),a}var X={_driver:"webSQLStorage",_initStorage:function(t){var e=this,r={db:null};if(t)for(var n in t)r[n]="string"!=typeof t[n]?t[n].toString():t[n];var i=new o(function(t,n){try{r.db=openDatabase(r.name,String(r.version),r.description,r.size)}catch(t){return n(t)}r.db.transaction(function(i){G(i,r,function(){e._dbInfo=r,t()},function(t,e){n(e)})},n)});return r.serializer=$,i},_support:"function"==typeof openDatabase,iterate:function(t,e){var r=this,n=new o(function(e,n){r.ready().then(function(){var i=r._dbInfo;i.db.transaction(function(r){Z(r,i,"SELECT * FROM "+i.storeName,[],function(r,n){for(var a=n.rows,o=a.length,s=0;s<o;s++){var u=a.item(s),c=u.value;if(c&&(c=i.serializer.deserialize(c)),void 0!==(c=t(c,u.key,s+1))){e(c);return}}e()},function(t,e){n(e)})})}).catch(n)});return s(n,e),n},getItem:function(t,e){var r=this;t=c(t);var n=new o(function(e,n){r.ready().then(function(){var i=r._dbInfo;i.db.transaction(function(r){Z(r,i,"SELECT * FROM "+i.storeName+" WHERE key = ? LIMIT 1",[t],function(t,r){var n=r.rows.length?r.rows.item(0).value:null;n&&(n=i.serializer.deserialize(n)),e(n)},function(t,e){n(e)})})}).catch(n)});return s(n,e),n},setItem:function(t,e,r){return J.apply(this,[t,e,r,1])},removeItem:function(t,e){var r=this;t=c(t);var n=new o(function(e,n){r.ready().then(function(){var i=r._dbInfo;i.db.transaction(function(r){Z(r,i,"DELETE FROM "+i.storeName+" WHERE key = ?",[t],function(){e()},function(t,e){n(e)})})}).catch(n)});return s(n,e),n},clear:function(t){var e=this,r=new o(function(t,r){e.ready().then(function(){var n=e._dbInfo;n.db.transaction(function(e){Z(e,n,"DELETE FROM "+n.storeName,[],function(){t()},function(t,e){r(e)})})}).catch(r)});return s(r,t),r},length:function(t){var e=this,r=new o(function(t,r){e.ready().then(function(){var n=e._dbInfo;n.db.transaction(function(e){Z(e,n,"SELECT COUNT(key) as c FROM "+n.storeName,[],function(e,r){t(r.rows.item(0).c)},function(t,e){r(e)})})}).catch(r)});return s(r,t),r},key:function(t,e){var r=this,n=new o(function(e,n){r.ready().then(function(){var i=r._dbInfo;i.db.transaction(function(r){Z(r,i,"SELECT key FROM "+i.storeName+" WHERE id = ? LIMIT 1",[t+1],function(t,r){e(r.rows.length?r.rows.item(0).key:null)},function(t,e){n(e)})})}).catch(n)});return s(n,e),n},keys:function(t){var e=this,r=new o(function(t,r){e.ready().then(function(){var n=e._dbInfo;n.db.transaction(function(e){Z(e,n,"SELECT key FROM "+n.storeName,[],function(e,r){for(var n=[],i=0;i<r.rows.length;i++)n.push(r.rows.item(i).key);t(n)},function(t,e){r(e)})})}).catch(r)});return s(r,t),r},dropInstance:function(t,e){e=l.apply(this,arguments);var r,n=this.config();(t="function"!=typeof t&&t||{}).name||(t.name=t.name||n.name,t.storeName=t.storeName||n.storeName);var i=this;return s(r=t.name?new o(function(e){var r;e((r=t.name===n.name?i._dbInfo.db:openDatabase(t.name,"","",0),t.storeName)?{db:r,storeNames:[t.storeName]}:new o(function(t,e){r.transaction(function(n){n.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(e,n){for(var i=[],a=0;a<n.rows.length;a++)i.push(n.rows.item(a).name);t({db:r,storeNames:i})},function(t,r){e(r)})},function(t){e(t)})}))}).then(function(t){return new o(function(e,r){t.db.transaction(function(n){for(var i=[],a=0,s=t.storeNames.length;a<s;a++)i.push(function(t){return new o(function(e,r){n.executeSql("DROP TABLE IF EXISTS "+t,[],function(){e()},function(t,e){r(e)})})}(t.storeNames[a]));o.all(i).then(function(){e()}).catch(function(t){r(t)})},function(t){r(t)})})}):o.reject("Invalid arguments"),e),r}};function Q(t,e){var r=t.name+"/";return t.storeName!==e.storeName&&(r+=t.storeName+"/"),r}var tt={_driver:"localStorageWrapper",_initStorage:function(t){var e={};if(t)for(var r in t)e[r]=t[r];return(e.keyPrefix=Q(t,this._defaultConfig),!function(){var t="_localforage_support_test";try{return localStorage.setItem(t,!0),localStorage.removeItem(t),!1}catch(t){return!0}}()||localStorage.length>0)?(this._dbInfo=e,e.serializer=$,o.resolve()):o.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(t){return!1}}(),iterate:function(t,e){var r=this,n=r.ready().then(function(){for(var e=r._dbInfo,n=e.keyPrefix,i=n.length,a=localStorage.length,o=1,s=0;s<a;s++){var u=localStorage.key(s);if(0===u.indexOf(n)){var c=localStorage.getItem(u);if(c&&(c=e.serializer.deserialize(c)),void 0!==(c=t(c,u.substring(i),o++)))return c}}});return s(n,e),n},getItem:function(t,e){var r=this;t=c(t);var n=r.ready().then(function(){var e=r._dbInfo,n=localStorage.getItem(e.keyPrefix+t);return n&&(n=e.serializer.deserialize(n)),n});return s(n,e),n},setItem:function(t,e,r){var n=this;t=c(t);var i=n.ready().then(function(){void 0===e&&(e=null);var r=e;return new o(function(i,a){var o=n._dbInfo;o.serializer.serialize(e,function(e,n){if(n)a(n);else try{localStorage.setItem(o.keyPrefix+t,e),i(r)}catch(t){("QuotaExceededError"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name)&&a(t),a(t)}})})});return s(i,r),i},removeItem:function(t,e){var r=this;t=c(t);var n=r.ready().then(function(){var e=r._dbInfo;localStorage.removeItem(e.keyPrefix+t)});return s(n,e),n},clear:function(t){var e=this,r=e.ready().then(function(){for(var t=e._dbInfo.keyPrefix,r=localStorage.length-1;r>=0;r--){var n=localStorage.key(r);0===n.indexOf(t)&&localStorage.removeItem(n)}});return s(r,t),r},length:function(t){var e=this.keys().then(function(t){return t.length});return s(e,t),e},key:function(t,e){var r=this,n=r.ready().then(function(){var e,n=r._dbInfo;try{e=localStorage.key(t)}catch(t){e=null}return e&&(e=e.substring(n.keyPrefix.length)),e});return s(n,e),n},keys:function(t){var e=this,r=e.ready().then(function(){for(var t=e._dbInfo,r=localStorage.length,n=[],i=0;i<r;i++){var a=localStorage.key(i);0===a.indexOf(t.keyPrefix)&&n.push(a.substring(t.keyPrefix.length))}return n});return s(r,t),r},dropInstance:function(t,e){if(e=l.apply(this,arguments),!(t="function"!=typeof t&&t||{}).name){var r,n=this.config();t.name=t.name||n.name,t.storeName=t.storeName||n.storeName}var i=this;return s(r=t.name?new o(function(e){e(t.storeName?Q(t,i._defaultConfig):t.name+"/")}).then(function(t){for(var e=localStorage.length-1;e>=0;e--){var r=localStorage.key(e);0===r.indexOf(t)&&localStorage.removeItem(r)}}):o.reject("Invalid arguments"),e),r}},te=function(t,e){for(var r,n=t.length,i=0;i<n;){if((r=t[i])===e||"number"==typeof r&&"number"==typeof e&&isNaN(r)&&isNaN(e))return!0;i++}return!1},tr=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},tn={},ta={},to={INDEXEDDB:S,WEBSQL:X,LOCALSTORAGE:tt},ts=[to.INDEXEDDB._driver,to.WEBSQL._driver,to.LOCALSTORAGE._driver],tu=["dropInstance"],tc=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(tu),tl={description:"",driver:ts.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function th(){for(var t=1;t<arguments.length;t++){var e=arguments[t];if(e)for(var r in e)e.hasOwnProperty(r)&&(tr(e[r])?arguments[0][r]=e[r].slice():arguments[0][r]=e[r])}return arguments[0]}var tf=new(function(){function t(e){for(var r in!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,t),to)if(to.hasOwnProperty(r)){var n=to[r],i=n._driver;this[r]=i,tn[i]||this.defineDriver(n)}this._defaultConfig=th({},tl),this._config=th({},this._defaultConfig,e),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return t.prototype.config=function(t){if((void 0===t?"undefined":n(t))==="object"){if(this._ready)return Error("Can't call config() after localforage has been used.");for(var e in t){if("storeName"===e&&(t[e]=t[e].replace(/\W/g,"_")),"version"===e&&"number"!=typeof t[e])return Error("Database version must be a number.");this._config[e]=t[e]}return!("driver"in t)||!t.driver||this.setDriver(this._config.driver)}return"string"==typeof t?this._config[t]:this._config},t.prototype.defineDriver=function(t,e,r){var n=new o(function(e,r){try{var n=t._driver,i=Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!t._driver){r(i);return}for(var a=tc.concat("_initStorage"),u=0,c=a.length;u<c;u++){var l=a[u];if((!te(tu,l)||t[l])&&"function"!=typeof t[l]){r(i);return}}!function(){for(var e=function(t){return function(){var e=Error("Method "+t+" is not implemented by the current driver"),r=o.reject(e);return s(r,arguments[arguments.length-1]),r}},r=0,n=tu.length;r<n;r++){var i=tu[r];t[i]||(t[i]=e(i))}}();var h=function(r){tn[n]&&console.info("Redefining LocalForage driver: "+n),tn[n]=t,ta[n]=r,e()};"_support"in t?t._support&&"function"==typeof t._support?t._support().then(h,r):h(!!t._support):h(!0)}catch(t){r(t)}});return u(n,e,r),n},t.prototype.driver=function(){return this._driver||null},t.prototype.getDriver=function(t,e,r){var n=tn[t]?o.resolve(tn[t]):o.reject(Error("Driver not found."));return u(n,e,r),n},t.prototype.getSerializer=function(t){var e=o.resolve($);return u(e,t),e},t.prototype.ready=function(t){var e=this,r=e._driverSet.then(function(){return null===e._ready&&(e._ready=e._initDriver()),e._ready});return u(r,t,t),r},t.prototype.setDriver=function(t,e,r){var n=this;tr(t)||(t=[t]);var i=this._getSupportedDrivers(t);function a(){n._config.driver=n.driver()}function s(t){return n._extend(t),a(),n._ready=n._initStorage(n._config),n._ready}var c=null!==this._driverSet?this._driverSet.catch(function(){return o.resolve()}):o.resolve();return this._driverSet=c.then(function(){var t=i[0];return n._dbInfo=null,n._ready=null,n.getDriver(t).then(function(t){n._driver=t._driver,a(),n._wrapLibraryMethodsWithReady(),n._initDriver=function(){var t=0;return function e(){for(;t<i.length;){var r=i[t];return t++,n._dbInfo=null,n._ready=null,n.getDriver(r).then(s).catch(e)}a();var u=Error("No available storage method found.");return n._driverSet=o.reject(u),n._driverSet}()}})}).catch(function(){a();var t=Error("No available storage method found.");return n._driverSet=o.reject(t),n._driverSet}),u(this._driverSet,e,r),this._driverSet},t.prototype.supports=function(t){return!!ta[t]},t.prototype._extend=function(t){th(this,t)},t.prototype._getSupportedDrivers=function(t){for(var e=[],r=0,n=t.length;r<n;r++){var i=t[r];this.supports(i)&&e.push(i)}return e},t.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0,e=tc.length;t<e;t++)!function(t,e){t[e]=function(){var r=arguments;return t.ready().then(function(){return t[e].apply(t,r)})}}(this,tc[t])},t.prototype.createInstance=function(e){return new t(e)},t}());e.exports=tf},{3:3}]},{},[4])(4);var tA="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==te?te:"undefined"!=typeof self?self:{};function tw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function tD(t){if(t.__esModule)return t;var e=t.default;if("function"==typeof e){var r=function t(){if(this instanceof t){var r=[null];return r.push.apply(r,arguments),new(Function.bind.apply(e,r))}return e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(e){var n=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(r,e,n.get?n:{enumerable:!0,get:function(){return t[e]}})}),r}var tO={exports:{}};S=tO.exports,x="undefined"!=typeof self?self:tA,N=I=function(){function t(){this.fetch=!1,this.DOMException=x.DOMException}return t.prototype=x,new t}(),function(t){var e={searchParams:"URLSearchParams"in N,iterable:"Symbol"in N&&"iterator"in Symbol,blob:"FileReader"in N&&"Blob"in N&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in N,arrayBuffer:"ArrayBuffer"in N};if(e.arrayBuffer)var r=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],n=ArrayBuffer.isView||function(t){return t&&r.indexOf(Object.prototype.toString.call(t))>-1};function i(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw TypeError("Invalid character in header field name");return t.toLowerCase()}function a(t){return"string"!=typeof t&&(t=String(t)),t}function o(t){var r={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return e.iterable&&(r[Symbol.iterator]=function(){return r}),r}function s(t){this.map={},t instanceof s?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function u(t){if(t.bodyUsed)return Promise.reject(TypeError("Already read"));t.bodyUsed=!0}function c(t){return new Promise(function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}})}function l(t){var e=new FileReader,r=c(e);return e.readAsArrayBuffer(t),r}function h(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function f(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t){if("string"==typeof t)this._bodyText=t;else if(e.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(e.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(e.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else{var r;e.arrayBuffer&&e.blob&&(r=t)&&DataView.prototype.isPrototypeOf(r)?(this._bodyArrayBuffer=h(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):e.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||n(t))?this._bodyArrayBuffer=h(t):this._bodyText=t=Object.prototype.toString.call(t)}}else this._bodyText="";!this.headers.get("content-type")&&("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):e.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},e.blob&&(this.blob=function(){var t=u(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(!this._bodyFormData)return Promise.resolve(new Blob([this._bodyText]));throw Error("could not read FormData body as blob")},this.arrayBuffer=function(){return this._bodyArrayBuffer?u(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(l)}),this.text=function(){var t,e,r,n=u(this);if(n)return n;if(this._bodyBlob)return t=this._bodyBlob,r=c(e=new FileReader),e.readAsText(t),r;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),r=Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}(this._bodyArrayBuffer));if(!this._bodyFormData)return Promise.resolve(this._bodyText);throw Error("could not read FormData body as text")},e.formData&&(this.formData=function(){return this.text().then(y)}),this.json=function(){return this.text().then(JSON.parse)},this}s.prototype.append=function(t,e){t=i(t),e=a(e);var r=this.map[t];this.map[t]=r?r+", "+e:e},s.prototype.delete=function(t){delete this.map[i(t)]},s.prototype.get=function(t){return t=i(t),this.has(t)?this.map[t]:null},s.prototype.has=function(t){return this.map.hasOwnProperty(i(t))},s.prototype.set=function(t,e){this.map[i(t)]=a(e)},s.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},s.prototype.keys=function(){var t=[];return this.forEach(function(e,r){t.push(r)}),o(t)},s.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),o(t)},s.prototype.entries=function(){var t=[];return this.forEach(function(e,r){t.push([r,e])}),o(t)},e.iterable&&(s.prototype[Symbol.iterator]=s.prototype.entries);var d=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function m(t,e){var r,n,i=(e=e||{}).body;if(t instanceof m){if(t.bodyUsed)throw TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new s(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,i||null==t._bodyInit||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",(e.headers||!this.headers)&&(this.headers=new s(e.headers)),this.method=(n=(r=e.method||this.method||"GET").toUpperCase(),d.indexOf(n)>-1?n:r),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function y(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var r=t.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(i))}}),e}function v(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new s(e.headers),this.url=e.url||"",this._initBody(t)}m.prototype.clone=function(){return new m(this,{body:this._bodyInit})},f.call(m.prototype),f.call(v.prototype),v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new s(this.headers),url:this.url})},v.error=function(){var t=new v(null,{status:0,statusText:""});return t.type="error",t};var g=[301,302,303,307,308];v.redirect=function(t,e){if(-1===g.indexOf(e))throw RangeError("Invalid status code");return new v(null,{status:e,headers:{location:t}})},t.DOMException=N.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(t,e){this.message=t,this.name=e;var r=Error(t);this.stack=r.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function b(r,n){return new Promise(function(i,a){var o=new m(r,n);if(o.signal&&o.signal.aborted)return a(new t.DOMException("Aborted","AbortError"));var u=new XMLHttpRequest({mozSystem:!0});function c(){u.abort()}u.onload=function(){var t,e,r={status:u.status,statusText:u.statusText,headers:(t=u.getAllResponseHeaders()||"",e=new s,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var r=t.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();e.append(n,i)}}),e)};r.url="responseURL"in u?u.responseURL:r.headers.get("X-Request-URL"),i(new v("response"in u?u.response:u.responseText,r))},u.onerror=function(){a(TypeError("Network request failed"))},u.ontimeout=function(){a(TypeError("Network request failed"))},u.onabort=function(){a(new t.DOMException("Aborted","AbortError"))},u.open(o.method,o.url,!0),"include"===o.credentials?u.withCredentials=!0:"omit"===o.credentials&&(u.withCredentials=!1),"responseType"in u&&e.blob&&(u.responseType="blob"),o.headers.forEach(function(t,e){u.setRequestHeader(e,t)}),o.signal&&(o.signal.addEventListener("abort",c),u.onreadystatechange=function(){4===u.readyState&&o.signal.removeEventListener("abort",c)}),u.send(void 0===o._bodyInit?null:o._bodyInit)})}b.polyfill=!0,N.fetch||(N.fetch=b,N.Headers=s,N.Request=m,N.Response=v),t.Headers=s,t.Request=m,t.Response=v,t.fetch=b,Object.defineProperty(t,"__esModule",{value:!0})}({}),I.fetch.ponyfill=!0,delete I.fetch.polyfill,(S=I.fetch).default=I.fetch,S.fetch=I.fetch,S.Headers=I.Headers,S.Request=I.Request,S.Response=I.Response,tO.exports=S;var tC=tO.exports,tS=void 0!==te?te:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function tx(){throw Error("setTimeout has not been defined")}function tI(){throw Error("clearTimeout has not been defined")}var tN=tx,tY=tI;function tR(t){if(tN===setTimeout)return setTimeout(t,0);if((tN===tx||!tN)&&setTimeout)return tN=setTimeout,setTimeout(t,0);try{return tN(t,0)}catch(e){try{return tN.call(null,t,0)}catch(e){return tN.call(this,t,0)}}}"function"==typeof tS.setTimeout&&(tN=setTimeout),"function"==typeof tS.clearTimeout&&(tY=clearTimeout);var tk=[],tP=!1,tL=-1;function tj(){tP&&U&&(tP=!1,U.length?tk=U.concat(tk):tL=-1,tk.length&&tM())}function tM(){if(!tP){var t=tR(tj);tP=!0;for(var e=tk.length;e;){for(U=tk,tk=[];++tL<e;)U&&U[tL].run();tL=-1,e=tk.length}U=null,tP=!1,function(t){if(tY===clearTimeout)return clearTimeout(t);if((tY===tI||!tY)&&clearTimeout)return tY=clearTimeout,clearTimeout(t);try{tY(t)}catch(e){try{return tY.call(null,t)}catch(e){return tY.call(this,t)}}}(t)}}function tB(t){var e=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];tk.push(new tF(t,e)),1!==tk.length||tP||tR(tM)}function tF(t,e){this.fun=t,this.array=e}tF.prototype.run=function(){this.fun.apply(null,this.array)};var tU=tS.performance||{},tV=(tU.now||tU.mozNow||tU.msNow||tU.oNow||tU.webkitNow,{env:{}}),tz={exports:{}};(Y=tz.exports).formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+tz.exports.humanize(this.diff),this.useColors){var e="color: "+this.color;t.splice(1,0,e,"color: inherit");var r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,function(t){"%%"!==t&&(r++,"%c"===t&&(n=r))}),t.splice(n,0,e)}},Y.save=function(t){try{t?Y.storage.setItem("debug",t):Y.storage.removeItem("debug")}catch(t){}},Y.load=function(){var t;try{t=Y.storage.getItem("debug")}catch(t){}return!t&&void 0!==tV&&"env"in tV&&(t=tV.env.DEBUG),t},Y.useColors=function(){return"undefined"!=typeof window&&!!window.process&&("renderer"===window.process.type||!!window.process.__nwjs)||!("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},Y.storage=function(){try{return localStorage}catch(t){}}(),Y.destroy=(R=!1,function(){R||(R=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}),Y.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],Y.log=console.debug||console.log||function(){},tz.exports=function(t){function e(t){var n,i,a,o=null;function s(){for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];if(s.enabled){var a=Number(new Date),o=a-(n||a);s.diff=o,s.prev=n,s.curr=a,n=a,r[0]=e.coerce(r[0]),"string"!=typeof r[0]&&r.unshift("%O");var u=0;r[0]=r[0].replace(/%([a-zA-Z%])/g,function(t,n){if("%%"===t)return"%";u++;var i=e.formatters[n];if("function"==typeof i){var a=r[u];t=i.call(s,a),r.splice(u,1),u--}return t}),e.formatArgs.call(s,r),(s.log||e.log).apply(s,r)}}return s.namespace=t,s.useColors=e.useColors(),s.color=e.selectColor(t),s.extend=r,s.destroy=e.destroy,Object.defineProperty(s,"enabled",{enumerable:!0,configurable:!1,get:function(){return null!==o?o:(i!==e.namespaces&&(i=e.namespaces,a=e.enabled(t)),a)},set:function(t){o=t}}),"function"==typeof e.init&&e.init(s),s}function r(t,r){var n=e(this.namespace+(void 0===r?":":r)+t);return n.log=this.log,n}function n(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return e.debug=e,e.default=e,e.coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){var t=tg(e.names.map(n)).concat(tg(e.skips.map(n).map(function(t){return"-"+t}))).join(",");return e.enable(""),t},e.enable=function(t){e.save(t),e.namespaces=t,e.names=[],e.skips=[];var r,n=("string"==typeof t?t:"").split(/[\s,]+/),i=n.length;for(r=0;r<i;r++)n[r]&&("-"===(t=n[r].replace(/\*/g,".*?"))[0]?e.skips.push(RegExp("^"+t.slice(1)+"$")):e.names.push(RegExp("^"+t+"$")))},e.enabled=function(t){var r,n;if("*"===t[t.length-1])return!0;for(r=0,n=e.skips.length;r<n;r++)if(e.skips[r].test(t))return!1;for(r=0,n=e.names.length;r<n;r++)if(e.names[r].test(t))return!0;return!1},e.humanize=function(){if(z)return V;function t(t,e,r,n){return Math.round(t/r)+" "+n+(e>=1.5*r?"s":"")}return z=1,V=function(e,r){r=r||{};var n,i,a=void 0===e?"undefined":ti(e);if("string"===a&&e.length>0)return function(t){if(!((t=String(t)).length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*r;case"weeks":case"week":case"w":return 6048e5*r;case"days":case"day":case"d":return 864e5*r;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*r;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*r;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}(e);if("number"===a&&isFinite(e))return r.long?(n=Math.abs(e))>=864e5?t(e,n,864e5,"day"):n>=36e5?t(e,n,36e5,"hour"):n>=6e4?t(e,n,6e4,"minute"):n>=1e3?t(e,n,1e3,"second"):e+" ms":(i=Math.abs(e))>=864e5?Math.round(e/864e5)+"d":i>=36e5?Math.round(e/36e5)+"h":i>=6e4?Math.round(e/6e4)+"m":i>=1e3?Math.round(e/1e3)+"s":e+"ms";throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}}(),e.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach(function(r){e[r]=t[r]}),e.names=[],e.skips=[],e.formatters={},e.selectColor=function(t){for(var r=0,n=0;n<t.length;n++)r=(r<<5)-r+t.charCodeAt(n)|0;return e.colors[Math.abs(r)%e.colors.length]},e.enable(e.load()),e}(Y),tz.exports.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}};var tH=tw(tz.exports);(k=H||(H={})).CALENDAR_SERVER="http://calendarserver.org/ns/",k.CALDAV_APPLE="http://apple.com/ns/ical/",k.CALDAV="urn:ietf:params:xml:ns:caldav",k.CARDDAV="urn:ietf:params:xml:ns:carddav",k.DAV="DAV:";var tK=(ts(K={},H.CALDAV,"xmlns:c"),ts(K,H.CARDDAV,"xmlns:card"),ts(K,H.CALENDAR_SERVER,"xmlns:cs"),ts(K,H.CALDAV_APPLE,"xmlns:ca"),ts(K,H.DAV,"xmlns:d"),K);(P=W||(W={})).CALDAV="c",P.CARDDAV="card",P.CALENDAR_SERVER="cs",P.CALDAV_APPLE="ca",P.DAV="d",(L=q||(q={})).VEVENT="VEVENT",L.VTODO="VTODO",L.VJOURNAL="VJOURNAL",L.VFREEBUSY="VFREEBUSY",L.VTIMEZONE="VTIMEZONE",L.VALARM="VALARM";var tW=[],tq=[],t$="undefined"!=typeof Uint8Array?Uint8Array:Array,tG=!1;function tZ(){tG=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,r=t.length;e<r;++e)tW[e]=t[e],tq[t.charCodeAt(e)]=e;tq["-".charCodeAt(0)]=62,tq["_".charCodeAt(0)]=63}function tJ(t){tG||tZ();for(var e,r=t.length,n=r%3,i="",a=[],o=0,s=r-n;o<s;o+=16383)a.push(function(t,e,r){for(var n,i=[],a=e;a<r;a+=3)i.push(tW[(n=(t[a]<<16)+(t[a+1]<<8)+t[a+2])>>18&63]+tW[n>>12&63]+tW[n>>6&63]+tW[63&n]);return i.join("")}(t,o,o+16383>s?s:o+16383));return 1===n?i+=tW[(e=t[r-1])>>2]+tW[e<<4&63]+"==":2===n&&(i+=tW[(e=(t[r-2]<<8)+t[r-1])>>10]+tW[e>>4&63]+tW[e<<2&63]+"="),a.push(i),a.join("")}function tX(t,e,r,n,i){var a,o,s=8*i-n-1,u=(1<<s)-1,c=u>>1,l=-7,h=r?i-1:0,f=r?-1:1,d=t[e+h];for(h+=f,a=d&(1<<-l)-1,d>>=-l,l+=s;l>0;a=256*a+t[e+h],h+=f,l-=8);for(o=a&(1<<-l)-1,a>>=-l,l+=n;l>0;o=256*o+t[e+h],h+=f,l-=8);if(0===a)a=1-c;else{if(a===u)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,n),a-=c}return(d?-1:1)*o*Math.pow(2,a-n)}function tQ(t,e,r,n,i,a){var o,s,u,c=8*a-i-1,l=(1<<c)-1,h=l>>1,f=23===i?5960464477539062e-23:0,d=n?0:a-1,m=n?1:-1,y=e<0||0===e&&1/e<0?1:0;for(isNaN(e=Math.abs(e))||e===1/0?(s=isNaN(e)?1:0,o=l):(o=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-o))<1&&(o--,u*=2),o+h>=1?e+=f/u:e+=f*Math.pow(2,1-h),e*u>=2&&(o++,u/=2),o+h>=l?(s=0,o=l):o+h>=1?(s=(e*u-1)*Math.pow(2,i),o+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;t[r+d]=255&s,d+=m,s/=256,i-=8);for(o=o<<i|s,c+=i;c>0;t[r+d]=255&o,d+=m,o/=256,c-=8);t[r+d-m]|=128*y}var t0={}.toString,t1=Array.isArray||function(t){return"[object Array]"==t0.call(t)};function t2(){return t6.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function t3(t,e){if(t2()<e)throw RangeError("Invalid typed array length");return t6.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=t6.prototype:(null===t&&(t=new t6(e)),t.length=e),t}function t6(t,e,r){if(!t6.TYPED_ARRAY_SUPPORT&&!(this instanceof t6))return new t6(t,e,r);if("number"==typeof t){if("string"==typeof e)throw Error("If encoding is specified then the first argument must be a string");return t5(this,t)}return t8(this,t,e,r)}function t8(t,e,r,n){if("number"==typeof e)throw TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw RangeError("'length' is out of bounds");return e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n),t6.TYPED_ARRAY_SUPPORT?(t=e).__proto__=t6.prototype:t=t9(t,e),t}(t,e,r,n):"string"==typeof e?function(t,e,r){if(("string"!=typeof r||""===r)&&(r="utf8"),!t6.isEncoding(r))throw TypeError('"encoding" must be a valid string encoding');var n=0|ee(e,r),i=(t=t3(t,n)).write(e,r);return i!==n&&(t=t.slice(0,i)),t}(t,e,r):function(t,e){if(et(e)){var r,n=0|t7(e.length);return 0===(t=t3(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?t3(t,0):t9(t,e);if("Buffer"===e.type&&t1(e.data))return t9(t,e.data)}throw TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function t4(t){if("number"!=typeof t)throw TypeError('"size" argument must be a number');if(t<0)throw RangeError('"size" argument must not be negative')}function t5(t,e){if(t4(e),t=t3(t,e<0?0:0|t7(e)),!t6.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function t9(t,e){var r=e.length<0?0:0|t7(e.length);t=t3(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function t7(t){if(t>=t2())throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+t2().toString(16)+" bytes");return 0|t}function et(t){return!!(null!=t&&t._isBuffer)}function ee(t,e){if(et(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return em(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return ev(t).length;default:if(n)return em(t).length;e=(""+e).toLowerCase(),n=!0}}function er(t,e,r){var n,i,a=!1;if((void 0===e||e<0)&&(e=0),e>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0||(r>>>=0)<=(e>>>=0)))return"";for(t||(t="utf8");;)switch(t){case"hex":return function(t,e,r){var n,i=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>i)&&(r=i);for(var a="",o=e;o<r;++o)a+=(n=t[o])<16?"0"+n.toString(16):n.toString(16);return a}(this,e,r);case"utf8":case"utf-8":return eo(this,e,r);case"ascii":return function(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}(this,e,r);case"latin1":case"binary":return function(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}(this,e,r);case"base64":return n=e,i=r,0===n&&i===this.length?tJ(this):tJ(this.slice(n,i));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(t,e,r){for(var n=t.slice(e,r),i="",a=0;a<n.length;a+=2)i+=String.fromCharCode(n[a]+256*n[a+1]);return i}(this,e,r);default:if(a)throw TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),a=!0}}function en(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function ei(t,e,r,n,i){if(0===t.length)return -1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),isNaN(r=+r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return -1;r=t.length-1}else if(r<0){if(!i)return -1;r=0}if("string"==typeof e&&(e=t6.from(e,n)),et(e))return 0===e.length?-1:ea(t,e,r,n,i);if("number"==typeof e)return(e&=255,t6.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf)?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):ea(t,[e],r,n,i);throw TypeError("val must be string, number or Buffer")}function ea(t,e,r,n,i){var a,o=1,s=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return -1;o=2,s/=2,u/=2,r/=2}function c(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(i){var l=-1;for(a=r;a<s;a++)if(c(t,a)===c(e,-1===l?0:a-l)){if(-1===l&&(l=a),a-l+1===u)return l*o}else -1!==l&&(a-=a-l),l=-1}else for(r+u>s&&(r=s-u),a=r;a>=0;a--){for(var h=!0,f=0;f<u;f++)if(c(t,a+f)!==c(e,f)){h=!1;break}if(h)return a}return -1}function eo(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var a,o,s,u,c=t[i],l=null,h=c>239?4:c>223?3:c>191?2:1;if(i+h<=r)switch(h){case 1:c<128&&(l=c);break;case 2:(192&(a=t[i+1]))==128&&(u=(31&c)<<6|63&a)>127&&(l=u);break;case 3:a=t[i+1],o=t[i+2],(192&a)==128&&(192&o)==128&&(u=(15&c)<<12|(63&a)<<6|63&o)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:a=t[i+1],o=t[i+2],s=t[i+3],(192&a)==128&&(192&o)==128&&(192&s)==128&&(u=(15&c)<<18|(63&a)<<12|(63&o)<<6|63&s)>65535&&u<1114112&&(l=u)}null===l?(l=65533,h=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),i+=h}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=4096));return r}(n)}function es(t,e,r){if(t%1!=0||t<0)throw RangeError("offset is not uint");if(t+e>r)throw RangeError("Trying to access beyond buffer length")}function eu(t,e,r,n,i,a){if(!et(t))throw TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<a)throw RangeError('"value" argument is out of bounds');if(r+n>t.length)throw RangeError("Index out of range")}function ec(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,a=Math.min(t.length-r,2);i<a;++i)t[r+i]=(e&255<<8*(n?i:1-i))>>>(n?i:1-i)*8}function el(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,a=Math.min(t.length-r,4);i<a;++i)t[r+i]=e>>>(n?i:3-i)*8&255}function eh(t,e,r,n,i,a){if(r+n>t.length||r<0)throw RangeError("Index out of range")}function ef(t,e,r,n,i){return i||eh(t,e,r,4),tQ(t,e,r,n,23,4),r+4}function ed(t,e,r,n,i){return i||eh(t,e,r,8),tQ(t,e,r,n,52,8),r+8}t6.TYPED_ARRAY_SUPPORT=void 0===tS.TYPED_ARRAY_SUPPORT||tS.TYPED_ARRAY_SUPPORT,t2(),t6.poolSize=8192,t6._augment=function(t){return t.__proto__=t6.prototype,t},t6.from=function(t,e,r){return t8(null,t,e,r)},t6.TYPED_ARRAY_SUPPORT&&(t6.prototype.__proto__=Uint8Array.prototype,t6.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&t6[Symbol.species]),t6.alloc=function(t,e,r){return(t4(t),t<=0)?t3(null,t):void 0!==e?"string"==typeof r?t3(null,t).fill(e,r):t3(null,t).fill(e):t3(null,t)},t6.allocUnsafe=function(t){return t5(null,t)},t6.allocUnsafeSlow=function(t){return t5(null,t)},t6.isBuffer=function(t){return null!=t&&(!!t._isBuffer||eb(t)||"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&eb(t.slice(0,0)))},t6.compare=function(t,e){if(!et(t)||!et(e))throw TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,i=0,a=Math.min(r,n);i<a;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},t6.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},t6.concat=function(t,e){if(!t1(t))throw TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return t6.alloc(0);if(void 0===e)for(r=0,e=0;r<t.length;++r)e+=t[r].length;var r,n=t6.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var a=t[r];if(!et(a))throw TypeError('"list" argument must be an Array of Buffers');a.copy(n,i),i+=a.length}return n},t6.byteLength=ee,t6.prototype._isBuffer=!0,t6.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)en(this,e,e+1);return this},t6.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)en(this,e,e+3),en(this,e+1,e+2);return this},t6.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)en(this,e,e+7),en(this,e+1,e+6),en(this,e+2,e+5),en(this,e+3,e+4);return this},t6.prototype.toString=function(){var t=0|this.length;return 0===t?"":0==arguments.length?eo(this,0,t):er.apply(this,arguments)},t6.prototype.equals=function(t){if(!et(t))throw TypeError("Argument must be a Buffer");return this===t||0===t6.compare(this,t)},t6.prototype.inspect=function(){var t="";return this.length>0&&(t=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(t+=" ... ")),"<Buffer "+t+">"},t6.prototype.compare=function(t,e,r,n,i){if(!et(t))throw TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return -1;if(e>=r)return 1;if(e>>>=0,r>>>=0,n>>>=0,i>>>=0,this===t)return 0;for(var a=i-n,o=r-e,s=Math.min(a,o),u=this.slice(n,i),c=t.slice(e,r),l=0;l<s;++l)if(u[l]!==c[l]){a=u[l],o=c[l];break}return a<o?-1:o<a?1:0},t6.prototype.includes=function(t,e,r){return -1!==this.indexOf(t,e,r)},t6.prototype.indexOf=function(t,e,r){return ei(this,t,e,r,!0)},t6.prototype.lastIndexOf=function(t,e,r){return ei(this,t,e,r,!1)},t6.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else if(isFinite(e))e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var i,a,o,s,u,c,l,h,f,d,m,y,v=this.length-e;if((void 0===r||r>v)&&(r=v),t.length>0&&(r<0||e<0)||e>this.length)throw RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var g=!1;;)switch(n){case"hex":return function(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var a=e.length;if(a%2!=0)throw TypeError("Invalid hex string");n>a/2&&(n=a/2);for(var o=0;o<n;++o){var s=parseInt(e.substr(2*o,2),16);if(isNaN(s))break;t[r+o]=s}return o}(this,t,e,r);case"utf8":case"utf-8":return u=e,c=r,eg(em(t,this.length-u),this,u,c);case"ascii":return l=e,h=r,eg(ey(t),this,l,h);case"latin1":case"binary":return i=this,a=t,o=e,s=r,eg(ey(a),i,o,s);case"base64":return f=e,d=r,eg(ev(t),this,f,d);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return m=e,y=r,eg(function(t,e){for(var r,n,i=[],a=0;a<t.length&&!((e-=2)<0);++a)n=(r=t.charCodeAt(a))>>8,i.push(r%256),i.push(n);return i}(t,this.length-m),this,m,y);default:if(g)throw TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),g=!0}},t6.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},t6.prototype.slice=function(t,e){var r,n=this.length;if(t=~~t,e=void 0===e?n:~~e,t<0?(t+=n)<0&&(t=0):t>n&&(t=n),e<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),t6.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=t6.prototype;else{var i=e-t;r=new t6(i,void 0);for(var a=0;a<i;++a)r[a]=this[a+t]}return r},t6.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||es(t,e,this.length);for(var n=this[t],i=1,a=0;++a<e&&(i*=256);)n+=this[t+a]*i;return n},t6.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||es(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},t6.prototype.readUInt8=function(t,e){return e||es(t,1,this.length),this[t]},t6.prototype.readUInt16LE=function(t,e){return e||es(t,2,this.length),this[t]|this[t+1]<<8},t6.prototype.readUInt16BE=function(t,e){return e||es(t,2,this.length),this[t]<<8|this[t+1]},t6.prototype.readUInt32LE=function(t,e){return e||es(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},t6.prototype.readUInt32BE=function(t,e){return e||es(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},t6.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||es(t,e,this.length);for(var n=this[t],i=1,a=0;++a<e&&(i*=256);)n+=this[t+a]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},t6.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||es(t,e,this.length);for(var n=e,i=1,a=this[t+--n];n>0&&(i*=256);)a+=this[t+--n]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*e)),a},t6.prototype.readInt8=function(t,e){return(e||es(t,1,this.length),128&this[t])?-((255-this[t]+1)*1):this[t]},t6.prototype.readInt16LE=function(t,e){e||es(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},t6.prototype.readInt16BE=function(t,e){e||es(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},t6.prototype.readInt32LE=function(t,e){return e||es(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},t6.prototype.readInt32BE=function(t,e){return e||es(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},t6.prototype.readFloatLE=function(t,e){return e||es(t,4,this.length),tX(this,t,!0,23,4)},t6.prototype.readFloatBE=function(t,e){return e||es(t,4,this.length),tX(this,t,!1,23,4)},t6.prototype.readDoubleLE=function(t,e){return e||es(t,8,this.length),tX(this,t,!0,52,8)},t6.prototype.readDoubleBE=function(t,e){return e||es(t,8,this.length),tX(this,t,!1,52,8)},t6.prototype.writeUIntLE=function(t,e,r,n){if(t=+t,e|=0,r|=0,!n){var i=Math.pow(2,8*r)-1;eu(this,t,e,r,i,0)}var a=1,o=0;for(this[e]=255&t;++o<r&&(a*=256);)this[e+o]=t/a&255;return e+r},t6.prototype.writeUIntBE=function(t,e,r,n){if(t=+t,e|=0,r|=0,!n){var i=Math.pow(2,8*r)-1;eu(this,t,e,r,i,0)}var a=r-1,o=1;for(this[e+a]=255&t;--a>=0&&(o*=256);)this[e+a]=t/o&255;return e+r},t6.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||eu(this,t,e,1,255,0),t6.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},t6.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||eu(this,t,e,2,65535,0),t6.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):ec(this,t,e,!0),e+2},t6.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||eu(this,t,e,2,65535,0),t6.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):ec(this,t,e,!1),e+2},t6.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||eu(this,t,e,4,4294967295,0),t6.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):el(this,t,e,!0),e+4},t6.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||eu(this,t,e,4,4294967295,0),t6.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):el(this,t,e,!1),e+4},t6.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);eu(this,t,e,r,i-1,-i)}var a=0,o=1,s=0;for(this[e]=255&t;++a<r&&(o*=256);)t<0&&0===s&&0!==this[e+a-1]&&(s=1),this[e+a]=(t/o>>0)-s&255;return e+r},t6.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);eu(this,t,e,r,i-1,-i)}var a=r-1,o=1,s=0;for(this[e+a]=255&t;--a>=0&&(o*=256);)t<0&&0===s&&0!==this[e+a+1]&&(s=1),this[e+a]=(t/o>>0)-s&255;return e+r},t6.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||eu(this,t,e,1,127,-128),t6.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},t6.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||eu(this,t,e,2,32767,-32768),t6.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):ec(this,t,e,!0),e+2},t6.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||eu(this,t,e,2,32767,-32768),t6.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):ec(this,t,e,!1),e+2},t6.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||eu(this,t,e,4,2147483647,-2147483648),t6.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):el(this,t,e,!0),e+4},t6.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||eu(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),t6.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):el(this,t,e,!1),e+4},t6.prototype.writeFloatLE=function(t,e,r){return ef(this,t,e,!0,r)},t6.prototype.writeFloatBE=function(t,e,r){return ef(this,t,e,!1,r)},t6.prototype.writeDoubleLE=function(t,e,r){return ed(this,t,e,!0,r)},t6.prototype.writeDoubleBE=function(t,e,r){return ed(this,t,e,!1,r)},t6.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r||0===t.length||0===this.length)return 0;if(e<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("sourceStart out of bounds");if(n<0)throw RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i,a=n-r;if(this===t&&r<e&&e<n)for(i=a-1;i>=0;--i)t[i+e]=this[i+r];else if(a<1e3||!t6.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)t[i+e]=this[i+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+a),e);return a},t6.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var i,a=t.charCodeAt(0);a<256&&(t=a)}if(void 0!==n&&"string"!=typeof n)throw TypeError("encoding must be a string");if("string"==typeof n&&!t6.isEncoding(n))throw TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw RangeError("Out of range index");if(r<=e)return this;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(i=e;i<r;++i)this[i]=t;else{var o=et(t)?t:em(new t6(t,n).toString()),s=o.length;for(i=0;i<r-e;++i)this[i+e]=o[i%s]}return this};var ep=/[^+\/0-9A-Za-z-_]/g;function em(t,e){e=e||1/0;for(var r,n=t.length,i=null,a=[],o=0;o<n;++o){if((r=t.charCodeAt(o))>55295&&r<57344){if(!i){if(r>56319||o+1===n){(e-=3)>-1&&a.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&a.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(e-=3)>-1&&a.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;a.push(r)}else if(r<2048){if((e-=2)<0)break;a.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;a.push(r>>12|224,r>>6&63|128,63&r|128)}else if(r<1114112){if((e-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}else throw Error("Invalid code point")}return a}function ey(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}function ev(t){return function(t){tG||tZ();var e,r,n,i,a,o,s=t.length;if(s%4>0)throw Error("Invalid string. Length must be a multiple of 4");a="="===t[s-2]?2:"="===t[s-1]?1:0,o=new t$(3*s/4-a),n=a>0?s-4:s;var u=0;for(e=0,r=0;e<n;e+=4,r+=3)i=tq[t.charCodeAt(e)]<<18|tq[t.charCodeAt(e+1)]<<12|tq[t.charCodeAt(e+2)]<<6|tq[t.charCodeAt(e+3)],o[u++]=i>>16&255,o[u++]=i>>8&255,o[u++]=255&i;return 2===a?(i=tq[t.charCodeAt(e)]<<2|tq[t.charCodeAt(e+1)]>>4,o[u++]=255&i):1===a&&(i=tq[t.charCodeAt(e)]<<10|tq[t.charCodeAt(e+1)]<<4|tq[t.charCodeAt(e+2)]>>2,o[u++]=i>>8&255,o[u++]=255&i),o}(function(t){var e;if((t=((e=t).trim?e.trim():e.replace(/^\s+|\s+$/g,"")).replace(ep,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function eg(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length)&&!(i>=t.length);++i)e[i+r]=t[i];return i}function eb(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}var e_={};function eT(){}function eE(){eE.init.call(this)}function eA(t){return void 0===t._maxListeners?eE.defaultMaxListeners:t._maxListeners}function ew(t,e,r,n){if("function"!=typeof r)throw TypeError('"listener" argument must be a function');if((a=t._events)?(a.newListener&&(t.emit("newListener",e,r.listener?r.listener:r),a=t._events),o=a[e]):(a=t._events=new eT,t._eventsCount=0),o){if("function"==typeof o?o=a[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),!o.warned&&(i=eA(t))&&i>0&&o.length>i){o.warned=!0;var i,a,o,s=Error("Possible EventEmitter memory leak detected. "+o.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=t,s.type=e,s.count=o.length,"function"==typeof console.warn?console.warn(s):console.log(s)}}else o=a[e]=r,++t._eventsCount;return t}function eD(t,e,r){var n=!1;function i(){t.removeListener(e,i),n||(n=!0,r.apply(t,arguments))}return i.listener=r,i}function eO(t){var e=this._events;if(e){var r=e[t];if("function"==typeof r)return 1;if(r)return r.length}return 0}function eC(t,e){for(var r=Array(e);e--;)r[e]=t[e];return r}eT.prototype=Object.create(null),eE.EventEmitter=eE,eE.usingDomains=!1,eE.prototype.domain=void 0,eE.prototype._events=void 0,eE.prototype._maxListeners=void 0,eE.defaultMaxListeners=10,eE.init=function(){this.domain=null,eE.usingDomains&&$.active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new eT,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},eE.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},eE.prototype.getMaxListeners=function(){return eA(this)},eE.prototype.emit=function(t){var e,r,n,i,a,o,s,u="error"===t;if(o=this._events)u=u&&null==o.error;else if(!u)return!1;if(s=this.domain,u){if(e=arguments[1],s)e||(e=Error('Uncaught, unspecified "error" event')),e.domainEmitter=this,e.domain=s,e.domainThrown=!1,s.emit("error",e);else if(e instanceof Error)throw e;else{var c=Error('Uncaught, unspecified "error" event. ('+e+")");throw c.context=e,c}return!1}if(!(r=o[t]))return!1;var l="function"==typeof r;switch(n=arguments.length){case 1:!function(t,e,r){if(e)t.call(r);else for(var n=t.length,i=eC(t,n),a=0;a<n;++a)i[a].call(r)}(r,l,this);break;case 2:!function(t,e,r,n){if(e)t.call(r,n);else for(var i=t.length,a=eC(t,i),o=0;o<i;++o)a[o].call(r,n)}(r,l,this,arguments[1]);break;case 3:!function(t,e,r,n,i){if(e)t.call(r,n,i);else for(var a=t.length,o=eC(t,a),s=0;s<a;++s)o[s].call(r,n,i)}(r,l,this,arguments[1],arguments[2]);break;case 4:!function(t,e,r,n,i,a){if(e)t.call(r,n,i,a);else for(var o=t.length,s=eC(t,o),u=0;u<o;++u)s[u].call(r,n,i,a)}(r,l,this,arguments[1],arguments[2],arguments[3]);break;default:for(a=1,i=Array(n-1);a<n;a++)i[a-1]=arguments[a];!function(t,e,r,n){if(e)t.apply(r,n);else for(var i=t.length,a=eC(t,i),o=0;o<i;++o)a[o].apply(r,n)}(r,l,this,i)}return!0},eE.prototype.addListener=function(t,e){return ew(this,t,e,!1)},eE.prototype.on=eE.prototype.addListener,eE.prototype.prependListener=function(t,e){return ew(this,t,e,!0)},eE.prototype.once=function(t,e){if("function"!=typeof e)throw TypeError('"listener" argument must be a function');return this.on(t,eD(this,t,e)),this},eE.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw TypeError('"listener" argument must be a function');return this.prependListener(t,eD(this,t,e)),this},eE.prototype.removeListener=function(t,e){var r,n,i,a,o;if("function"!=typeof e)throw TypeError('"listener" argument must be a function');if(!(n=this._events)||!(r=n[t]))return this;if(r===e||r.listener&&r.listener===e)0==--this._eventsCount?this._events=new eT:(delete n[t],n.removeListener&&this.emit("removeListener",t,r.listener||e));else if("function"!=typeof r){for(i=-1,a=r.length;a-- >0;)if(r[a]===e||r[a].listener&&r[a].listener===e){o=r[a].listener,i=a;break}if(i<0)return this;if(1===r.length){if(r[0]=void 0,0==--this._eventsCount)return this._events=new eT,this;delete n[t]}else(function(t,e){for(var r=e,n=r+1,i=t.length;n<i;r+=1,n+=1)t[r]=t[n];t.pop()})(r,i);n.removeListener&&this.emit("removeListener",t,o||e)}return this},eE.prototype.off=function(t,e){return this.removeListener(t,e)},eE.prototype.removeAllListeners=function(t){if(!(r=this._events))return this;if(!r.removeListener)return 0==arguments.length?(this._events=new eT,this._eventsCount=0):r[t]&&(0==--this._eventsCount?this._events=new eT:delete r[t]),this;if(0==arguments.length){for(var e,r,n,i=Object.keys(r),a=0;a<i.length;++a)"removeListener"!==(n=i[a])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=new eT,this._eventsCount=0,this}if("function"==typeof(e=r[t]))this.removeListener(t,e);else if(e)do this.removeListener(t,e[e.length-1]);while(e[0])return this},eE.prototype.listeners=function(t){var e,r=this._events;return r&&(e=r[t])?"function"==typeof e?[e.listener||e]:function(t){for(var e=Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}(e):[]},eE.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):eO.call(t,e)},eE.prototype.listenerCount=eO,eE.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var eS="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t},ex=/%[sdj%]/g;function eI(t){if(!eB(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(eY(arguments[r]));return e.join(" ")}for(var r=1,n=arguments,i=n.length,a=String(t).replace(ex,function(t){if("%%"===t)return"%";if(r>=i)return t;switch(t){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(t){return"[Circular]"}default:return t}}),o=n[r];r<i;o=n[++r])null!==o&&eV(o)?a+=" "+eY(o):a+=" "+o;return a}var eN={};function eY(t,e){var r={seen:[],stylize:ek};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),eM(e)?r.showHidden=e:e&&function(t,e){if(!e||!eV(e))return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t}(r,e),eF(r.showHidden)&&(r.showHidden=!1),eF(r.depth)&&(r.depth=2),eF(r.colors)&&(r.colors=!1),eF(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=eR),eP(r,t,r.depth)}function eR(t,e){var r=eY.styles[e];return r?"\x1b["+eY.colors[r][0]+"m"+t+"\x1b["+eY.colors[r][1]+"m":t}function ek(t,e){return t}function eP(t,e,r){if(t.customInspect&&e&&eK(e.inspect)&&e.inspect!==eY&&!(e.constructor&&e.constructor.prototype===e)){var n,i,a,o,s=e.inspect(r,t);return eB(s)||(s=eP(t,s,r)),s}var u=function(t,e){if(eF(e))return t.stylize("undefined","undefined");if(eB(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}return"number"==typeof e?t.stylize(""+e,"number"):eM(e)?t.stylize(""+e,"boolean"):null===e?t.stylize("null","null"):void 0}(t,e);if(u)return u;var c=Object.keys(e),l=(a={},c.forEach(function(t,e){a[t]=!0}),a);if(t.showHidden&&(c=Object.getOwnPropertyNames(e)),eH(e)&&(c.indexOf("message")>=0||c.indexOf("description")>=0))return eL(e);if(0===c.length){if(eK(e)){var h=e.name?": "+e.name:"";return t.stylize("[Function"+h+"]","special")}if(eU(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(ez(e))return t.stylize(Date.prototype.toString.call(e),"date");if(eH(e))return eL(e)}var f="",d=!1,m=["{","}"];return(Array.isArray(e)&&(d=!0,m=["[","]"]),eK(e)&&(f=" [Function"+(e.name?": "+e.name:"")+"]"),eU(e)&&(f=" "+RegExp.prototype.toString.call(e)),ez(e)&&(f=" "+Date.prototype.toUTCString.call(e)),eH(e)&&(f=" "+eL(e)),0!==c.length||d&&0!=e.length)?r<0?eU(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special"):(t.seen.push(e),o=d?function(t,e,r,n,i){for(var a=[],o=0,s=e.length;o<s;++o)eq(e,String(o))?a.push(ej(t,e,r,n,String(o),!0)):a.push("");return i.forEach(function(i){i.match(/^\d+$/)||a.push(ej(t,e,r,n,i,!0))}),a}(t,e,r,l,c):c.map(function(n){return ej(t,e,r,l,n,d)}),t.seen.pop(),n=f,i=m,o.reduce(function(t,e){return e.indexOf("\n"),t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?i[0]+(""===n?"":n+"\n ")+" "+o.join(",\n  ")+" "+i[1]:i[0]+n+" "+o.join(", ")+" "+i[1]):m[0]+f+m[1]}function eL(t){return"["+Error.prototype.toString.call(t)+"]"}function ej(t,e,r,n,i,a){var o,s,u;if((u=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?s=u.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):u.set&&(s=t.stylize("[Setter]","special")),eq(n,i)||(o="["+i+"]"),!s&&(0>t.seen.indexOf(u.value)?(s=null===r?eP(t,u.value,null):eP(t,u.value,r-1)).indexOf("\n")>-1&&(s=a?s.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+s.split("\n").map(function(t){return"   "+t}).join("\n")):s=t.stylize("[Circular]","special")),eF(o)){if(a&&i.match(/^\d+$/))return s;(o=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=t.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=t.stylize(o,"string"))}return o+": "+s}function eM(t){return"boolean"==typeof t}function eB(t){return"string"==typeof t}function eF(t){return void 0===t}function eU(t){return eV(t)&&"[object RegExp]"===eW(t)}function eV(t){return"object"==typeof t&&null!==t}function ez(t){return eV(t)&&"[object Date]"===eW(t)}function eH(t){return eV(t)&&("[object Error]"===eW(t)||t instanceof Error)}function eK(t){return"function"==typeof t}function eW(t){return Object.prototype.toString.call(t)}function eq(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function e$(){this.head=null,this.tail=null,this.length=0}eY.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},eY.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e$.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},e$.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},e$.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},e$.prototype.clear=function(){this.head=this.tail=null,this.length=0},e$.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,r=""+e.data;e=e.next;)r+=t+e.data;return r},e$.prototype.concat=function(t){if(0===this.length)return t6.alloc(0);if(1===this.length)return this.head.data;for(var e=t6.allocUnsafe(t>>>0),r=this.head,n=0;r;)r.data.copy(e,n),n+=r.data.length,r=r.next;return e};var eG=t6.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function eZ(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),!function(t){if(t&&!eG(t))throw Error("Unknown encoding: "+t)}(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=eX;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=eQ;break;default:this.write=eJ;return}this.charBuffer=new t6(6),this.charReceived=0,this.charLength=0}function eJ(t){return t.toString(this.encoding)}function eX(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function eQ(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}eZ.prototype.write=function(t){for(var e="";this.charLength;){var r=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,r),this.charReceived+=r,this.charReceived<this.charLength)return"";t=t.slice(r,t.length);var n=(e=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(e.length-1);if(n>=55296&&n<=56319){this.charLength+=this.surrogateSize,e="";continue}if(this.charReceived=this.charLength=0,0===t.length)return e;break}this.detectIncompleteChar(t);var i=t.length;this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,i),i-=this.charReceived);var i=(e+=t.toString(this.encoding,0,i)).length-1,n=e.charCodeAt(i);if(n>=55296&&n<=56319){var a=this.surrogateSize;return this.charLength+=a,this.charReceived+=a,this.charBuffer.copy(this.charBuffer,a,0,a),t.copy(this.charBuffer,0,0,a),e.substring(0,i)}return e},eZ.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var r=t[t.length-e];if(1==e&&r>>5==6){this.charLength=2;break}if(e<=2&&r>>4==14){this.charLength=3;break}if(e<=3&&r>>3==30){this.charLength=4;break}}this.charReceived=e},eZ.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var r=this.charReceived,n=this.charBuffer,i=this.encoding;e+=n.slice(0,r).toString(i)}return e};var e0=Object.freeze({__proto__:null,StringDecoder:eZ});e3.ReadableState=e2;var e1=(j="stream",eF(G)&&(G=tV.env.NODE_DEBUG||""),eN[j=j.toUpperCase()]||(RegExp("\\b"+j+"\\b","i").test(G)?eN[j]=function(){var t=eI.apply(null,arguments);console.error("%s %d: %s",j,0,t)}:eN[j]=function(){}),eN[j]);function e2(t,e){t=t||{},this.objectMode=!!t.objectMode,e instanceof r_&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var r=t.highWaterMark,n=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n,this.highWaterMark=~~this.highWaterMark,this.buffer=new e$,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(this.decoder=new eZ(t.encoding),this.encoding=t.encoding)}function e3(t){if(!(this instanceof e3))return new e3(t);this._readableState=new e2(t,this),this.readable=!0,t&&"function"==typeof t.read&&(this._read=t.read),eE.call(this)}function e6(t,e,r,n,i){var a=(o=r,s=null,t6.isBuffer(o)||"string"==typeof o||null==o||e.objectMode||(s=TypeError("Invalid non-string/buffer chunk")),s);if(a)t.emit("error",a);else if(null===r)e.reading=!1,function(t,e){if(!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e4(t)}}(t,e);else if(e.objectMode||r&&r.length>0){if(e.ended&&!i){var o,s,u,c=Error("stream.push() after EOF");t.emit("error",c)}else if(e.endEmitted&&i){var l=Error("stream.unshift() after end event");t.emit("error",l)}else!e.decoder||i||n||(r=e.decoder.write(r),u=!e.objectMode&&0===r.length),i||(e.reading=!1),!u&&(e.flowing&&0===e.length&&!e.sync?(t.emit("data",r),t.read(0)):(e.length+=e.objectMode?1:r.length,i?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&e4(t))),e.readingMore||(e.readingMore=!0,tB(e9,t,e))}else i||(e.reading=!1);return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function e8(t,e){if(t<=0||0===e.length&&e.ended)return 0;if(e.objectMode)return 1;if(t!=t)return e.flowing&&e.length?e.buffer.head.data.length:e.length;if(t>e.highWaterMark){var r;e.highWaterMark=((r=t)>=8388608?r=8388608:(r--,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r++),r)}return t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0)}function e4(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(e1("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?tB(e5,t):e5(t))}function e5(t){e1("emit readable"),t.emit("readable"),re(t)}function e9(t,e){for(var r=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(e1("maybeReadMore read 0"),t.read(0),r!==e.length);)r=e.length;e.readingMore=!1}function e7(t){e1("readable nexttick read 0"),t.read(0)}function rt(t,e){e.reading||(e1("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),re(t),e.flowing&&!e.reading&&t.read(0)}function re(t){var e=t._readableState;for(e1("flow",e.flowing);e.flowing&&null!==t.read(););}function rr(t,e){var r,n,i,a;return 0===e.length?null:(e.objectMode?r=e.buffer.shift():!t||t>=e.length?(r=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):(n=e.buffer,i=e.decoder,t<n.head.data.length?(a=n.head.data.slice(0,t),n.head.data=n.head.data.slice(t)):a=t===n.head.data.length?n.shift():i?function(t,e){var r=e.head,n=1,i=r.data;for(t-=i.length;r=r.next;){var a=r.data,o=t>a.length?a.length:t;if(o===a.length?i+=a:i+=a.slice(0,t),0==(t-=o)){o===a.length?(++n,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=a.slice(o));break}++n}return e.length-=n,i}(t,n):function(t,e){var r=t6.allocUnsafe(t),n=e.head,i=1;for(n.data.copy(r),t-=n.data.length;n=n.next;){var a=n.data,o=t>a.length?a.length:t;if(a.copy(r,r.length-t,0,o),0==(t-=o)){o===a.length?(++i,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=a.slice(o));break}++i}return e.length-=i,r}(t,n),r=a),r)}function rn(t){var e=t._readableState;if(e.length>0)throw Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,tB(ri,e,t))}function ri(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function ra(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return -1}function ro(){}function rs(t,e,r){this.chunk=t,this.encoding=e,this.callback=r,this.next=null}function ru(t,e){Object.defineProperty(this,"buffer",{get:function t(e,r){if(eF(tS.process))return function(){return t(e,r).apply(this,arguments)};if(!0===tV.noDeprecation)return e;var n=!1;return function(){if(!n){if(tV.throwDeprecation)throw Error(r);tV.traceDeprecation?console.trace(r):console.error(r),n=!0}return e.apply(this,arguments)}}(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),t=t||{},this.objectMode=!!t.objectMode,e instanceof r_&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var r=t.highWaterMark,n=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var i=!1===t.decodeStrings;this.decodeStrings=!i,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){(function(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0,e)--r.pendingcb,n?tB(i,e):i(e),t._writableState.errorEmitted=!0,t.emit("error",e);else{var a=rd(r);a||r.corked||r.bufferProcessing||!r.bufferedRequest||rf(t,r),n?tB(rh,t,r,a,i):rh(t,r,a,i)}})(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new ry(this)}function rc(t){if(!(this instanceof rc)&&!(this instanceof r_))return new rc(t);this._writableState=new ru(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev)),eE.call(this)}function rl(t,e,r,n,i,a,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,r?t._writev(i,e.onwrite):t._write(i,a,e.onwrite),e.sync=!1}function rh(t,e,r,n){r||0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain")),e.pendingcb--,n(),rm(t,e)}function rf(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=Array(e.bufferedRequestCount),i=e.corkedRequestsFree;i.entry=r;for(var a=0;r;)n[a]=r,r=r.next,a+=1;rl(t,e,!0,e.length,n,"",i.finish),e.pendingcb++,e.lastBufferedRequest=null,i.next?(e.corkedRequestsFree=i.next,i.next=null):e.corkedRequestsFree=new ry(e)}else{for(;r;){var o=r.chunk,s=r.encoding,u=r.callback,c=e.objectMode?1:o.length;if(rl(t,e,!1,c,o,s,u),r=r.next,e.writing)break}null===r&&(e.lastBufferedRequest=null)}e.bufferedRequestCount=0,e.bufferedRequest=r,e.bufferProcessing=!1}function rd(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function rp(t,e){e.prefinished||(e.prefinished=!0,t.emit("prefinish"))}function rm(t,e){var r=rd(e);return r&&(0===e.pendingcb?(rp(t,e),e.finished=!0,t.emit("finish")):rp(t,e)),r}function ry(t){var e=this;this.next=null,this.entry=null,this.finish=function(r){var n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}}eS(e3,eE),e3.prototype.push=function(t,e){var r=this._readableState;return r.objectMode||"string"!=typeof t||(e=e||r.defaultEncoding)===r.encoding||(t=t6.from(t,e),e=""),e6(this,r,t,e,!1)},e3.prototype.unshift=function(t){return e6(this,this._readableState,t,"",!0)},e3.prototype.isPaused=function(){return!1===this._readableState.flowing},e3.prototype.setEncoding=function(t){return this._readableState.decoder=new eZ(t),this._readableState.encoding=t,this},e3.prototype.read=function(t){e1("read",t),t=parseInt(t,10);var e,r=this._readableState,n=t;if(0!==t&&(r.emittedReadable=!1),0===t&&r.needReadable&&(r.length>=r.highWaterMark||r.ended))return e1("read: emitReadable",r.length,r.ended),0===r.length&&r.ended?rn(this):e4(this),null;if(0===(t=e8(t,r))&&r.ended)return 0===r.length&&rn(this),null;var i=r.needReadable;return e1("need readable",i),(0===r.length||r.length-t<r.highWaterMark)&&e1("length less than watermark",i=!0),r.ended||r.reading?e1("reading or ended",i=!1):i&&(e1("do read"),r.reading=!0,r.sync=!0,0===r.length&&(r.needReadable=!0),this._read(r.highWaterMark),r.sync=!1,r.reading||(t=e8(n,r))),null===(e=t>0?rr(t,r):null)?(r.needReadable=!0,t=0):r.length-=t,0===r.length&&(r.ended||(r.needReadable=!0),n!==t&&r.ended&&rn(this)),null!==e&&this.emit("data",e),e},e3.prototype._read=function(t){this.emit("error",Error("not implemented"))},e3.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t)}n.pipesCount+=1,e1("pipe count=%d opts=%j",n.pipesCount,e);var i=e&&!1===e.end?c:o;function a(t){e1("onunpipe"),t===r&&c()}function o(){e1("onend"),t.end()}n.endEmitted?tB(i):r.once("end",i),t.on("unpipe",a);var s=function(){var t=r._readableState;e1("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&r.listeners("data").length&&(t.flowing=!0,re(r))};t.on("drain",s);var u=!1;function c(){e1("cleanup"),t.removeListener("close",d),t.removeListener("finish",m),t.removeListener("drain",s),t.removeListener("error",f),t.removeListener("unpipe",a),r.removeListener("end",o),r.removeListener("end",c),r.removeListener("data",h),u=!0,n.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&s()}var l=!1;function h(e){e1("ondata"),l=!1,!1!==t.write(e)||l||((1===n.pipesCount&&n.pipes===t||n.pipesCount>1&&-1!==ra(n.pipes,t))&&!u&&(e1("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,l=!0),r.pause())}function f(e){e1("onerror",e),y(),t.removeListener("error",f),0===t.listeners("error").length&&t.emit("error",e)}function d(){t.removeListener("finish",m),y()}function m(){e1("onfinish"),t.removeListener("close",d),y()}function y(){e1("unpipe"),r.unpipe(t)}return r.on("data",h),function(t,e,r){if("function"==typeof t.prependListener)return t.prependListener(e,r);t._events&&t._events[e]?Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]:t.on(e,r)}(t,"error",f),t.once("close",d),t.once("finish",m),t.emit("pipe",r),n.flowing||(e1("pipe resume"),r.resume()),t},e3.prototype.unpipe=function(t){var e=this._readableState;if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this)),this;if(!t){var r=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var i=0;i<n;i++)r[i].emit("unpipe",this);return this}var a=ra(e.pipes,t);return -1===a||(e.pipes.splice(a,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this)),this},e3.prototype.on=function(t,e){var r=eE.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&e4(this):tB(e7,this))}return r},e3.prototype.addListener=e3.prototype.on,e3.prototype.resume=function(){var t=this._readableState;return t.flowing||(e1("resume"),t.flowing=!0,t.resumeScheduled||(t.resumeScheduled=!0,tB(rt,this,t))),this},e3.prototype.pause=function(){return e1("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(e1("pause"),this._readableState.flowing=!1,this.emit("pause")),this},e3.prototype.wrap=function(t){var e=this._readableState,r=!1,n=this;for(var i in t.on("end",function(){if(e1("wrapped end"),e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&n.push(t)}n.push(null)}),t.on("data",function(i){e1("wrapped data"),e.decoder&&(i=e.decoder.write(i)),(!e.objectMode||null!=i)&&(e.objectMode||i&&i.length)&&(n.push(i)||(r=!0,t.pause()))}),t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));return function(t,e){for(var r=0,n=t.length;r<n;r++)e(t[r],r)}(["error","close","destroy","pause","resume"],function(e){t.on(e,n.emit.bind(n,e))}),n._read=function(e){e1("wrapped _read",e),r&&(r=!1,t.resume())},n},e3._fromList=rr,rc.WritableState=ru,eS(rc,eE),ru.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},rc.prototype.pipe=function(){this.emit("error",Error("Cannot pipe, not readable"))},rc.prototype.write=function(t,e,r){var n,i,a,o,s,u=this._writableState,c=!1;return("function"==typeof e&&(r=e,e=null),t6.isBuffer(t)?e="buffer":e||(e=u.defaultEncoding),"function"!=typeof r&&(r=ro),u.ended)?(n=r,i=Error("write after end"),this.emit("error",i),tB(n,i)):(a=r,o=!0,s=!1,null===t?s=TypeError("May not write null values to stream"):t6.isBuffer(t)||"string"==typeof t||void 0===t||u.objectMode||(s=TypeError("Invalid non-string/buffer chunk")),s&&(this.emit("error",s),tB(a,s),o=!1),o&&(u.pendingcb++,c=function(t,e,r,n,i){a=r,o=n,e.objectMode||!1===e.decodeStrings||"string"!=typeof a||(a=t6.from(a,o)),r=a,t6.isBuffer(r)&&(n="buffer");var a,o,s=e.objectMode?1:r.length;e.length+=s;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest=new rs(r,n,i),c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else rl(t,e,!1,s,r,n,i);return u}(this,u,t,e,r))),c},rc.prototype.cork=function(){var t=this._writableState;t.corked++},rc.prototype.uncork=function(){var t=this._writableState;!t.corked||(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||rf(this,t))},rc.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},rc.prototype._write=function(t,e,r){r(Error("not implemented"))},rc.prototype._writev=null,rc.prototype.end=function(t,e,r){var n,i=this._writableState;"function"==typeof t?(r=t,t=null,e=null):"function"==typeof e&&(r=e,e=null),null!=t&&this.write(t,e),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||(n=r,i.ending=!0,rm(this,i),n&&(i.finished?tB(n):this.once("finish",n)),i.ended=!0,this.writable=!1)},eS(r_,e3);for(var rv=Object.keys(rc.prototype),rg=0;rg<rv.length;rg++){var rb=rv[rg];r_.prototype[rb]||(r_.prototype[rb]=rc.prototype[rb])}function r_(t){if(!(this instanceof r_))return new r_(t);e3.call(this,t),rc.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",rT)}function rT(){this.allowHalfOpen||this._writableState.ended||tB(rE,this)}function rE(t){t.end()}function rA(t){this.afterTransform=function(e,r){return function(t,e,r){var n=t._transformState;n.transforming=!1;var i=n.writecb;if(!i)return t.emit("error",Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,null!=r&&t.push(r),i(e);var a=t._readableState;a.reading=!1,(a.needReadable||a.length<a.highWaterMark)&&t._read(a.highWaterMark)}(t,e,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function rw(t){if(!(this instanceof rw))return new rw(t);r_.call(this,t),this._transformState=new rA(this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(t){rD(e,t)}):rD(e)})}function rD(t,e){if(e)return t.emit("error",e);var r=t._writableState,n=t._transformState;if(r.length)throw Error("Calling transform done when ws.length != 0");if(n.transforming)throw Error("Calling transform done when still transforming");return t.push(null)}function rO(t){if(!(this instanceof rO))return new rO(t);rw.call(this,t)}function rC(){eE.call(this)}eS(rw,r_),rw.prototype.push=function(t,e){return this._transformState.needTransform=!1,r_.prototype.push.call(this,t,e)},rw.prototype._transform=function(t,e,r){throw Error("Not implemented")},rw.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},rw.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},eS(rO,rw),rO.prototype._transform=function(t,e,r){r(null,t)},eS(rC,eE),rC.Readable=e3,rC.Writable=rc,rC.Duplex=r_,rC.Transform=rw,rC.PassThrough=rO,rC.Stream=rC,rC.prototype.pipe=function(t,e){var r=this;function n(e){t.writable&&!1===t.write(e)&&r.pause&&r.pause()}function i(){r.readable&&r.resume&&r.resume()}r.on("data",n),t.on("drain",i),t._isStdio||e&&!1===e.end||(r.on("end",o),r.on("close",s));var a=!1;function o(){a||(a=!0,t.end())}function s(){a||(a=!0,"function"==typeof t.destroy&&t.destroy())}function u(t){if(c(),0===eE.listenerCount(this,"error"))throw t}function c(){r.removeListener("data",n),t.removeListener("drain",i),r.removeListener("end",o),r.removeListener("close",s),r.removeListener("error",u),t.removeListener("error",u),r.removeListener("end",c),r.removeListener("close",c),t.removeListener("close",c)}return r.on("error",u),t.on("error",u),r.on("end",c),r.on("close",c),t.on("close",c),t.emit("pipe",r),t};var rS=tD(Object.freeze({__proto__:null,Duplex:r_,PassThrough:rO,Readable:e3,Stream:rC,Transform:rw,Writable:rc,default:rC})),rx=tD(e0);!function(t){t.parser=function(t,e){return new o(t,e)},t.SAXParser=o,t.SAXStream=u,t.createStream=function(t,e){return new u(t,e)},t.MAX_BUFFER_LENGTH=65536;var e,r,n,i,a=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function o(e,r){if(!(this instanceof o))return new o(e,r);(function(t){for(var e=0,r=a.length;e<r;e++)t[a[e]]=""})(this),this.q=this.c="",this.bufferCheckPosition=t.MAX_BUFFER_LENGTH,this.opt=r||{},this.opt.lowercase=this.opt.lowercase||this.opt.lowercasetags,this.looseCase=this.opt.lowercase?"toLowerCase":"toUpperCase",this.tags=[],this.closed=this.closedRoot=this.sawRoot=!1,this.tag=this.error=null,this.strict=!!e,this.noscript=!!(e||this.opt.noscript),this.state=_.BEGIN,this.strictEntities=this.opt.strictEntities,this.ENTITIES=this.strictEntities?Object.create(t.XML_ENTITIES):Object.create(t.ENTITIES),this.attribList=[],this.opt.xmlns&&(this.ns=Object.create(h)),this.trackPosition=!1!==this.opt.position,this.trackPosition&&(this.position=this.line=this.column=0),E(this,"onready")}t.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(t){function e(){}return e.prototype=t,new e}),Object.keys||(Object.keys=function(t){var e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(r);return e}),o.prototype={end:function(){C(this)},write:function(e){if(this.error)throw this.error;if(this.closed)return O(this,"Cannot write after close. Assign an onready handler.");if(null===e)return C(this);"object"==typeof e&&(e=e.toString());for(var r=0,n="";n=k(e,r++),this.c=n,n;)switch(this.trackPosition&&(this.position++,"\n"===n?(this.line++,this.column=0):this.column++),this.state){case _.BEGIN:if(this.state=_.BEGIN_WHITESPACE,"\uFEFF"===n)continue;R(this,n);continue;case _.BEGIN_WHITESPACE:R(this,n);continue;case _.TEXT:if(this.sawRoot&&!this.closedRoot){for(var i,o,s,u=r-1;n&&"<"!==n&&"&"!==n;)(n=k(e,r++))&&this.trackPosition&&(this.position++,"\n"===n?(this.line++,this.column=0):this.column++);this.textNode+=e.substring(u,r-1)}"<"!==n||this.sawRoot&&this.closedRoot&&!this.strict?(v(n)||this.sawRoot&&!this.closedRoot||S(this,"Text data outside of root node."),"&"===n?this.state=_.TEXT_ENTITY:this.textNode+=n):(this.state=_.OPEN_WAKA,this.startTagPosition=this.position);continue;case _.SCRIPT:"<"===n?this.state=_.SCRIPT_ENDING:this.script+=n;continue;case _.SCRIPT_ENDING:"/"===n?this.state=_.CLOSE_TAG:(this.script+="<"+n,this.state=_.SCRIPT);continue;case _.OPEN_WAKA:"!"===n?(this.state=_.SGML_DECL,this.sgmlDecl=""):v(n)||(b(f,n)?(this.state=_.OPEN_TAG,this.tagName=n):"/"===n?(this.state=_.CLOSE_TAG,this.tagName=""):"?"===n?(this.state=_.PROC_INST,this.procInstName=this.procInstBody=""):(S(this,"Unencoded <"),this.startTagPosition+1<this.position&&(n=Array(this.position-this.startTagPosition).join(" ")+n),this.textNode+="<"+n,this.state=_.TEXT));continue;case _.SGML_DECL:"[CDATA["===(this.sgmlDecl+n).toUpperCase()?(A(this,"onopencdata"),this.state=_.CDATA,this.sgmlDecl="",this.cdata=""):this.sgmlDecl+n==="--"?(this.state=_.COMMENT,this.comment="",this.sgmlDecl=""):"DOCTYPE"===(this.sgmlDecl+n).toUpperCase()?(this.state=_.DOCTYPE,(this.doctype||this.sawRoot)&&S(this,"Inappropriately located doctype declaration"),this.doctype="",this.sgmlDecl=""):">"===n?(A(this,"onsgmldeclaration",this.sgmlDecl),this.sgmlDecl="",this.state=_.TEXT):(g(n)&&(this.state=_.SGML_DECL_QUOTED),this.sgmlDecl+=n);continue;case _.SGML_DECL_QUOTED:n===this.q&&(this.state=_.SGML_DECL,this.q=""),this.sgmlDecl+=n;continue;case _.DOCTYPE:">"===n?(this.state=_.TEXT,A(this,"ondoctype",this.doctype),this.doctype=!0):(this.doctype+=n,"["===n?this.state=_.DOCTYPE_DTD:g(n)&&(this.state=_.DOCTYPE_QUOTED,this.q=n));continue;case _.DOCTYPE_QUOTED:this.doctype+=n,n===this.q&&(this.q="",this.state=_.DOCTYPE);continue;case _.DOCTYPE_DTD:this.doctype+=n,"]"===n?this.state=_.DOCTYPE:g(n)&&(this.state=_.DOCTYPE_DTD_QUOTED,this.q=n);continue;case _.DOCTYPE_DTD_QUOTED:this.doctype+=n,n===this.q&&(this.state=_.DOCTYPE_DTD,this.q="");continue;case _.COMMENT:"-"===n?this.state=_.COMMENT_ENDING:this.comment+=n;continue;case _.COMMENT_ENDING:"-"===n?(this.state=_.COMMENT_ENDED,this.comment=D(this.opt,this.comment),this.comment&&A(this,"oncomment",this.comment),this.comment=""):(this.comment+="-"+n,this.state=_.COMMENT);continue;case _.COMMENT_ENDED:">"!==n?(S(this,"Malformed comment"),this.comment+="--"+n,this.state=_.COMMENT):this.state=_.TEXT;continue;case _.CDATA:"]"===n?this.state=_.CDATA_ENDING:this.cdata+=n;continue;case _.CDATA_ENDING:"]"===n?this.state=_.CDATA_ENDING_2:(this.cdata+="]"+n,this.state=_.CDATA);continue;case _.CDATA_ENDING_2:">"===n?(this.cdata&&A(this,"oncdata",this.cdata),A(this,"onclosecdata"),this.cdata="",this.state=_.TEXT):"]"===n?this.cdata+="]":(this.cdata+="]]"+n,this.state=_.CDATA);continue;case _.PROC_INST:"?"===n?this.state=_.PROC_INST_ENDING:v(n)?this.state=_.PROC_INST_BODY:this.procInstName+=n;continue;case _.PROC_INST_BODY:!this.procInstBody&&v(n)||("?"===n?this.state=_.PROC_INST_ENDING:this.procInstBody+=n);continue;case _.PROC_INST_ENDING:">"===n?(A(this,"onprocessinginstruction",{name:this.procInstName,body:this.procInstBody}),this.procInstName=this.procInstBody="",this.state=_.TEXT):(this.procInstBody+="?"+n,this.state=_.PROC_INST_BODY);continue;case _.OPEN_TAG:b(d,n)?this.tagName+=n:(function(t){t.strict||(t.tagName=t.tagName[t.looseCase]());var e=t.tags[t.tags.length-1]||t,r=t.tag={name:t.tagName,attributes:{}};t.opt.xmlns&&(r.ns=e.ns),t.attribList.length=0,A(t,"onopentagstart",r)}(this),">"===n?N(this):"/"===n?this.state=_.OPEN_TAG_SLASH:(v(n)||S(this,"Invalid character in tag name"),this.state=_.ATTRIB));continue;case _.OPEN_TAG_SLASH:">"===n?(N(this,!0),Y(this)):(S(this,"Forward-slash in opening tag not followed by >"),this.state=_.ATTRIB);continue;case _.ATTRIB:v(n)||(">"===n?N(this):"/"===n?this.state=_.OPEN_TAG_SLASH:b(f,n)?(this.attribName=n,this.attribValue="",this.state=_.ATTRIB_NAME):S(this,"Invalid attribute name"));continue;case _.ATTRIB_NAME:"="===n?this.state=_.ATTRIB_VALUE:">"===n?(S(this,"Attribute without value"),this.attribValue=this.attribName,I(this),N(this)):v(n)?this.state=_.ATTRIB_NAME_SAW_WHITE:b(d,n)?this.attribName+=n:S(this,"Invalid attribute name");continue;case _.ATTRIB_NAME_SAW_WHITE:if("="===n)this.state=_.ATTRIB_VALUE;else{if(v(n))continue;S(this,"Attribute without value"),this.tag.attributes[this.attribName]="",this.attribValue="",A(this,"onattribute",{name:this.attribName,value:""}),this.attribName="",">"===n?N(this):b(f,n)?(this.attribName=n,this.state=_.ATTRIB_NAME):(S(this,"Invalid attribute name"),this.state=_.ATTRIB)}continue;case _.ATTRIB_VALUE:v(n)||(g(n)?(this.q=n,this.state=_.ATTRIB_VALUE_QUOTED):(S(this,"Unquoted attribute value"),this.state=_.ATTRIB_VALUE_UNQUOTED,this.attribValue=n));continue;case _.ATTRIB_VALUE_QUOTED:if(n!==this.q){"&"===n?this.state=_.ATTRIB_VALUE_ENTITY_Q:this.attribValue+=n;continue}I(this),this.q="",this.state=_.ATTRIB_VALUE_CLOSED;continue;case _.ATTRIB_VALUE_CLOSED:v(n)?this.state=_.ATTRIB:">"===n?N(this):"/"===n?this.state=_.OPEN_TAG_SLASH:b(f,n)?(S(this,"No whitespace between attributes"),this.attribName=n,this.attribValue="",this.state=_.ATTRIB_NAME):S(this,"Invalid attribute name");continue;case _.ATTRIB_VALUE_UNQUOTED:if(!(">"===(i=n)||v(i))){"&"===n?this.state=_.ATTRIB_VALUE_ENTITY_U:this.attribValue+=n;continue}I(this),">"===n?N(this):this.state=_.ATTRIB;continue;case _.CLOSE_TAG:this.tagName?">"===n?Y(this):b(d,n)?this.tagName+=n:this.script?(this.script+="</"+this.tagName,this.tagName="",this.state=_.SCRIPT):(v(n)||S(this,"Invalid tagname in closing tag"),this.state=_.CLOSE_TAG_SAW_WHITE):v(n)||(b(f,n)?this.tagName=n:this.script?(this.script+="</"+n,this.state=_.SCRIPT):S(this,"Invalid tagname in closing tag."));continue;case _.CLOSE_TAG_SAW_WHITE:if(v(n))continue;">"===n?Y(this):S(this,"Invalid characters in closing tag");continue;case _.TEXT_ENTITY:case _.ATTRIB_VALUE_ENTITY_Q:case _.ATTRIB_VALUE_ENTITY_U:switch(this.state){case _.TEXT_ENTITY:o=_.TEXT,s="textNode";break;case _.ATTRIB_VALUE_ENTITY_Q:o=_.ATTRIB_VALUE_QUOTED,s="attribValue";break;case _.ATTRIB_VALUE_ENTITY_U:o=_.ATTRIB_VALUE_UNQUOTED,s="attribValue"}";"===n?(this[s]+=function(t){var e,r=t.entity,n=r.toLowerCase(),i="";return t.ENTITIES[r]?t.ENTITIES[r]:t.ENTITIES[n]?t.ENTITIES[n]:("#"===(r=n).charAt(0)&&(i="x"===r.charAt(1)?(e=parseInt(r=r.slice(2),16)).toString(16):(e=parseInt(r=r.slice(1),10)).toString(10)),r=r.replace(/^0+/,""),isNaN(e)||i.toLowerCase()!==r)?(S(t,"Invalid character entity"),"&"+t.entity+";"):String.fromCodePoint(e)}(this),this.entity="",this.state=o):b(this.entity.length?y:m,n)?this.entity+=n:(S(this,"Invalid character in entity name"),this[s]+="&"+this.entity+n,this.entity="",this.state=o);continue;default:throw Error(this,"Unknown state: "+this.state)}return this.position>=this.bufferCheckPosition&&function(e){for(var r=Math.max(t.MAX_BUFFER_LENGTH,10),n=0,i=0,o=a.length;i<o;i++){var s=e[a[i]].length;if(s>r)switch(a[i]){case"textNode":w(e);break;case"cdata":A(e,"oncdata",e.cdata),e.cdata="";break;case"script":A(e,"onscript",e.script),e.script="";break;default:O(e,"Max buffer length exceeded: "+a[i])}n=Math.max(n,s)}var u=t.MAX_BUFFER_LENGTH-n;e.bufferCheckPosition=u+e.position}(this),this},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){w(this),""!==this.cdata&&(A(this,"oncdata",this.cdata),this.cdata=""),""!==this.script&&(A(this,"onscript",this.script),this.script="")}};try{i=rS.Stream}catch(t){i=function(){}}var s=t.EVENTS.filter(function(t){return"error"!==t&&"end"!==t});function u(t,e){if(!(this instanceof u))return new u(t,e);i.apply(this),this._parser=new o(t,e),this.writable=!0,this.readable=!0;var r=this;this._parser.onend=function(){r.emit("end")},this._parser.onerror=function(t){r.emit("error",t),r._parser.error=null},this._decoder=null,s.forEach(function(t){Object.defineProperty(r,"on"+t,{get:function(){return r._parser["on"+t]},set:function(e){if(!e)return r.removeAllListeners(t),r._parser["on"+t]=e,e;r.on(t,e)},enumerable:!0,configurable:!1})})}u.prototype=Object.create(i.prototype,{constructor:{value:u}}),u.prototype.write=function(t){if("function"==typeof t6.isBuffer&&t6.isBuffer(t)){if(!this._decoder){var e=rx.StringDecoder;this._decoder=new e("utf8")}t=this._decoder.write(t)}return this._parser.write(t.toString()),this.emit("data",t),!0},u.prototype.end=function(t){return t&&t.length&&this.write(t),this._parser.end(),!0},u.prototype.on=function(t,e){var r=this;return r._parser["on"+t]||-1===s.indexOf(t)||(r._parser["on"+t]=function(){var e=1==arguments.length?[arguments[0]]:Array.apply(null,arguments);e.splice(0,0,t),r.emit.apply(r,e)}),i.prototype.on.call(r,t,e)};var c="http://www.w3.org/XML/1998/namespace",l="http://www.w3.org/2000/xmlns/",h={xml:c,xmlns:l},f=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,d=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,m=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,y=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function v(t){return" "===t||"\n"===t||"\r"===t||"	"===t}function g(t){return'"'===t||"'"===t}function b(t,e){return t.test(e)}var _=0;for(var T in t.STATE={BEGIN:_++,BEGIN_WHITESPACE:_++,TEXT:_++,TEXT_ENTITY:_++,OPEN_WAKA:_++,SGML_DECL:_++,SGML_DECL_QUOTED:_++,DOCTYPE:_++,DOCTYPE_QUOTED:_++,DOCTYPE_DTD:_++,DOCTYPE_DTD_QUOTED:_++,COMMENT_STARTING:_++,COMMENT:_++,COMMENT_ENDING:_++,COMMENT_ENDED:_++,CDATA:_++,CDATA_ENDING:_++,CDATA_ENDING_2:_++,PROC_INST:_++,PROC_INST_BODY:_++,PROC_INST_ENDING:_++,OPEN_TAG:_++,OPEN_TAG_SLASH:_++,ATTRIB:_++,ATTRIB_NAME:_++,ATTRIB_NAME_SAW_WHITE:_++,ATTRIB_VALUE:_++,ATTRIB_VALUE_QUOTED:_++,ATTRIB_VALUE_CLOSED:_++,ATTRIB_VALUE_UNQUOTED:_++,ATTRIB_VALUE_ENTITY_Q:_++,ATTRIB_VALUE_ENTITY_U:_++,CLOSE_TAG:_++,CLOSE_TAG_SAW_WHITE:_++,SCRIPT:_++,SCRIPT_ENDING:_++},t.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},t.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(t.ENTITIES).forEach(function(e){var r=t.ENTITIES[e],n="number"==typeof r?String.fromCharCode(r):r;t.ENTITIES[e]=n}),t.STATE)t.STATE[t.STATE[T]]=T;function E(t,e,r){t[e]&&t[e](r)}function A(t,e,r){t.textNode&&w(t),E(t,e,r)}function w(t){t.textNode=D(t.opt,t.textNode),t.textNode&&E(t,"ontext",t.textNode),t.textNode=""}function D(t,e){return t.trim&&(e=e.trim()),t.normalize&&(e=e.replace(/\s+/g," ")),e}function O(t,e){return w(t),t.trackPosition&&(e+="\nLine: "+t.line+"\nColumn: "+t.column+"\nChar: "+t.c),e=Error(e),t.error=e,E(t,"onerror",e),t}function C(t){return t.sawRoot&&!t.closedRoot&&S(t,"Unclosed root tag"),t.state!==_.BEGIN&&t.state!==_.BEGIN_WHITESPACE&&t.state!==_.TEXT&&O(t,"Unexpected end"),w(t),t.c="",t.closed=!0,E(t,"onend"),o.call(t,t.strict,t.opt),t}function S(t,e){if("object"!=typeof t||!(t instanceof o))throw Error("bad call to strictFail");t.strict&&O(t,e)}function x(t,e){var r=0>t.indexOf(":")?["",t]:t.split(":"),n=r[0],i=r[1];return e&&"xmlns"===t&&(n="xmlns",i=""),{prefix:n,local:i}}function I(t){if(t.strict||(t.attribName=t.attribName[t.looseCase]()),-1!==t.attribList.indexOf(t.attribName)||t.tag.attributes.hasOwnProperty(t.attribName)){t.attribName=t.attribValue="";return}if(t.opt.xmlns){var e=x(t.attribName,!0),r=e.prefix,n=e.local;if("xmlns"===r){if("xml"===n&&t.attribValue!==c)S(t,"xml: prefix must be bound to "+c+"\nActual: "+t.attribValue);else if("xmlns"===n&&t.attribValue!==l)S(t,"xmlns: prefix must be bound to "+l+"\nActual: "+t.attribValue);else{var i=t.tag,a=t.tags[t.tags.length-1]||t;i.ns===a.ns&&(i.ns=Object.create(a.ns)),i.ns[n]=t.attribValue}}t.attribList.push([t.attribName,t.attribValue])}else t.tag.attributes[t.attribName]=t.attribValue,A(t,"onattribute",{name:t.attribName,value:t.attribValue});t.attribName=t.attribValue=""}function N(t,e){if(t.opt.xmlns){var r=t.tag,n=x(t.tagName);r.prefix=n.prefix,r.local=n.local,r.uri=r.ns[n.prefix]||"",r.prefix&&!r.uri&&(S(t,"Unbound namespace prefix: "+JSON.stringify(t.tagName)),r.uri=n.prefix);var i=t.tags[t.tags.length-1]||t;r.ns&&i.ns!==r.ns&&Object.keys(r.ns).forEach(function(e){A(t,"onopennamespace",{prefix:e,uri:r.ns[e]})});for(var a=0,o=t.attribList.length;a<o;a++){var s=t.attribList[a],u=s[0],c=s[1],l=x(u,!0),h=l.prefix,f=l.local,d=""===h?"":r.ns[h]||"",m={name:u,value:c,prefix:h,local:f,uri:d};h&&"xmlns"!==h&&!d&&(S(t,"Unbound namespace prefix: "+JSON.stringify(h)),m.uri=h),t.tag.attributes[u]=m,A(t,"onattribute",m)}t.attribList.length=0}t.tag.isSelfClosing=!!e,t.sawRoot=!0,t.tags.push(t.tag),A(t,"onopentag",t.tag),e||(t.noscript||"script"!==t.tagName.toLowerCase()?t.state=_.TEXT:t.state=_.SCRIPT,t.tag=null,t.tagName=""),t.attribName=t.attribValue="",t.attribList.length=0}function Y(t){if(!t.tagName){S(t,"Weird empty close tag."),t.textNode+="</>",t.state=_.TEXT;return}if(t.script){if("script"!==t.tagName){t.script+="</"+t.tagName+">",t.tagName="",t.state=_.SCRIPT;return}A(t,"onscript",t.script),t.script=""}var e=t.tags.length,r=t.tagName;t.strict||(r=r[t.looseCase]());for(var n=r;e--;)if(t.tags[e].name!==n)S(t,"Unexpected close tag");else break;if(e<0){S(t,"Unmatched closing tag: "+t.tagName),t.textNode+="</"+t.tagName+">",t.state=_.TEXT;return}t.tagName=r;for(var i=t.tags.length;i-- >e;){var a=t.tag=t.tags.pop();t.tagName=t.tag.name,A(t,"onclosetag",t.tagName);var o={};for(var s in a.ns)o[s]=a.ns[s];var u=t.tags[t.tags.length-1]||t;t.opt.xmlns&&a.ns!==u.ns&&Object.keys(a.ns).forEach(function(e){var r=a.ns[e];A(t,"onclosenamespace",{prefix:e,uri:r})})}0===e&&(t.closedRoot=!0),t.tagName=t.attribValue=t.attribName="",t.attribList.length=0,t.state=_.TEXT}function R(t,e){"<"===e?(t.state=_.OPEN_WAKA,t.startTagPosition=t.position):v(e)||(S(t,"Non-whitespace before first tag."),t.textNode=e,t.state=_.TEXT)}function k(t,e){var r="";return e<t.length&&(r=t.charAt(e)),r}_=t.STATE,String.fromCodePoint||(e=String.fromCharCode,r=Math.floor,n=function(){var t,n,i=[],a=-1,o=arguments.length;if(!o)return"";for(var s="";++a<o;){var u=Number(arguments[a]);if(!isFinite(u)||u<0||u>1114111||r(u)!==u)throw RangeError("Invalid code point: "+u);u<=65535?i.push(u):(u-=65536,t=(u>>10)+55296,n=u%1024+56320,i.push(t,n)),(a+1===o||i.length>16384)&&(s+=e.apply(null,i),i.length=0)}return s},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:n,configurable:!0,writable:!0}):String.fromCodePoint=n)}(e_);var rI={isArray:function(t){return Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)}},rN=rI.isArray,rY={copyOptions:function(t){var e,r={};for(e in t)t.hasOwnProperty(e)&&(r[e]=t[e]);return r},ensureFlagExists:function(t,e){t in e&&"boolean"==typeof e[t]||(e[t]=!1)},ensureSpacesExists:function(t){"spaces"in t&&("number"==typeof t.spaces||"string"==typeof t.spaces)||(t.spaces=0)},ensureAlwaysArrayExists:function(t){"alwaysArray"in t&&("boolean"==typeof t.alwaysArray||rN(t.alwaysArray))||(t.alwaysArray=!1)},ensureKeyExists:function(t,e){t+"Key" in e&&"string"==typeof e[t+"Key"]||(e[t+"Key"]=e.compact?"_"+t:t)},checkFnExists:function(t,e){return t+"Fn" in e}},rR=rI.isArray;function rk(t){var e=Number(t);if(!isNaN(e))return e;var r=t.toLowerCase();return"true"===r||"false"!==r&&t}function rP(t,e){var r;if(Z.compact){if(!J[Z[t+"Key"]]&&(rR(Z.alwaysArray)?-1!==Z.alwaysArray.indexOf(Z[t+"Key"]):Z.alwaysArray)&&(J[Z[t+"Key"]]=[]),J[Z[t+"Key"]]&&!rR(J[Z[t+"Key"]])&&(J[Z[t+"Key"]]=[J[Z[t+"Key"]]]),t+"Fn" in Z&&"string"==typeof e&&(e=Z[t+"Fn"](e,J)),"instruction"===t&&("instructionFn"in Z||"instructionNameFn"in Z)){for(r in e)if(e.hasOwnProperty(r)){if("instructionFn"in Z)e[r]=Z.instructionFn(e[r],r,J);else{var n=e[r];delete e[r],e[Z.instructionNameFn(r,n,J)]=n}}}rR(J[Z[t+"Key"]])?J[Z[t+"Key"]].push(e):J[Z[t+"Key"]]=e}else{J[Z.elementsKey]||(J[Z.elementsKey]=[]);var i={};if(i[Z.typeKey]=t,"instruction"===t){for(r in e)if(e.hasOwnProperty(r))break;i[Z.nameKey]="instructionNameFn"in Z?Z.instructionNameFn(r,e,J):r,Z.instructionHasAttributes?(i[Z.attributesKey]=e[r][Z.attributesKey],"instructionFn"in Z&&(i[Z.attributesKey]=Z.instructionFn(i[Z.attributesKey],r,J))):("instructionFn"in Z&&(e[r]=Z.instructionFn(e[r],r,J)),i[Z.instructionKey]=e[r])}else t+"Fn" in Z&&(e=Z[t+"Fn"](e,J)),i[Z[t+"Key"]]=e;Z.addParent&&(i[Z.parentKey]=J),J[Z.elementsKey].push(i)}}function rL(t){if("attributesFn"in Z&&t&&(t=Z.attributesFn(t,J)),(Z.trim||"attributeValueFn"in Z||"attributeNameFn"in Z||Z.nativeTypeAttributes)&&t){var e;for(e in t)if(t.hasOwnProperty(e)&&(Z.trim&&(t[e]=t[e].trim()),Z.nativeTypeAttributes&&(t[e]=rk(t[e])),"attributeValueFn"in Z&&(t[e]=Z.attributeValueFn(t[e],e,J)),"attributeNameFn"in Z)){var r=t[e];delete t[e],t[Z.attributeNameFn(e,t[e],J)]=r}}return t}function rj(t){var e={};if(t.body&&("xml"===t.name.toLowerCase()||Z.instructionHasAttributes)){for(var r,n=/([\w:-]+)\s*=\s*(?:"([^"]*)"|'([^']*)'|(\w+))\s*/g;null!==(r=n.exec(t.body));)e[r[1]]=r[2]||r[3]||r[4];e=rL(e)}if("xml"===t.name.toLowerCase()){if(Z.ignoreDeclaration)return;J[Z.declarationKey]={},Object.keys(e).length&&(J[Z.declarationKey][Z.attributesKey]=e),Z.addParent&&(J[Z.declarationKey][Z.parentKey]=J)}else{if(Z.ignoreInstruction)return;Z.trim&&(t.body=t.body.trim());var i={};Z.instructionHasAttributes&&Object.keys(e).length?(i[t.name]={},i[t.name][Z.attributesKey]=e):i[t.name]=t.body,rP("instruction",i)}}function rM(t,e){var r,n;if("object"==typeof t&&(e=t.attributes,t=t.name),e=rL(e),"elementNameFn"in Z&&(t=Z.elementNameFn(t,J)),Z.compact){if(r={},!Z.ignoreAttributes&&e&&Object.keys(e).length)for(n in r[Z.attributesKey]={},e)e.hasOwnProperty(n)&&(r[Z.attributesKey][n]=e[n]);t in J||(rR(Z.alwaysArray)?-1===Z.alwaysArray.indexOf(t):!Z.alwaysArray)||(J[t]=[]),J[t]&&!rR(J[t])&&(J[t]=[J[t]]),rR(J[t])?J[t].push(r):J[t]=r}else J[Z.elementsKey]||(J[Z.elementsKey]=[]),(r={})[Z.typeKey]="element",r[Z.nameKey]=t,!Z.ignoreAttributes&&e&&Object.keys(e).length&&(r[Z.attributesKey]=e),Z.alwaysChildren&&(r[Z.elementsKey]=[]),J[Z.elementsKey].push(r);r[Z.parentKey]=J,J=r}function rB(t){!Z.ignoreText&&(t.trim()||Z.captureSpacesBetweenElements)&&(Z.trim&&(t=t.trim()),Z.nativeType&&(t=rk(t)),Z.sanitize&&(t=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),rP("text",t))}function rF(t){Z.ignoreComment||(Z.trim&&(t=t.trim()),rP("comment",t))}function rU(t){var e=J[Z.parentKey];Z.addParent||delete J[Z.parentKey],J=e}function rV(t){Z.ignoreCdata||(Z.trim&&(t=t.trim()),rP("cdata",t))}function rz(t){Z.ignoreDoctype||(t=t.replace(/^ /,""),Z.trim&&(t=t.trim()),rP("doctype",t))}function rH(t){t.note=t}var rK=function(t,e){var r=e_.parser(!0,{}),n={};if(J=n,Z=rY.copyOptions(e),rY.ensureFlagExists("ignoreDeclaration",Z),rY.ensureFlagExists("ignoreInstruction",Z),rY.ensureFlagExists("ignoreAttributes",Z),rY.ensureFlagExists("ignoreText",Z),rY.ensureFlagExists("ignoreComment",Z),rY.ensureFlagExists("ignoreCdata",Z),rY.ensureFlagExists("ignoreDoctype",Z),rY.ensureFlagExists("compact",Z),rY.ensureFlagExists("alwaysChildren",Z),rY.ensureFlagExists("addParent",Z),rY.ensureFlagExists("trim",Z),rY.ensureFlagExists("nativeType",Z),rY.ensureFlagExists("nativeTypeAttributes",Z),rY.ensureFlagExists("sanitize",Z),rY.ensureFlagExists("instructionHasAttributes",Z),rY.ensureFlagExists("captureSpacesBetweenElements",Z),rY.ensureAlwaysArrayExists(Z),rY.ensureKeyExists("declaration",Z),rY.ensureKeyExists("instruction",Z),rY.ensureKeyExists("attributes",Z),rY.ensureKeyExists("text",Z),rY.ensureKeyExists("comment",Z),rY.ensureKeyExists("cdata",Z),rY.ensureKeyExists("doctype",Z),rY.ensureKeyExists("type",Z),rY.ensureKeyExists("name",Z),rY.ensureKeyExists("elements",Z),rY.ensureKeyExists("parent",Z),rY.checkFnExists("doctype",Z),rY.checkFnExists("instruction",Z),rY.checkFnExists("cdata",Z),rY.checkFnExists("comment",Z),rY.checkFnExists("text",Z),rY.checkFnExists("instructionName",Z),rY.checkFnExists("elementName",Z),rY.checkFnExists("attributeName",Z),rY.checkFnExists("attributeValue",Z),rY.checkFnExists("attributes",Z),r.opt={strictEntities:!0},r.onopentag=rM,r.ontext=rB,r.oncomment=rF,r.onclosetag=rU,r.onerror=rH,r.oncdata=rV,r.ondoctype=rz,r.onprocessinginstruction=rj,r.write(t).close(),n[Z.elementsKey]){var i=n[Z.elementsKey];delete n[Z.elementsKey],n[Z.elementsKey]=i,delete n.text}return n},rW=rI.isArray;function rq(t,e,r){return(!r&&t.spaces?"\n":"")+Array(e+1).join(t.spaces)}function r$(t,e,r){if(e.ignoreAttributes)return"";"attributesFn"in e&&(t=e.attributesFn(t,Q,X));var n,i,a,o,s=[];for(n in t)t.hasOwnProperty(n)&&null!==t[n]&&void 0!==t[n]&&(o=e.noQuotesForNativeAttributes&&"string"!=typeof t[n]?"":'"',i=(i=""+t[n]).replace(/"/g,"&quot;"),a="attributeNameFn"in e?e.attributeNameFn(n,i,Q,X):n,s.push(e.spaces&&e.indentAttributes?rq(e,r+1,!1):" "),s.push(a+"="+o+("attributeValueFn"in e?e.attributeValueFn(i,n,Q,X):i)+o));return t&&Object.keys(t).length&&e.spaces&&e.indentAttributes&&s.push(rq(e,r,!1)),s.join("")}function rG(t,e,r){return X=t,Q="xml",e.ignoreDeclaration?"":"<?xml"+r$(t[e.attributesKey],e,r)+"?>"}function rZ(t,e,r){if(e.ignoreInstruction)return"";for(n in t)if(t.hasOwnProperty(n))break;var n,i="instructionNameFn"in e?e.instructionNameFn(n,t[n],Q,X):n;if("object"==typeof t[n])return X=t,Q=i,"<?"+i+r$(t[n][e.attributesKey],e,r)+"?>";var a=t[n]?t[n]:"";return"instructionFn"in e&&(a=e.instructionFn(a,n,Q,X)),"<?"+i+(a?" "+a:"")+"?>"}function rJ(t,e){return e.ignoreComment?"":"<!--"+("commentFn"in e?e.commentFn(t,Q,X):t)+"-->"}function rX(t,e){return e.ignoreCdata?"":"<![CDATA["+("cdataFn"in e?e.cdataFn(t,Q,X):t.replace("]]>","]]]]><![CDATA[>"))+"]]>"}function rQ(t,e){return e.ignoreDoctype?"":"<!DOCTYPE "+("doctypeFn"in e?e.doctypeFn(t,Q,X):t)+">"}function r0(t,e){return e.ignoreText?"":(t=(t=(t=""+t).replace(/&amp;/g,"&")).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"textFn"in e?e.textFn(t,Q,X):t)}function r1(t,e,r){var n;for(n in t)if(t.hasOwnProperty(n))switch(n){case e.parentKey:case e.attributesKey:break;case e.textKey:if(e.indentText||r)return!0;break;case e.cdataKey:if(e.indentCdata||r)return!0;break;case e.instructionKey:if(e.indentInstruction||r)return!0;break;case e.doctypeKey:case e.commentKey:default:return!0}return!1}var r2=function(t,e){r=e,n=rY.copyOptions(r),rY.ensureFlagExists("ignoreDeclaration",n),rY.ensureFlagExists("ignoreInstruction",n),rY.ensureFlagExists("ignoreAttributes",n),rY.ensureFlagExists("ignoreText",n),rY.ensureFlagExists("ignoreComment",n),rY.ensureFlagExists("ignoreCdata",n),rY.ensureFlagExists("ignoreDoctype",n),rY.ensureFlagExists("compact",n),rY.ensureFlagExists("indentText",n),rY.ensureFlagExists("indentCdata",n),rY.ensureFlagExists("indentAttributes",n),rY.ensureFlagExists("indentInstruction",n),rY.ensureFlagExists("fullTagEmptyElement",n),rY.ensureFlagExists("noQuotesForNativeAttributes",n),rY.ensureSpacesExists(n),"number"==typeof n.spaces&&(n.spaces=Array(n.spaces+1).join(" ")),rY.ensureKeyExists("declaration",n),rY.ensureKeyExists("instruction",n),rY.ensureKeyExists("attributes",n),rY.ensureKeyExists("text",n),rY.ensureKeyExists("comment",n),rY.ensureKeyExists("cdata",n),rY.ensureKeyExists("doctype",n),rY.ensureKeyExists("type",n),rY.ensureKeyExists("name",n),rY.ensureKeyExists("elements",n),rY.checkFnExists("doctype",n),rY.checkFnExists("instruction",n),rY.checkFnExists("cdata",n),rY.checkFnExists("comment",n),rY.checkFnExists("text",n),rY.checkFnExists("instructionName",n),rY.checkFnExists("elementName",n),rY.checkFnExists("attributeName",n),rY.checkFnExists("attributeValue",n),rY.checkFnExists("attributes",n),rY.checkFnExists("fullTagEmptyElement",n),e=n;var r,n,i=[];return X=t,Q="_root_",e.compact?i.push(function t(e,r,n,i){var a,o,s,u=[];for(o in e)if(e.hasOwnProperty(o))for(a=0,s=rW(e[o])?e[o]:[e[o]];a<s.length;++a){switch(o){case r.declarationKey:u.push(rG(s[a],r,n));break;case r.instructionKey:u.push((r.indentInstruction?rq(r,n,i):"")+rZ(s[a],r,n));break;case r.attributesKey:case r.parentKey:break;case r.textKey:u.push((r.indentText?rq(r,n,i):"")+r0(s[a],r));break;case r.cdataKey:u.push((r.indentCdata?rq(r,n,i):"")+rX(s[a],r));break;case r.doctypeKey:u.push(rq(r,n,i)+rQ(s[a],r));break;case r.commentKey:u.push(rq(r,n,i)+rJ(s[a],r));break;default:u.push(rq(r,n,i)+function(e,r,n,i,a){X=e,Q=r;var o="elementNameFn"in n?n.elementNameFn(r,e):r;if(null==e||""===e)return"fullTagEmptyElementFn"in n&&n.fullTagEmptyElementFn(r,e)||n.fullTagEmptyElement?"<"+o+"></"+o+">":"<"+o+"/>";var s=[];if(r){if(s.push("<"+o),"object"!=typeof e)return s.push(">"+r0(e,n)+"</"+o+">"),s.join("");e[n.attributesKey]&&s.push(r$(e[n.attributesKey],n,i));var u=r1(e,n,!0)||e[n.attributesKey]&&"preserve"===e[n.attributesKey]["xml:space"];if(u||(u="fullTagEmptyElementFn"in n?n.fullTagEmptyElementFn(r,e):n.fullTagEmptyElement),!u)return s.push("/>"),s.join("");s.push(">")}return s.push(t(e,n,i+1,!1)),X=e,Q=r,r&&s.push((a?rq(n,i,!1):"")+"</"+o+">"),s.join("")}(s[a],o,r,n,r1(s[a],r)))}i=i&&!u.length}return u.join("")}(t,e,0,!0)):(t[e.declarationKey]&&i.push(rG(t[e.declarationKey],e,0)),t[e.elementsKey]&&t[e.elementsKey].length&&i.push(function t(e,r,n,i){return e.reduce(function(e,a){var o,s,u,c=rq(r,n,i&&!e);switch(a.type){case"element":return e+c+(X=a,Q=a.name,o=[],s="elementNameFn"in r?r.elementNameFn(a.name,a):a.name,o.push("<"+s),a[r.attributesKey]&&o.push(r$(a[r.attributesKey],r,n)),(u=a[r.elementsKey]&&a[r.elementsKey].length||a[r.attributesKey]&&"preserve"===a[r.attributesKey]["xml:space"])||(u="fullTagEmptyElementFn"in r?r.fullTagEmptyElementFn(a.name,a):r.fullTagEmptyElement),u?(o.push(">"),a[r.elementsKey]&&a[r.elementsKey].length&&(o.push(t(a[r.elementsKey],r,n+1)),X=a,Q=a.name),o.push(r.spaces&&function(t,e){var r;if(t.elements&&t.elements.length)for(r=0;r<t.elements.length;++r)switch(t.elements[r][e.typeKey]){case"text":if(e.indentText)return!0;break;case"cdata":if(e.indentCdata)return!0;break;case"instruction":if(e.indentInstruction)return!0;break;default:return!0}return!1}(a,r)?"\n"+Array(n+1).join(r.spaces):""),o.push("</"+s+">")):o.push("/>"),o.join(""));case"comment":return e+c+rJ(a[r.commentKey],r);case"doctype":return e+c+rQ(a[r.doctypeKey],r);case"cdata":return e+(r.indentCdata?c:"")+rX(a[r.cdataKey],r);case"text":return e+(r.indentText?c:"")+r0(a[r.textKey],r);case"instruction":var l={};return l[a[r.nameKey]]=a[r.attributesKey]?a:a[r.instructionKey],e+(r.indentInstruction?c:"")+rZ(l,r,n)}},"")}(t[e.elementsKey],e,0,!i.length))),i.join("")},r3=tw({xml2js:rK,xml2json:function(t,e){var r,n,i;return i=rY.copyOptions(e),rY.ensureSpacesExists(i),r=rK(t,i),n="compact"in i&&i.compact?"_parent":"parent",("addParent"in i&&i.addParent?JSON.stringify(r,function(t,e){return t===n?"_":e},i.spaces):JSON.stringify(r,null,i.spaces)).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")},js2xml:r2,json2xml:function(t,e){t instanceof t6&&(t=t.toString());var r=null;if("string"==typeof t)try{r=JSON.parse(t)}catch(t){throw Error("The JSON structure is invalid")}else r=t;return r2(r,e)}}),r6=function(t){var e=Number(t);if(!Number.isNaN(e))return e;var r=t.toLowerCase();return"true"===r||"false"!==r&&t},r8=function(t,e){if(!t&&!e)return!0;if(!t||!e)return!1;var r=t.trim(),n=e.trim(),i="/"===r.slice(-1)?r.slice(0,-1):r,a="/"===n.slice(-1)?n.slice(0,-1):n;return t.includes(a)||e.includes(i)},r4=function(t){return t.reduce(function(t,e){return Object.assign(Object.assign({},t),ts({},tK[e],e))},{})},r5=function(t){return Object.entries(t).reduce(function(t,e){var r=tv(e,2),n=r[0],i=r[1];return i?Object.assign(Object.assign({},t),ts({},n,i)):t},{})},r9=Object.freeze({__proto__:null,cleanupFalsy:r5,getDAVAttribute:r4,urlContains:r8,urlEquals:function(t,e){if(!t&&!e)return!0;if(!t||!e)return!1;var r=t.trim(),n=e.trim();if(Math.abs(r.length-n.length)>1)return!1;var i="/"===r.slice(-1)?r.slice(0,-1):r,a="/"===n.slice(-1)?n.slice(0,-1):n;return t.includes(a)||e.includes(i)}}),r7=tH("tsdav:request"),nt=function(t){return tE(void 0,void 0,void 0,function(){var e,r,n,i,a,o,s,u,c,l,h,f,d,m,y,v,g;return ta(this,function(b){switch(b.label){case 0:return r=t.url,n=t.init,a=void 0===(i=t.convertIncoming)||i,s=void 0===(o=t.parseOutgoing)||o,c=void 0===(u=n.headers)?{}:u,l=n.body,h=n.namespace,f=n.method,d=n.attributes,m=a?r3.js2xml(Object.assign(Object.assign({_declaration:{_attributes:{version:"1.0",encoding:"utf-8"}}},l),{_attributes:d}),{compact:!0,spaces:2,elementNameFn:function(t){return h&&!/^.+:.+/.test(t)?"".concat(h,":").concat(t):t}}):l,[4,tC.fetch(r,{headers:Object.assign({"Content-Type":"text/xml;charset=UTF-8"},r5(c)),body:m,method:f})];case 1:return[4,(y=b.sent()).text()];case 2:if(v=b.sent(),!y.ok||!(null===(e=y.headers.get("content-type"))||void 0===e?void 0:e.includes("xml"))||!s)return[2,[{href:y.url,ok:y.ok,status:y.status,statusText:y.statusText,raw:v}]];return[2,(Array.isArray((g=r3.xml2js(v,{compact:!0,trim:!0,textFn:function(t,e){try{var r=e._parent,n=Object.keys(r),i=n.length,a=n[i-1],o=r[a];if(o.length>0){var s=o.length-1;o[s]=r6(t)}else r[a]=r6(t)}catch(t){r7(t.stack)}},elementNameFn:function(t){return t.replace(/^.+:/,"").replace(/([-_]\w)/g,function(t){return t[1].toUpperCase()})},attributesFn:function(t){var e=Object.assign({},t);return delete e.xmlns,e},ignoreDeclaration:!0})).multistatus.response)?g.multistatus.response:[g.multistatus.response]).map(function(t){var e,r,n=t_(/^\S+\s(\d+)\s(.+)$/,{status:1,statusText:2});if(!t)return{status:y.status,statusText:y.statusText,ok:y.ok};var i=n.exec(t.status);return{raw:g,href:t.href,status:(null==i?void 0:i.groups)?Number.parseInt(null==i?void 0:i.groups.status,10):y.status,statusText:null!==(r=null===(e=null==i?void 0:i.groups)||void 0===e?void 0:e.statusText)&&void 0!==r?r:y.statusText,ok:!t.error,error:t.error,responsedescription:t.responsedescription,props:(Array.isArray(t.propstat)?t.propstat:[t.propstat]).reduce(function(t,e){return Object.assign(Object.assign({},t),null==e?void 0:e.prop)},{})}})]}})})},ne=function(t){return tE(void 0,void 0,void 0,function(){var e,r;return ta(this,function(n){return e=t.url,r=t.props,[2,nt({url:e,init:{method:"PROPFIND",headers:r5(Object.assign({depth:t.depth},t.headers)),namespace:W.DAV,body:{propfind:{_attributes:r4([H.CALDAV,H.CALDAV_APPLE,H.CALENDAR_SERVER,H.CARDDAV,H.DAV]),prop:r}}}})]})})},nr=function(t){return tE(void 0,void 0,void 0,function(){var e,r,n;return ta(this,function(i){return e=t.url,r=t.data,n=t.headers,[2,tC.fetch(e,{method:"PUT",body:r,headers:n})]})})},nn=function(t){return tE(void 0,void 0,void 0,function(){var e,r,n,i;return ta(this,function(a){return e=t.url,r=t.data,n=t.etag,i=t.headers,[2,tC.fetch(e,{method:"PUT",body:r,headers:r5(Object.assign({"If-Match":n},i))})]})})},ni=function(t){return tE(void 0,void 0,void 0,function(){var e,r,n;return ta(this,function(i){return e=t.url,r=t.headers,n=t.etag,[2,tC.fetch(e,{method:"DELETE",headers:r5(Object.assign({"If-Match":n},r))})]})})},na=Object.freeze({__proto__:null,createObject:nr,davRequest:nt,deleteObject:ni,propfind:ne,updateObject:nn});function no(t,e){var r=function(t){return e.every(function(e){return t[e]})};return Array.isArray(t)?t.every(function(t){return r(t)}):r(t)}var ns=function(t,e){return e.reduce(function(e,r){return t[r]?e:"".concat(e.length?"".concat(e,","):"").concat(r.toString())},"")},nu=tH("tsdav:collection"),nc=function(t){return tE(void 0,void 0,void 0,function(){var e,r,n,i,a,o;return ta(this,function(s){switch(s.label){case 0:return e=t.url,r=t.body,n=t.depth,a=void 0===(i=t.defaultNamespace)?W.DAV:i,[4,nt({url:e,init:{method:"REPORT",headers:r5(Object.assign({depth:n},t.headers)),namespace:a,body:r}})];case 1:if(1===(o=s.sent()).length&&!o[0].raw)return[2,[]];return[2,o]}})})},nl=function(t){return tE(void 0,void 0,void 0,function(){var e,r;return ta(this,function(n){return e=t.url,r=t.props,[2,nt({url:e,init:{method:"MKCOL",headers:r5(Object.assign({depth:t.depth},t.headers)),namespace:W.DAV,body:r?{mkcol:{set:{prop:r}}}:void 0}})]})})},nh=function(t){return tE(void 0,void 0,void 0,function(){var e,r,n,i,a,o,s;return ta(this,function(u){switch(u.label){case 0:return o=t.collection,s=t.headers,[4,ne({url:o.url,props:ts({},"".concat(W.DAV,":supported-report-set"),{}),depth:"0",headers:s})];case 1:return[2,null!==(a=null===(i=null===(n=null===(r=null===(e=u.sent()[0])||void 0===e?void 0:e.props)||void 0===r?void 0:r.supportedReportSet)||void 0===n?void 0:n.supportedReport)||void 0===i?void 0:i.map(function(t){return Object.keys(t.report)[0]}))&&void 0!==a?a:[]]}})})},nf=function(t){return tE(void 0,void 0,void 0,function(){var e,r,n,i,a,o;return ta(this,function(s){switch(s.label){case 0:return i=t.collection,a=t.headers,[4,ne({url:i.url,props:ts({},"".concat(W.CALENDAR_SERVER,":getctag"),{}),depth:"0",headers:a})];case 1:if(!(o=s.sent().filter(function(t){return r8(i.url,t.href)})[0]))throw Error("Collection does not exist on server");return[2,{isDirty:i.ctag!==(null===(e=o.props)||void 0===e?void 0:e.getctag),newCtag:null===(n=null===(r=o.props)||void 0===r?void 0:r.getctag)||void 0===n?void 0:n.toString()}]}})})},nd=function(t){var e=t.url,r=t.props,n=t.headers,i=t.syncLevel,a=t.syncToken;return nt({url:e,init:{method:"REPORT",namespace:W.DAV,headers:Object.assign({},n),body:{"sync-collection":ts({_attributes:r4([H.CALDAV,H.CARDDAV,H.DAV]),"sync-level":i,"sync-token":a},"".concat(W.DAV,":prop"),r)}}})},np=function(t){return tE(void 0,void 0,void 0,function(){var e,r,n,i,a,o,s,u,c,l,h,f,d,m,y,v,g,b,_,T,E,A,w,D,O,C,S,x,I,N,Y,R,k,P,L,j,M,B,F,U;return ta(this,function(V){switch(V.label){case 0:if(f=t.collection,d=t.method,m=t.headers,y=t.account,v=t.detailedResult,g=["accountType","homeUrl"],!y||!no(y,g)){if(!y)throw Error("no account for smartCollectionSync");throw Error("account must have ".concat(ns(y,g)," before smartCollectionSync"))}if(b=null!=d?d:(null===(e=f.reports)||void 0===e?void 0:e.includes("syncCollection"))?"webdav":"basic",nu("smart collection sync with type ".concat(y.accountType," and method ").concat(b)),"webdav"!==b)return[3,5];return[4,nd({url:f.url,props:(ts(_={},"".concat(W.DAV,":getetag"),{}),ts(_,"".concat("caldav"===y.accountType?W.CALDAV:W.CARDDAV,":").concat("caldav"===y.accountType?"calendar-data":"address-data"),{}),ts(_,"".concat(W.DAV,":displayname"),{}),_),syncLevel:1,syncToken:f.syncToken,headers:m})];case 1:if(A=(E=(T=V.sent()).filter(function(t){var e,r="caldav"===y.accountType?".ics":".vcf";return(null===(e=t.href)||void 0===e?void 0:e.slice(-4))===r})).filter(function(t){return 404!==t.status}).map(function(t){return t.href}),w=E.filter(function(t){return 404===t.status}).map(function(t){return t.href}),!A.length)return[3,3];return[4,null===(r=null==f?void 0:f.objectMultiGet)||void 0===r?void 0:r.call(f,{url:f.url,props:(ts(D={},"".concat(W.DAV,":getetag"),{}),ts(D,"".concat("caldav"===y.accountType?W.CALDAV:W.CARDDAV,":").concat("caldav"===y.accountType?"calendar-data":"address-data"),{}),D),objectUrls:A,depth:"1",headers:m})];case 2:return O=null!==(n=V.sent())&&void 0!==n?n:[],[3,4];case 3:O=[],V.label=4;case 4:return C=O.map(function(t){var e,r,n,i,a,o,s,u,c,l;return{url:null!==(e=t.href)&&void 0!==e?e:"",etag:null===(r=t.props)||void 0===r?void 0:r.getetag,data:(null==y?void 0:y.accountType)==="caldav"?null!==(a=null===(i=null===(n=t.props)||void 0===n?void 0:n.calendarData)||void 0===i?void 0:i._cdata)&&void 0!==a?a:null===(o=t.props)||void 0===o?void 0:o.calendarData:null!==(c=null===(u=null===(s=t.props)||void 0===s?void 0:s.addressData)||void 0===u?void 0:u._cdata)&&void 0!==c?c:null===(l=t.props)||void 0===l?void 0:l.addressData}}),S=null!==(i=f.objects)&&void 0!==i?i:[],x=C.filter(function(t){return S.every(function(e){return!r8(e.url,t.url)})}),I=S.reduce(function(t,e){var r=C.find(function(t){return r8(t.url,e.url)});return r&&r.etag&&r.etag!==e.etag?tg(t).concat([r]):t},[]),N=w.map(function(t){return{url:t,etag:""}}),Y=S.filter(function(t){return C.some(function(e){return r8(t.url,e.url)&&e.etag===t.etag})}),[2,Object.assign(Object.assign({},f),{objects:v?{created:x,updated:I,deleted:N}:tg(Y).concat(tg(x),tg(I)),syncToken:null!==(u=null===(s=null===(o=null===(a=T[0])||void 0===a?void 0:a.raw)||void 0===o?void 0:o.multistatus)||void 0===s?void 0:s.syncToken)&&void 0!==u?u:f.syncToken})];case 5:if("basic"!==b)return[3,8];return[4,nf({collection:f,headers:m})];case 6:return k=(R=V.sent()).isDirty,P=R.newCtag,L=null!==(c=f.objects)&&void 0!==c?c:[],[4,null===(l=f.fetchObjects)||void 0===l?void 0:l.call(f,{collection:f,headers:m})];case 7:if(M=(j=null!==(h=V.sent())&&void 0!==h?h:[]).filter(function(t){return L.every(function(e){return!r8(e.url,t.url)})}),B=L.reduce(function(t,e){var r=j.find(function(t){return r8(t.url,e.url)});return r&&r.etag&&r.etag!==e.etag?tg(t).concat([r]):t},[]),F=L.filter(function(t){return j.every(function(e){return!r8(e.url,t.url)})}),U=L.filter(function(t){return j.some(function(e){return r8(t.url,e.url)&&e.etag===t.etag})}),k)return[2,Object.assign(Object.assign({},f),{objects:v?{created:M,updated:B,deleted:F}:tg(U).concat(tg(M),tg(B)),ctag:P})];V.label=8;case 8:return[2,v?Object.assign(Object.assign({},f),{objects:{created:[],updated:[],deleted:[]}}):f]}})})},nm=Object.freeze({__proto__:null,collectionQuery:nc,isCollectionDirty:nf,makeCollection:nl,smartCollectionSync:np,supportedReportSet:nh,syncCollection:nd}),ny=tH("tsdav:addressBook"),nv=function(t){return tE(void 0,void 0,void 0,function(){var e,r,n,i,a,o;return ta(this,function(s){return e=t.url,r=t.props,n=t.filters,i=t.depth,a=t.headers,[2,nc({url:e,body:{"addressbook-query":(ts(o={_attributes:r4([H.CARDDAV,H.DAV])},"".concat(W.DAV,":prop"),r),ts(o,"filter",null!=n?n:{"prop-filter":{_attributes:{name:"FN"}}}),o)},defaultNamespace:W.CARDDAV,depth:i,headers:a})]})})},ng=function(t){return tE(void 0,void 0,void 0,function(){var e,r,n,i,a,o;return ta(this,function(s){return e=t.url,r=t.props,n=t.objectUrls,i=t.depth,a=t.headers,[2,nc({url:e,body:{"addressbook-multiget":(ts(o={_attributes:r4([H.DAV,H.CARDDAV])},"".concat(W.DAV,":prop"),r),ts(o,"".concat(W.DAV,":href"),n),o)},defaultNamespace:W.CARDDAV,depth:i,headers:a})]})})},nb=function(t){return tE(void 0,void 0,void 0,function(){var e,r,n,i,a,o;return ta(this,function(s){switch(s.label){case 0:if(r=(e=null!=t?t:{}).account,n=e.headers,i=e.props,a=["homeUrl","rootUrl"],!r||!no(r,a)){if(!r)throw Error("no account for fetchAddressBooks");throw Error("account must have ".concat(ns(r,a)," before fetchAddressBooks"))}return[4,ne({url:r.homeUrl,props:null!=i?i:(ts(o={},"".concat(W.DAV,":displayname"),{}),ts(o,"".concat(W.CALENDAR_SERVER,":getctag"),{}),ts(o,"".concat(W.DAV,":resourcetype"),{}),ts(o,"".concat(W.DAV,":sync-token"),{}),o),depth:"1",headers:n})];case 1:return[2,Promise.all(s.sent().filter(function(t){var e,r;return Object.keys(null!==(r=null===(e=t.props)||void 0===e?void 0:e.resourcetype)&&void 0!==r?r:{}).includes("addressbook")}).map(function(t){var e,n,i,a,o,s,u,c,l,h=null!==(i=null===(n=null===(e=t.props)||void 0===e?void 0:e.displayname)||void 0===n?void 0:n._cdata)&&void 0!==i?i:null===(a=t.props)||void 0===a?void 0:a.displayname;return ny("Found address book named ".concat("string"==typeof h?h:"",",\n             props: ").concat(JSON.stringify(t.props))),{url:new URL(null!==(o=t.href)&&void 0!==o?o:"",null!==(s=r.rootUrl)&&void 0!==s?s:"").href,ctag:null===(u=t.props)||void 0===u?void 0:u.getctag,displayName:"string"==typeof h?h:"",resourcetype:Object.keys(null===(c=t.props)||void 0===c?void 0:c.resourcetype),syncToken:null===(l=t.props)||void 0===l?void 0:l.syncToken}}).map(function(t){return tE(void 0,void 0,void 0,function(){var e,r,i;return ta(this,function(a){switch(a.label){case 0:return e=Object.assign,r=[Object.assign({},t)],i={},[4,nh({collection:t,headers:n})];case 1:return[2,e.apply(Object,r.concat([(i.reports=a.sent(),i)]))]}})})}))]}})})},n_=function(t){return tE(void 0,void 0,void 0,function(){var e,r,n,i,a,o,s,u,c,l,h,f,d;return ta(this,function(m){switch(m.label){case 0:if(e=t.addressBook,r=t.headers,n=t.objectUrls,a=void 0===(i=t.urlFilter)?function(t){return t}:i,s=void 0===(o=t.useMultiGet)||o,ny("Fetching vcards from ".concat(null==e?void 0:e.url)),u=["url"],!e||!no(e,u)){if(!e)throw Error("cannot fetchVCards for undefined addressBook");throw Error("addressBook must have ".concat(ns(e,u)," before fetchVCards"))}if(!(null!=n))return[3,1];return l=n,[3,3];case 1:return[4,nv({url:e.url,props:ts({},"".concat(W.DAV,":getetag"),{}),depth:"1",headers:r})];case 2:l=m.sent().map(function(t){var e;return t.ok&&null!==(e=t.href)&&void 0!==e?e:""}),m.label=3;case 3:if(c=l.map(function(t){return t.startsWith("http")||!t?t:new URL(t,e.url).href}).filter(a).map(function(t){return new URL(t).pathname}),h=[],!(c.length>0))return[3,7];if(!s)return[3,5];return[4,ng({url:e.url,props:(ts(f={},"".concat(W.DAV,":getetag"),{}),ts(f,"".concat(W.CARDDAV,":address-data"),{}),f),objectUrls:c,depth:"1",headers:r})];case 4:return h=m.sent(),[3,7];case 5:return[4,nv({url:e.url,props:(ts(d={},"".concat(W.DAV,":getetag"),{}),ts(d,"".concat(W.CARDDAV,":address-data"),{}),d),depth:"1",headers:r})];case 6:h=m.sent(),m.label=7;case 7:return[2,h.map(function(t){var r,n,i,a,o,s;return{url:new URL(null!==(r=t.href)&&void 0!==r?r:"",e.url).href,etag:null===(n=t.props)||void 0===n?void 0:n.getetag,data:null!==(o=null===(a=null===(i=t.props)||void 0===i?void 0:i.addressData)||void 0===a?void 0:a._cdata)&&void 0!==o?o:null===(s=t.props)||void 0===s?void 0:s.addressData}})]}})})},nT=function(t){return tE(void 0,void 0,void 0,function(){var e,r,n,i;return ta(this,function(a){return e=t.addressBook,r=t.vCardString,n=t.filename,i=t.headers,[2,nr({url:new URL(n,e.url).href,data:r,headers:Object.assign({"content-type":"text/vcard; charset=utf-8","If-None-Match":"*"},i)})]})})},nE=function(t){return tE(void 0,void 0,void 0,function(){var e,r;return ta(this,function(n){return e=t.vCard,r=t.headers,[2,nn({url:e.url,data:e.data,etag:e.etag,headers:Object.assign({"content-type":"text/vcard; charset=utf-8"},r)})]})})},nA=function(t){return tE(void 0,void 0,void 0,function(){var e,r;return ta(this,function(n){return e=t.vCard,r=t.headers,[2,ni({url:e.url,etag:e.etag,headers:r})]})})},nw=Object.freeze({__proto__:null,addressBookMultiGet:ng,addressBookQuery:nv,createVCard:nT,deleteVCard:nA,fetchAddressBooks:nb,fetchVCards:n_,updateVCard:nE}),nD=tH("tsdav:calendar"),nO=function(t){return tE(void 0,void 0,void 0,function(){var e,r,n,i,a,o,s;return ta(this,function(u){return e=t.url,r=t.props,n=t.filters,i=t.timezone,a=t.depth,o=t.headers,[2,nc({url:e,body:{"calendar-query":r5((ts(s={_attributes:r4([H.CALDAV,H.CALENDAR_SERVER,H.CALDAV_APPLE,H.DAV])},"".concat(W.DAV,":prop"),r),ts(s,"filter",n),ts(s,"timezone",i),s))},defaultNamespace:W.CALDAV,depth:a,headers:o})]})})},nC=function(t){return tE(void 0,void 0,void 0,function(){var e,r,n,i,a,o,s,u;return ta(this,function(c){return e=t.url,r=t.props,n=t.objectUrls,i=t.filters,a=t.timezone,o=t.depth,s=t.headers,[2,nc({url:e,body:{"calendar-multiget":(ts(u={_attributes:r4([H.DAV,H.CALDAV])},"".concat(W.DAV,":prop"),r),ts(u,"".concat(W.DAV,":href"),n),ts(u,"filter",i),ts(u,"timezone",a),u)},defaultNamespace:W.CALDAV,depth:o,headers:s})]})})},nS=function(t){return tE(void 0,void 0,void 0,function(){var e,r;return ta(this,function(n){return e=t.url,r=t.props,[2,nt({url:e,init:{method:"MKCALENDAR",headers:r5(Object.assign({depth:t.depth},t.headers)),namespace:W.DAV,body:ts({},"".concat(W.CALDAV,":mkcalendar"),{_attributes:r4([H.DAV,H.CALDAV,H.CALDAV_APPLE]),set:{prop:r}})}})]})})},nx=function(t){return tE(void 0,void 0,void 0,function(){var e,r,n,i,a,o;return ta(this,function(s){switch(s.label){case 0:if(r=(e=null!=t?t:{}).headers,n=e.account,i=e.props,a=["homeUrl","rootUrl"],!n||!no(n,a)){if(!n)throw Error("no account for fetchCalendars");throw Error("account must have ".concat(ns(n,a)," before fetchCalendars"))}return[4,ne({url:n.homeUrl,props:null!=i?i:(ts(o={},"".concat(W.CALDAV,":calendar-description"),{}),ts(o,"".concat(W.CALDAV,":calendar-timezone"),{}),ts(o,"".concat(W.DAV,":displayname"),{}),ts(o,"".concat(W.CALDAV_APPLE,":calendar-color"),{}),ts(o,"".concat(W.CALENDAR_SERVER,":getctag"),{}),ts(o,"".concat(W.DAV,":resourcetype"),{}),ts(o,"".concat(W.CALDAV,":supported-calendar-component-set"),{}),ts(o,"".concat(W.DAV,":sync-token"),{}),o),depth:"1",headers:r})];case 1:return[2,Promise.all(s.sent().filter(function(t){var e,r;return Object.keys(null!==(r=null===(e=t.props)||void 0===e?void 0:e.resourcetype)&&void 0!==r?r:{}).includes("calendar")}).filter(function(t){var e,r,n;return(Array.isArray(null===(e=t.props)||void 0===e?void 0:e.supportedCalendarComponentSet.comp)?null===(r=t.props)||void 0===r?void 0:r.supportedCalendarComponentSet.comp.map(function(t){return t._attributes.name}):[null===(n=t.props)||void 0===n?void 0:n.supportedCalendarComponentSet.comp._attributes.name]).some(function(t){return Object.values(q).includes(t)})}).map(function(t){var e,r,i,a,o,s,u,c,l,h,f,d,m,y,v=null===(e=t.props)||void 0===e?void 0:e.calendarDescription,g=null===(r=t.props)||void 0===r?void 0:r.calendarTimezone;return{description:"string"==typeof v?v:"",timezone:"string"==typeof g?g:"",url:new URL(null!==(i=t.href)&&void 0!==i?i:"",null!==(a=n.rootUrl)&&void 0!==a?a:"").href,ctag:null===(o=t.props)||void 0===o?void 0:o.getctag,calendarColor:null===(s=t.props)||void 0===s?void 0:s.calendarColor,displayName:null!==(c=null===(u=t.props)||void 0===u?void 0:u.displayname._cdata)&&void 0!==c?c:null===(l=t.props)||void 0===l?void 0:l.displayname,components:Array.isArray(null===(h=t.props)||void 0===h?void 0:h.supportedCalendarComponentSet.comp)?null===(f=t.props)||void 0===f?void 0:f.supportedCalendarComponentSet.comp.map(function(t){return t._attributes.name}):[null===(d=t.props)||void 0===d?void 0:d.supportedCalendarComponentSet.comp._attributes.name],resourcetype:Object.keys(null===(m=t.props)||void 0===m?void 0:m.resourcetype),syncToken:null===(y=t.props)||void 0===y?void 0:y.syncToken}}).map(function(t){return tE(void 0,void 0,void 0,function(){var e,n,i;return ta(this,function(a){switch(a.label){case 0:return e=Object.assign,n=[Object.assign({},t)],i={},[4,nh({collection:t,headers:r})];case 1:return[2,e.apply(Object,n.concat([(i.reports=a.sent(),i)]))]}})})}))]}})})},nI=function(t){return tE(void 0,void 0,void 0,function(){var e,r,n,i,a,o,s,u,c,l,h,f,d,m,y,v,g,b,_;return ta(this,function(T){switch(T.label){case 0:if(e=t.calendar,r=t.objectUrls,n=t.filters,i=t.timeRange,a=t.headers,o=t.expand,u=void 0===(s=t.urlFilter)?function(t){return!!(null==t?void 0:t.includes(".ics"))}:s,l=void 0===(c=t.useMultiGet)||c,i&&(f=/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(\.\d+)?(([+-]\d\d:\d\d)|Z)?$/i,(!(h=/^\d{4}(-\d\d(-\d\d(T\d\d:\d\d(:\d\d)?(\.\d+)?(([+-]\d\d:\d\d)|Z)?)?)?)?$/i).test(i.start)||!h.test(i.end))&&(!f.test(i.start)||!f.test(i.end))))throw Error("invalid timeRange format, not in ISO8601");if(nD("Fetching calendar objects from ".concat(null==e?void 0:e.url)),d=["url"],!e||!no(e,d)){if(!e)throw Error("cannot fetchCalendarObjects for undefined calendar");throw Error("calendar must have ".concat(ns(e,d)," before fetchCalendarObjects"))}if(m=null!=n?n:[{"comp-filter":{_attributes:{name:"VCALENDAR"},"comp-filter":Object.assign({_attributes:{name:"VEVENT"}},i?{"time-range":{_attributes:{start:"".concat(new Date(i.start).toISOString().slice(0,19).replace(/[-:.]/g,""),"Z"),end:"".concat(new Date(i.end).toISOString().slice(0,19).replace(/[-:.]/g,""),"Z")}}}:{})}}],!(null!=r))return[3,1];return v=r,[3,3];case 1:return[4,nO({url:e.url,props:ts({},"".concat(W.DAV,":getetag"),Object.assign({},o&&i?ts({},"".concat(W.CALDAV,":expand"),{_attributes:{start:"".concat(new Date(i.start).toISOString().slice(0,19).replace(/[-:.]/g,""),"Z"),end:"".concat(new Date(i.end).toISOString().slice(0,19).replace(/[-:.]/g,""),"Z")}}):{})),filters:m,depth:"1",headers:a})];case 2:v=T.sent().map(function(t){var e;return null!==(e=t.href)&&void 0!==e?e:""}),T.label=3;case 3:if(y=v.map(function(t){return t.startsWith("http")||!t?t:new URL(t,e.url).href}).filter(u).map(function(t){return new URL(t).pathname}),g=[],!(y.length>0))return[3,7];if(!(!l||o))return[3,5];return[4,nO({url:e.url,props:(ts(b={},"".concat(W.DAV,":getetag"),{}),ts(b,"".concat(W.CALDAV,":calendar-data"),Object.assign({},o&&i?ts({},"".concat(W.CALDAV,":expand"),{_attributes:{start:"".concat(new Date(i.start).toISOString().slice(0,19).replace(/[-:.]/g,""),"Z"),end:"".concat(new Date(i.end).toISOString().slice(0,19).replace(/[-:.]/g,""),"Z")}}):{})),b),filters:m,depth:"1",headers:a})];case 4:return g=T.sent(),[3,7];case 5:return[4,nC({url:e.url,props:(ts(_={},"".concat(W.DAV,":getetag"),{}),ts(_,"".concat(W.CALDAV,":calendar-data"),Object.assign({},o&&i?ts({},"".concat(W.CALDAV,":expand"),{_attributes:{start:"".concat(new Date(i.start).toISOString().slice(0,19).replace(/[-:.]/g,""),"Z"),end:"".concat(new Date(i.end).toISOString().slice(0,19).replace(/[-:.]/g,""),"Z")}}):{})),_),objectUrls:y,depth:"1",headers:a})];case 6:g=T.sent(),T.label=7;case 7:return[2,g.map(function(t){var r,n,i,a,o,s;return{url:new URL(null!==(r=t.href)&&void 0!==r?r:"",e.url).href,etag:"".concat(null===(n=t.props)||void 0===n?void 0:n.getetag),data:null!==(o=null===(a=null===(i=t.props)||void 0===i?void 0:i.calendarData)||void 0===a?void 0:a._cdata)&&void 0!==o?o:null===(s=t.props)||void 0===s?void 0:s.calendarData}})]}})})},nN=function(t){return tE(void 0,void 0,void 0,function(){var e,r,n,i;return ta(this,function(a){return e=t.calendar,r=t.iCalString,n=t.filename,i=t.headers,[2,nr({url:new URL(n,e.url).href,data:r,headers:Object.assign({"content-type":"text/calendar; charset=utf-8","If-None-Match":"*"},i)})]})})},nY=function(t){return tE(void 0,void 0,void 0,function(){var e,r;return ta(this,function(n){return e=t.calendarObject,r=t.headers,[2,nn({url:e.url,data:e.data,etag:e.etag,headers:Object.assign({"content-type":"text/calendar; charset=utf-8"},r)})]})})},nR=function(t){return tE(void 0,void 0,void 0,function(){var e,r;return ta(this,function(n){return e=t.calendarObject,r=t.headers,[2,ni({url:e.url,etag:e.etag,headers:r})]})})},nk=function(t){return tE(void 0,void 0,void 0,function(){var e,r,n,i,a,o,s,u,c,l,h,f;return ta(this,function(d){switch(d.label){case 0:if(r=t.oldCalendars,n=t.account,i=t.detailedResult,a=t.headers,!n)throw Error("Must have account before syncCalendars");return o=null!==(e=null!=r?r:n.calendars)&&void 0!==e?e:[],[4,nx({account:n,headers:a})];case 1:return u=(s=d.sent()).filter(function(t){return o.every(function(e){return!r8(e.url,t.url)})}),nD("new calendars: ".concat(u.map(function(t){return t.displayName}))),c=o.reduce(function(t,e){var r=s.find(function(t){return r8(t.url,e.url)});return r&&(r.syncToken&&r.syncToken!==e.syncToken||r.ctag&&r.ctag!==e.ctag)?tg(t).concat([r]):t},[]),nD("updated calendars: ".concat(c.map(function(t){return t.displayName}))),[4,Promise.all(c.map(function(t){return tE(void 0,void 0,void 0,function(){return ta(this,function(e){switch(e.label){case 0:return[4,np({collection:Object.assign(Object.assign({},t),{objectMultiGet:nC}),method:"webdav",headers:a,account:n})];case 1:return[2,e.sent()]}})})}))];case 2:return l=d.sent(),h=o.filter(function(t){return s.every(function(e){return!r8(e.url,t.url)})}),nD("deleted calendars: ".concat(h.map(function(t){return t.displayName}))),f=o.filter(function(t){return s.some(function(e){return r8(e.url,t.url)&&(e.syncToken&&e.syncToken!==t.syncToken||e.ctag&&e.ctag!==t.ctag)})}),[2,i?{created:u,updated:c,deleted:h}:tg(f).concat(tg(u),tg(l))]}})})},nP=Object.freeze({__proto__:null,calendarMultiGet:nC,calendarQuery:nO,createCalendarObject:nN,deleteCalendarObject:nR,fetchCalendarObjects:nI,fetchCalendars:nx,freeBusyQuery:function(t){return tE(void 0,void 0,void 0,function(){var e,r,n,i,a,o;return ta(this,function(s){switch(s.label){case 0:if(e=t.url,r=t.timeRange,n=t.depth,i=t.headers,r){if(o=/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(\.\d+)?(([+-]\d\d:\d\d)|Z)?$/i,(!(a=/^\d{4}(-\d\d(-\d\d(T\d\d:\d\d(:\d\d)?(\.\d+)?(([+-]\d\d:\d\d)|Z)?)?)?)?$/i).test(r.start)||!a.test(r.end))&&(!o.test(r.start)||!o.test(r.end)))throw Error("invalid timeRange format, not in ISO8601")}else throw Error("timeRange is required");return[4,nc({url:e,body:{"free-busy-query":r5(ts({_attributes:r4([H.CALDAV])},"".concat(W.CALDAV,":time-range"),{_attributes:{start:"".concat(new Date(r.start).toISOString().slice(0,19).replace(/[-:.]/g,""),"Z"),end:"".concat(new Date(r.end).toISOString().slice(0,19).replace(/[-:.]/g,""),"Z")}}))},defaultNamespace:W.CALDAV,depth:n,headers:i})];case 1:return[2,s.sent()[0]]}})})},makeCalendar:nS,syncCalendars:nk,updateCalendarObject:nY}),nL=tH("tsdav:account"),nj=function(t){return tE(void 0,void 0,void 0,function(){var e,r,n,i,a,o,s,u,c,l;return ta(this,function(h){switch(h.label){case 0:nL("Service discovery..."),n=t.account,i=t.headers,a=new URL(n.serverUrl),(o=new URL("/.well-known/".concat(n.accountType),a)).protocol=null!==(e=a.protocol)&&void 0!==e?e:"http",h.label=1;case 1:return h.trys.push([1,3,,4]),[4,tC.fetch(o.href,{headers:i,method:"PROPFIND",redirect:"manual"})];case 2:if((s=h.sent()).status>=300&&s.status<400&&"string"==typeof(u=s.headers.get("Location"))&&u.length)return nL("Service discovery redirected to ".concat(u)),(c=new URL(u,a)).hostname===o.hostname&&o.port&&!c.port&&(c.port=o.port),c.protocol=null!==(r=a.protocol)&&void 0!==r?r:"http",[2,c.href];return[3,4];case 3:return l=h.sent(),nL("Service discovery failed: ".concat(l.stack)),[3,4];case 4:return[2,a.href]}})})},nM=function(t){return tE(void 0,void 0,void 0,function(){var e,r,n,i,a,o,s,u,c;return ta(this,function(l){switch(l.label){case 0:if(o=t.account,s=t.headers,!no(o,u=["rootUrl"]))throw Error("account must have ".concat(ns(o,u)," before fetchPrincipalUrl"));return nL("Fetching principal url from path ".concat(o.rootUrl)),[4,ne({url:o.rootUrl,props:ts({},"".concat(W.DAV,":current-user-principal"),{}),depth:"0",headers:s})];case 1:if(!(c=tv.apply(void 0,[l.sent(),1])[0]).ok&&(nL("Fetch principal url failed: ".concat(c.statusText)),401===c.status))throw Error("Invalid credentials");return nL("Fetched principal url ".concat(null===(r=null===(e=c.props)||void 0===e?void 0:e.currentUserPrincipal)||void 0===r?void 0:r.href)),[2,new URL(null!==(a=null===(i=null===(n=c.props)||void 0===n?void 0:n.currentUserPrincipal)||void 0===i?void 0:i.href)&&void 0!==a?a:"",o.rootUrl).href]}})})},nB=function(t){return tE(void 0,void 0,void 0,function(){var e,r,n,i,a,o,s;return ta(this,function(u){switch(u.label){case 0:if(n=t.account,i=t.headers,!no(n,a=["principalUrl","rootUrl"]))throw Error("account must have ".concat(ns(n,a)," before fetchHomeUrl"));return nL("Fetch home url from ".concat(n.principalUrl)),[4,ne({url:n.principalUrl,props:"caldav"===n.accountType?ts({},"".concat(W.CALDAV,":calendar-home-set"),{}):ts({},"".concat(W.CARDDAV,":addressbook-home-set"),{}),depth:"0",headers:i})];case 1:if(!(o=u.sent().find(function(t){return r8(n.principalUrl,t.href)}))||!o.ok)throw Error("cannot find homeUrl");return s=new URL("caldav"===n.accountType?null===(e=null==o?void 0:o.props)||void 0===e?void 0:e.calendarHomeSet.href:null===(r=null==o?void 0:o.props)||void 0===r?void 0:r.addressbookHomeSet.href,n.rootUrl).href,nL("Fetched home url ".concat(s)),[2,s]}})})},nF=function(t){return tE(void 0,void 0,void 0,function(){var e,r,n,i,a,o,s;return ta(this,function(u){switch(u.label){case 0:return e=t.account,r=t.headers,i=void 0!==(n=t.loadCollections)&&n,o=void 0!==(a=t.loadObjects)&&a,s=Object.assign({},e),[4,nj({account:e,headers:r})];case 1:return s.rootUrl=u.sent(),[4,nM({account:s,headers:r})];case 2:return s.principalUrl=u.sent(),[4,nB({account:s,headers:r})];case 3:if(s.homeUrl=u.sent(),!(i||o))return[3,7];if("caldav"!==e.accountType)return[3,5];return[4,nx({headers:r,account:s})];case 4:return s.calendars=u.sent(),[3,7];case 5:if("carddav"!==e.accountType)return[3,7];return[4,nb({headers:r,account:s})];case 6:s.addressBooks=u.sent(),u.label=7;case 7:if(!o)return[3,11];if(!("caldav"===e.accountType&&s.calendars))return[3,9];return[4,Promise.all(s.calendars.map(function(t){return tE(void 0,void 0,void 0,function(){var e,n,i;return ta(this,function(a){switch(a.label){case 0:return e=Object.assign,n=[Object.assign({},t)],i={},[4,nI({calendar:t,headers:r})];case 1:return[2,e.apply(Object,n.concat([(i.objects=a.sent(),i)]))]}})})}))];case 8:return s.calendars=u.sent(),[3,11];case 9:if(!("carddav"===e.accountType&&s.addressBooks))return[3,11];return[4,Promise.all(s.addressBooks.map(function(t){return tE(void 0,void 0,void 0,function(){var e,n,i;return ta(this,function(a){switch(a.label){case 0:return e=Object.assign,n=[Object.assign({},t)],i={},[4,n_({addressBook:t,headers:r})];case 1:return[2,e.apply(Object,n.concat([(i.objects=a.sent(),i)]))]}})})}))];case 10:s.addressBooks=u.sent(),u.label=11;case 11:return[2,s]}})})},nU=Object.freeze({__proto__:null,createAccount:nF,fetchHomeUrl:nB,fetchPrincipalUrl:nM,serviceDiscovery:nj}),nV={exports:{}};/*! https://mths.be/base64 v1.0.0 by @mathias | MIT license */nV.exports,M=nV.exports,function(t){var e=nV&&nV.exports==M&&nV,r="object"==typeof tA&&tA;(r.global===r||r.window===r)&&(t=r);var n=function(t){this.message=t};n.prototype=Error(),n.prototype.name="InvalidCharacterError";var i=function(t){throw new n(t)},a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=/[\t\n\f\r ]/g,s={encode:function(t){t=String(t),/[^\0-\xFF]/.test(t)&&i("The string to be encoded contains characters outside of the Latin1 range.");for(var e,r,n,o=t.length%3,s="",u=-1,c=t.length-o;++u<c;)n=(e=t.charCodeAt(u)<<16)+(t.charCodeAt(++u)<<8)+t.charCodeAt(++u),s+=a.charAt(n>>18&63)+a.charAt(n>>12&63)+a.charAt(n>>6&63)+a.charAt(63&n);return 2==o?(n=(e=t.charCodeAt(u)<<8)+t.charCodeAt(++u),s+=a.charAt(n>>10)+a.charAt(n>>4&63)+a.charAt(n<<2&63)+"="):1==o&&(n=t.charCodeAt(u),s+=a.charAt(n>>2)+a.charAt(n<<4&63)+"=="),s},decode:function(t){var e,r,n=(t=String(t).replace(o,"")).length;n%4==0&&(n=(t=t.replace(/==?$/,"")).length),(n%4==1||/[^+a-zA-Z0-9/]/.test(t))&&i("Invalid character: the string to be decoded is not correctly encoded.");for(var s=0,u="",c=-1;++c<n;)r=a.indexOf(t.charAt(c)),e=s%4?64*e+r:r,s++%4&&(u+=String.fromCharCode(255&e>>(-2*s&6)));return u},version:"1.0.0"};if(M&&!M.nodeType){if(e)e.exports=s;else for(var u in s)s.hasOwnProperty(u)&&(M[u]=s[u])}else t.base64=s}(tA);var nz=nV.exports,nH=tH("tsdav:authHelper"),nK=function(t,e){return function(){for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];return t(Object.assign(Object.assign({},e),n[0]))}},nW=function(t){return nH("Basic auth token generated: ".concat(nz.encode("".concat(t.username,":").concat(t.password)))),{authorization:"Basic ".concat(nz.encode("".concat(t.username,":").concat(t.password)))}},nq=function(t){return tE(void 0,void 0,void 0,function(){var e,r,n,i,a;return ta(this,function(o){switch(o.label){case 0:if(!no(t,e=["authorizationCode","redirectUrl","clientId","clientSecret","tokenUrl"]))throw Error("Oauth credentials missing: ".concat(ns(t,e)));return r=new URLSearchParams({grant_type:"authorization_code",code:t.authorizationCode,redirect_uri:t.redirectUrl,client_id:t.clientId,client_secret:t.clientSecret}),nH(t.tokenUrl),nH(r.toString()),[4,tC.fetch(t.tokenUrl,{method:"POST",body:r.toString(),headers:{"content-length":"".concat(r.toString().length),"content-type":"application/x-www-form-urlencoded"}})];case 1:if(!(n=o.sent()).ok)return[3,3];return[4,n.json()];case 2:return[2,o.sent()];case 3:return a=(i="Fetch Oauth tokens failed: ").concat,[4,n.text()];case 4:return nH.apply(void 0,[a.apply(i,[o.sent()])]),[2,{}]}})})},n$=function(t){return tE(void 0,void 0,void 0,function(){var e,r,n,i,a;return ta(this,function(o){switch(o.label){case 0:if(!no(t,e=["refreshToken","clientId","clientSecret","tokenUrl"]))throw Error("Oauth credentials missing: ".concat(ns(t,e)));return r=new URLSearchParams({client_id:t.clientId,client_secret:t.clientSecret,refresh_token:t.refreshToken,grant_type:"refresh_token"}),[4,tC.fetch(t.tokenUrl,{method:"POST",body:r.toString(),headers:{"Content-Type":"application/x-www-form-urlencoded"}})];case 1:if(!(n=o.sent()).ok)return[3,3];return[4,n.json()];case 2:return[2,o.sent()];case 3:return a=(i="Refresh access token failed: ").concat,[4,n.text()];case 4:return nH.apply(void 0,[a.apply(i,[o.sent()])]),[2,{}]}})})},nG=function(t){return tE(void 0,void 0,void 0,function(){var e,r;return ta(this,function(n){switch(n.label){case 0:if(nH("Fetching oauth headers"),r={},t.refreshToken)return[3,2];return[4,nq(t)];case 1:return r=n.sent(),[3,4];case 2:if(!(t.refreshToken&&!t.accessToken||Date.now()>(null!==(e=t.expiration)&&void 0!==e?e:0)))return[3,4];return[4,n$(t)];case 3:r=n.sent(),n.label=4;case 4:return nH("Oauth tokens fetched: ".concat(r.access_token)),[2,{tokens:r,headers:{authorization:"Bearer ".concat(r.access_token)}}]}})})},nZ=Object.freeze({__proto__:null,defaultParam:nK,fetchOauthTokens:nq,getBasicAuthHeaders:nW,getOauthHeaders:nG,refreshAccessToken:n$}),nJ=function(){var t,e;function r(t){var e,n;(function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")})(this,r),this.serverUrl=t.serverUrl,this.credentials=t.credentials,this.authMethod=null!==(e=t.authMethod)&&void 0!==e?e:"Basic",this.accountType=null!==(n=t.defaultAccountType)&&void 0!==n?n:"caldav"}return t=[{key:"login",value:function(){return tE(this,void 0,void 0,function(){var t,e,r,n,i;return ta(this,function(a){switch(a.label){case 0:if(t=this,"Basic"!==this.authMethod)return[3,1];return e=nW(this.credentials),[3,5];case 1:if("Oauth"!==this.authMethod)return[3,3];return[4,nG(this.credentials)];case 2:return r=a.sent().headers,[3,4];case 3:r={},a.label=4;case 4:e=r,a.label=5;case 5:if(t.authHeaders=e,n=this,!this.accountType)return[3,7];return[4,nF({account:{serverUrl:this.serverUrl,credentials:this.credentials,accountType:this.accountType},headers:this.authHeaders})];case 6:return i=a.sent(),[3,8];case 7:i=void 0,a.label=8;case 8:return n.account=i,[2]}})})}},{key:"davRequest",value:function(t){return tE(this,void 0,void 0,function(){var e,r,n,i;return ta(this,function(a){return e=t.init,r=tT(t,["init"]),n=e.headers,i=tT(e,["headers"]),[2,nt(Object.assign(Object.assign({},r),{init:Object.assign(Object.assign({},i),{headers:Object.assign(Object.assign({},this.authHeaders),n)})}))]})})}},{key:"createObject",value:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return tE(this,void 0,void 0,function(){return ta(this,function(t){return[2,nK(nr,{url:this.serverUrl,headers:this.authHeaders})(e[0])]})})}},{key:"updateObject",value:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return tE(this,void 0,void 0,function(){return ta(this,function(t){return[2,nK(nn,{headers:this.authHeaders,url:this.serverUrl})(e[0])]})})}},{key:"deleteObject",value:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return tE(this,void 0,void 0,function(){return ta(this,function(t){return[2,nK(ni,{headers:this.authHeaders,url:this.serverUrl})(e[0])]})})}},{key:"propfind",value:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return tE(this,void 0,void 0,function(){return ta(this,function(t){return[2,nK(ne,{headers:this.authHeaders})(e[0])]})})}},{key:"createAccount",value:function(t){return tE(this,void 0,void 0,function(){var e,r,n,i;return ta(this,function(a){return e=t.account,r=t.headers,n=t.loadCollections,i=t.loadObjects,[2,nF({account:Object.assign({serverUrl:this.serverUrl,credentials:this.credentials},e),headers:Object.assign(Object.assign({},this.authHeaders),r),loadCollections:n,loadObjects:i})]})})}},{key:"collectionQuery",value:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return tE(this,void 0,void 0,function(){return ta(this,function(t){return[2,nK(nc,{headers:this.authHeaders})(e[0])]})})}},{key:"makeCollection",value:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return tE(this,void 0,void 0,function(){return ta(this,function(t){return[2,nK(nl,{headers:this.authHeaders})(e[0])]})})}},{key:"syncCollection",value:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return tE(this,void 0,void 0,function(){return ta(this,function(t){return[2,nK(nd,{headers:this.authHeaders})(e[0])]})})}},{key:"supportedReportSet",value:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return tE(this,void 0,void 0,function(){return ta(this,function(t){return[2,nK(nh,{headers:this.authHeaders})(e[0])]})})}},{key:"isCollectionDirty",value:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return tE(this,void 0,void 0,function(){return ta(this,function(t){return[2,nK(nf,{headers:this.authHeaders})(e[0])]})})}},{key:"smartCollectionSync",value:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return tE(this,void 0,void 0,function(){return ta(this,function(t){return[2,nK(np,{headers:this.authHeaders,account:this.account})(e[0])]})})}},{key:"calendarQuery",value:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return tE(this,void 0,void 0,function(){return ta(this,function(t){return[2,nK(nO,{headers:this.authHeaders})(e[0])]})})}},{key:"makeCalendar",value:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return tE(this,void 0,void 0,function(){return ta(this,function(t){return[2,nK(nS,{headers:this.authHeaders})(e[0])]})})}},{key:"calendarMultiGet",value:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return tE(this,void 0,void 0,function(){return ta(this,function(t){return[2,nK(nC,{headers:this.authHeaders})(e[0])]})})}},{key:"fetchCalendars",value:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return tE(this,void 0,void 0,function(){return ta(this,function(t){return[2,nK(nx,{headers:this.authHeaders,account:this.account})(null==e?void 0:e[0])]})})}},{key:"fetchCalendarObjects",value:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return tE(this,void 0,void 0,function(){return ta(this,function(t){return[2,nK(nI,{headers:this.authHeaders})(e[0])]})})}},{key:"createCalendarObject",value:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return tE(this,void 0,void 0,function(){return ta(this,function(t){return[2,nK(nN,{headers:this.authHeaders})(e[0])]})})}},{key:"updateCalendarObject",value:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return tE(this,void 0,void 0,function(){return ta(this,function(t){return[2,nK(nY,{headers:this.authHeaders})(e[0])]})})}},{key:"deleteCalendarObject",value:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return tE(this,void 0,void 0,function(){return ta(this,function(t){return[2,nK(nR,{headers:this.authHeaders})(e[0])]})})}},{key:"syncCalendars",value:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return tE(this,void 0,void 0,function(){return ta(this,function(t){return[2,nK(nk,{headers:this.authHeaders,account:this.account})(e[0])]})})}},{key:"addressBookQuery",value:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return tE(this,void 0,void 0,function(){return ta(this,function(t){return[2,nK(nv,{headers:this.authHeaders})(e[0])]})})}},{key:"addressBookMultiGet",value:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return tE(this,void 0,void 0,function(){return ta(this,function(t){return[2,nK(ng,{headers:this.authHeaders})(e[0])]})})}},{key:"fetchAddressBooks",value:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return tE(this,void 0,void 0,function(){return ta(this,function(t){return[2,nK(nb,{headers:this.authHeaders,account:this.account})(null==e?void 0:e[0])]})})}},{key:"fetchVCards",value:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return tE(this,void 0,void 0,function(){return ta(this,function(t){return[2,nK(n_,{headers:this.authHeaders})(e[0])]})})}},{key:"createVCard",value:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return tE(this,void 0,void 0,function(){return ta(this,function(t){return[2,nK(nT,{headers:this.authHeaders})(e[0])]})})}},{key:"updateVCard",value:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return tE(this,void 0,void 0,function(){return ta(this,function(t){return[2,nK(nE,{headers:this.authHeaders})(e[0])]})})}},{key:"deleteVCard",value:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return tE(this,void 0,void 0,function(){return ta(this,function(t){return[2,nK(nA,{headers:this.authHeaders})(e[0])]})})}}],to(r.prototype,t),e&&to(r,e),r}(),nX=Object.freeze({__proto__:null,DAVClient:nJ,createDAVClient:function(t){return tE(void 0,void 0,void 0,function(){var e,r,n,i,a,o,s,u,c,l,h,f,d,m,y,v,g,b,_,T,E,A,w,D,O,C,S,x,I,N,Y,R,k,P;return ta(this,function(L){switch(L.label){case 0:if(e=t.serverUrl,r=t.credentials,n=t.authMethod,i=t.defaultAccountType,"Basic"!==n)return[3,1];return o=nW(r),[3,5];case 1:if("Oauth"!==n)return[3,3];return[4,nG(r)];case 2:return s=L.sent().headers,[3,4];case 3:s={},L.label=4;case 4:o=s,L.label=5;case 5:if(a=o,!i)return[3,7];return[4,nF({account:{serverUrl:e,credentials:r,accountType:i},headers:a})];case 6:return c=L.sent(),[3,8];case 7:c=void 0,L.label=8;case 8:return u=c,l=function(t){return tE(void 0,void 0,void 0,function(){var e,r,n,i;return ta(this,function(o){return e=t.init,r=tT(t,["init"]),n=e.headers,i=tT(e,["headers"]),[2,nt(Object.assign(Object.assign({},r),{init:Object.assign(Object.assign({},i),{headers:Object.assign(Object.assign({},a),n)})}))]})})},h=nK(nr,{url:e,headers:a}),f=nK(nn,{headers:a,url:e}),d=nK(ni,{headers:a,url:e}),m=nK(ne,{headers:a}),y=function(t){return tE(void 0,void 0,void 0,function(){var n,i,o,s;return ta(this,function(u){return n=t.account,i=t.headers,o=t.loadCollections,s=t.loadObjects,[2,nF({account:Object.assign({serverUrl:e,credentials:r},n),headers:Object.assign(Object.assign({},a),i),loadCollections:o,loadObjects:s})]})})},v=nK(nc,{headers:a}),g=nK(nl,{headers:a}),b=nK(nd,{headers:a}),_=nK(nh,{headers:a}),T=nK(nf,{headers:a}),E=nK(np,{headers:a,account:u}),A=nK(nO,{headers:a}),w=nK(nC,{headers:a}),D=nK(nS,{headers:a}),O=nK(nx,{headers:a,account:u}),C=nK(nI,{headers:a}),S=nK(nN,{headers:a}),x=nK(nY,{headers:a}),I=nK(nR,{headers:a}),N=nK(nk,{account:u,headers:a}),Y=nK(nv,{headers:a}),R=nK(ng,{headers:a}),k=nK(nb,{account:u,headers:a}),P=nK(n_,{headers:a}),[2,{davRequest:l,propfind:m,createAccount:y,createObject:h,updateObject:f,deleteObject:d,calendarQuery:A,addressBookQuery:Y,collectionQuery:v,makeCollection:g,calendarMultiGet:w,makeCalendar:D,syncCollection:b,supportedReportSet:_,isCollectionDirty:T,smartCollectionSync:E,fetchCalendars:O,fetchCalendarObjects:C,createCalendarObject:S,updateCalendarObject:x,deleteCalendarObject:I,syncCalendars:N,fetchAddressBooks:k,addressBookMultiGet:R,fetchVCards:P,createVCard:nK(nT,{headers:a}),updateVCard:nK(nE,{headers:a}),deleteVCard:nK(nA,{headers:a})}]}})})}});Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({DAVNamespace:H,DAVNamespaceShort:W,DAVAttributeMap:tK},nX),na),nm),nU),nw),nP),nZ),r9);var nQ=new BroadcastChannel("sw-messages");function n0(){return(n0=tn(function(){return ta(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,t(tp).getItem("accounts")];case 1:return tt=e.sent()||[],[2,!0];case 2:return console.error("Error loading accounts:",e.sent()),nQ.postMessage({action:"error",content:"error"}),[2,!1];case 3:return[2]}})})).apply(this,arguments)}function n1(){return(n1=tn(function(){var e;return ta(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,t(tp).getItem("calendarNames")];case 1:return r.sent(),[3,3];case 2:return e=r.sent(),nQ.postMessage({action:"error",content:"error"}),console.error("Error retrieving calendar names:",e),[3,3];case 3:return[2]}})})).apply(this,arguments)}!function(){n0.apply(this,arguments)}(),function(){n1.apply(this,arguments)}(),t(tp).getItem("settings").then(function(t){}).catch(function(t){console.log(t),nQ.postMessage({action:"error",content:"error"})});var n2={},n3={};function n6(){return(n6=tn(function(t){return ta(this,function(e){try{return n2[t.id]||("oauth"===t.type?n2[t.id]=new nJ({serverUrl:t.server_url,credentials:{tokenUrl:"https://oauth2.googleapis.com/token",refreshToken:t.tokens.refresh_token,clientId:"762086220505-f0kij4nt279nqn21ukokm06j0jge2ngl.apps.googleusercontent.com",clientSecret:"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",authorizationCode:t.authorizationCode,redirectUrl:"https://greg.strukturart.com/index.html"},authMethod:"Oauth",defaultAccountType:"caldav"}):n2[t.id]=new nJ({serverUrl:t.server_url,credentials:{username:t.user,password:t.password},authMethod:"Basic",defaultAccountType:"caldav"})),[2,n2[t.id]]}catch(t){console.log(t),nQ.postMessage({action:"test",content:t})}return[2]})})).apply(this,arguments)}var n8=(B=tn(function(){var e,r,n,i,a,o,s,u,c,l,h,f,d,m,y,v;return ta(this,function(g){switch(g.label){case 0:e=!0,r=!1,n=void 0,g.label=1;case 1:g.trys.push([1,22,23,24]),i=tt[Symbol.iterator](),g.label=2;case 2:if(e=(a=i.next()).done)return[3,21];return[4,function(t){return n6.apply(this,arguments)}(o=a.value)];case 3:s=g.sent(),g.label=4;case 4:if(g.trys.push([4,19,,20]),n3[o.id])return[3,6];return[4,s.login()];case 5:g.sent(),n3[o.id]=!0,g.label=6;case 6:return[4,s.fetchCalendars()];case 7:u=g.sent(),c=0,g.label=8;case 8:if(!(c<u.length))return[3,11];return[4,s.fetchCalendarObjects({calendar:u[c]})];case 9:g.sent(),cn.push({name:u[c].displayName,url:u[c].url,id:o.id+"-"+c,view:!0}),g.label=10;case 10:return c++,[3,8];case 11:return[4,t(tp).getItem(o.id)];case 12:if(null==(l=g.sent()))return[3,20];h=0,g.label=13;case 13:if(!(h<l.length))return[3,18];f={oldCalendars:[{url:l[h].url,ctag:l[h].ctag,syncToken:l[h].syncToken,displayName:l[h].displayName,objects:l[h].objects}],detailedResult:!0,headers:s.authHeaders},g.label=14;case 14:return g.trys.push([14,16,,17]),[4,s.syncCalendars(f)];case 15:if(d=g.sent(),console.log("try to sync"),d.updated.length&&d.updated.length>0)return nQ.postMessage({action:"test",content:"update needed"}),[3,18];return[3,17];case 16:return console.log(m=g.sent()),nQ.postMessage({action:"test",content:m.toString()}),[3,17];case 17:return h++,[3,13];case 18:return[3,20];case 19:return console.log(y=g.sent()),nQ.postMessage({action:"test",content:y.toString()}),[3,20];case 20:return e=!0,[3,2];case 21:return[3,24];case 22:return v=g.sent(),r=!0,n=v,[3,24];case 23:try{e||null==i.return||i.return()}finally{if(r)throw n}return[7];case 24:return[2]}})}),function(){return B.apply(this,arguments)});self.addEventListener("message",(F=tn(function(e){return ta(this,function(r){if(e.data||nQ.postMessage({action:"error",content:"error"}),"parse"==e.data.type)try{var n,i,a,o,s,u,c,l,h,f,d,m;n=e.data.t.data,i="subscription"==e.data.e,a=e.data.t.etag,o=e.data.t.url,s=e.data.e,u="subscription"!=e.data.e&&"local-id"!=e.data.e,c=e.data.callback||!1,l=e.data.store||!1,(h=new(t(tf)).Component(t(tf).parse(n),{parseEvent:!0})).onerror=function(t){console.log("Error occurred:",t)},h.oncomplete=function(){console.log("succesfull parsed")},f=h.getAllSubcomponents("vevent"),d=null,m=[],f.forEach(function(e){var r,f,y,v,g,b,_="",T=!1,E=e.getFirstPropertyValue("dtstart"),A=e.getFirstPropertyValue("dtend")||e.getFirstPropertyValue("dtstart");if(E.isDate&&A.isDate&&(T=!0),void 0!=e.getFirstPropertyValue("rrule"))try{var w=e.getFirstPropertyValue("rrule");if(w&&"object"==typeof w&&w.freq){if(rr_freq=w.freq,!1===e.getFirstPropertyValue("rrule").isFinite())_=null!==w.until?w.until:new Date("3000-01-01").getTime();else if(e.getFirstPropertyValue("rrule").isByCount()){var D=t(td)(E);switch(w.freq){case"DAILY":_=D.add(w.count,"days").valueOf(),A=D.add(w.count,"days").format("YYYY-MM-DD");break;case"MONTHLY":_=D.add(w.count,"months").valueOf(),A=D.add(w.count,"months").format("YYYY-MM-DD");break;case"BIWEEKLY":_=D.add(2*w.count,"weeks").valueOf(),A=D.add(2*w.count,"weeks").format("YYYY-MM-DD");break;case"WEEKLY":_=D.add(w.count,"weeks").valueOf(),A=D.add(w.count,"weeks").format("YYYY-MM-DD");break;case"YEARLY":_=D.add(w.count,"years").valueOf(),A=D.add(w.count,"years").format("YYYY-MM-DD");break;default:_=new Date("3000-01-01").getTime()}}}}catch(t){console.log(t)}if(E){var O=t(td)(E);r=O.format("YYYY-MM-DD"),f=O.format("HH:mm:ss"),y=O.unix()}if(A){var C=t(td)(A);""!=_&&(C=t(td)(_)),T&&(C=C.subtract(1,"day")),v=C.format("YYYY-MM-DD"),g=C.format("HH:mm:ss"),b=C.unix()}var S={parsed_data:d={UID:e.getFirstPropertyValue("uid")||"",SUMMARY:e.getFirstPropertyValue("summary")||"",LOCATION:e.getFirstPropertyValue("location")||"",DESCRIPTION:e.getFirstPropertyValue("description")||"",CATEGORIES:e.getFirstPropertyValue("categories")||"",RRULE:e.getFirstPropertyValue("rrule")||"",CLASS:e.getFirstPropertyValue("class")||"",isSubscription:i,isCaldav:u,allDay:T,dateStart:r,dateStartUnix:y,dateEndUnix:b,dateEnd:v,time_start:f,time_end:g,alarm:"none",etag:a||"",url:o||"",calendar_name:h.getFirstPropertyValue("x-wr-calname")||"",id:s,modified:e.getFirstPropertyValue("last-modified").toString()}};l&&(S.raw_data=n,S.uid=d.UID),c&&(S.calback=!0),m.push(S)}),m.forEach(function(t){nQ.postMessage({action:"parse",content:t})})}catch(t){nQ.postMessage({action:"error",content:"error parsing "+t})}return[2]})}),function(t){return F.apply(this,arguments)})),self.onsystemmessage=function(e){try{var r,n=(r=tn(function(){var r,n,i,a;return ta(this,function(o){return"activity"===e.name&&(n=(r=(handler=e.data.webActivityRequestHandler()).source).name,i=r.data,"greg-oauth"==n&&nQ.postMessage({oauth_success:i})),"alarm"===e.name&&(a=e.data.json(),"keep alive"==a.data.note?(n8(),self.registration.showNotification("Test",{body:a.data.note}),t(tp).getItem("settings").then(function(t){if("Yes"==t.background_sync){var e=new Date;e.setMinutes(e.getMinutes()+2),navigator.b2g.alarmManager.add({date:e,data:{note:"keep alive",type:"background_sync"},ignoreTimezone:!1}).then(nQ.postMessage({action:"background_sync",content:""}))}}).catch(function(t){console.log(t)})):self.registration.showNotification("Greg",{body:a.data.note})),[2]})}),function(){return r.apply(this,arguments)});e.waitUntil(n())}catch(t){nQ.postMessage({action:"error",content:t})}}}();